webpackJsonp([4],{0:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=function(){var t=p.storage.option.remote.parse?{url:"http://localhost:"+p.storage.option.remote.port+"/loadHTML",method:"POST",data:{url:_,timeout:2e3}}:{url:_};$.ajax(t).then(function(t){e(t)},function(e,t,n){})};p.storage.option.unreader.offline&&S.unread.idx&&S.unread.idx!=-1?$.ajax({url:"http://localhost:"+p.storage.option.remote.port+"/reading/"+S.unread.idx+"?title="+S.unread.title}).then(function(n){"string"==typeof n&&n.search("<sr-read")>0?(M=!0,n=n.trim().replace(/^<html[\S ]+/,"").replace(/<\/html>$/,"").replace(/<sr-read/gi,"<div class='sr-read'").replace(/<\/sr-read>/gi,"</div>").replace(/<sr-rd-title/gi,"<div class='sr-rd-title'").replace(/<\/sr-rd-title>/gi,"</div>").replace(/<sr-rd-desc/gi,"<div class='sr-rd-desc'").replace(/<\/sr-rd-desc>/gi,"</div>").replace(/<sr-rd-content/gi,"<div class='sr-rd-content'").replace(/<\/sr-rd-content>/gi,"</div>").replace(/<sr-annote[ a-zA-Z0-9-="]+>|<\/sr-annote>/gi,""),e(n)):t()},function(e,n,o){t()}):t()}function i(e){var t='<div class="coffee_loading"><div class="coffee_cup"></div><div class="coffee_body"></div><span class="coffee_label">小憩片刻，马上就好</span></div>';$("body").html('<div class="loading" theme="'+e+'"><div class="logo"></div><div class="icon">'+t+"</div></div>")}function s(e){if(location.href.endsWith(".md")||location.href.endsWith(".txt")){var t=location.href.match(/\/{1}[\u4e00-\u9fa5\w-_.~@:?%#&=]*.(md|txt)$/i);t=t&&t.length>0?t[0].replace(/\/|.(txt|md)/gi,""):"未命名",e="<html><head><title>"+decodeURI(t)+"</title></head><body><pre>"+e+"</pre></body></html>"}var n=e.match(/(<head|<head )[\S\s]*(head>)/gi),o=n[0].match(/(<title|<title )[\S\s]*(title>)/gi),r=e.match(/(<body|<body )[\S\s]*(body>)/gi);o=o[0].replace(/<\/?title>/gi,""),""==o.trim()&&(o=n[0].match(/<meta property="og:title" content="[\S ]+"/gi),o=o[0].replace(/<meta property="og:title" content="|"/gi,"")),$("head title").text(o||"未命名"),$("body").html($.parseHTML(z(r[0])))}function l(){return C.Getsites(),M?($("body .sr-rd-content sr-annote-note").remove(),$("body img.sr-annote").removeAttr("sr-annote-bb-color").removeAttr("data-id").removeAttr("data-type").removeAttr("data-color-type"),$("body pre.sr-annote").removeAttr("sr-annote-bb-color").removeAttr("data-id").removeAttr("data-type").removeAttr("data-color-type"),C.html=C.current,C.html.include=$("body .sr-rd-content").html()):C.ReadMode(),""==C.html.include||void 0==C.html.include||"<sr-rd-content-error></sr-rd-content-error>"==C.html.include?void d('解析正文失败，可以给我提 <a target="_blank" href="https://github.com/Kenshin/simpread/issues/new/choose">Issues ↗</a><br>如果开启了 <b>内置解析方案</b> 的话，请多刷新几次一般可以解决。'):(L(),$("head title").html(""!=C.html.title?"简悦 | "+C.html.title:"转换器 | 简悦"),$("sr-rd-title").html(M?S.unread.title:C.html.title),C.html.desc&&""!=C.html.desc&&"简悦 SimpRead - 如杂志般沉浸式的阅读体验"!=C.html.desc?$("sr-rd-desc").html(C.html.desc):$(" sr-rd-desc").remove(),C.html.avatar?R(C.html.include,C.html.avatar):$("sr-rd-content").html(C.html.include),C.html.paging?j(C.html.paging):$("sr-page").remove(),P(),$("sr-rd-content").find(C.Exclude($("sr-rd-content"))).remove(),C.Beautify($("sr-rd-content")),void C.Format("simpread-read-root"))}function c(){var e=function(){p.storage.option.unreader.sametheme&&["dark","palenight","night"].includes(p.storage.option.unreader.theme)?$("head").append('<style class="sr-highlight-dark">.hljs{display:block;overflow-x:auto;padding:.5em;background:#444}.hljs-keyword,.hljs-link,.hljs-literal,.hljs-section,.hljs-selector-tag{color:#fff}.hljs,.hljs-subst{color:#ddd}.hljs-addition,.hljs-attribute,.hljs-built_in,.hljs-bullet,.hljs-name,.hljs-string,.hljs-symbol,.hljs-template-tag,.hljs-template-variable,.hljs-title,.hljs-type,.hljs-variable{color:#d88}.hljs-comment,.hljs-deletion,.hljs-meta,.hljs-quote{color:#777}.hljs-doctag,.hljs-keyword,.hljs-literal,.hljs-name,.hljs-section,.hljs-selector-tag,.hljs-strong,.hljs-title,.hljs-type{font-weight:700}.hljs-emphasis{font-style:italic}</style>'):$("head .sr-highlight-dark").remove(),document.querySelectorAll("pre").forEach(function(e){hljs&&hljs.highlightBlock(e)})};T?$.ajax({url:"http://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.10/highlight.min.js"}).then(function(t){e()}):e()}function d(e){var t=T?location.origin+"/unreader/assets/images/404.svg":"";$("body").html('<div class="error"><img src="'+t+'"/><span class="label" theme="'+p.storage.option.unreader.theme+'">'+e+"</span></div>")}n(50),n(63),n(681);var p=n(4),u=n(23),f=r(u),m=n(9),g=o(m),h=n(21),b=n(56),v=r(b),x=n(120),y=o(x),w=n(88),k=r(w),E=n(157),A=o(E),C=void 0,_=location.href.replace(/chrome(\S+)\/loader.html\?url=/gi,""),S=void 0,M=!1,T=!location.href.startsWith("http"),N=$("html"),O='<div class="simpread-read-root">\n                    <sr-read style="margin: 20px 10%;">\n                        <sr-rd-title></sr-rd-title>\n                        <sr-rd-desc></sr-rd-desc>\n                        <sr-rd-content></sr-rd-content>\n                        <sr-page></sr-page>\n                    </sr-read>\n                </div>',I=function(){var e=[],t=p.storage.read.toc_hide?"toc-bg-hidden":"";if($("sr-read").find("h1, h2, h3, h4").map(function(t,n){var o=$(n),r=o[0].tagName.toLowerCase(),a=o.text(),i=o.attr("id");i=void 0==i?"sr-toc-"+t:i+"-"+t,o.attr("id",i),a&&e.push({level:"toc-level-"+r,id:i,value:a})}),0!=e.length){var n="";e.forEach(function(e,t){n+="<outline class="+e.level+">\n                    <active></active>\n                    <a class=toc-outline-theme-"+p.storage.read.theme+" href=#"+e.id+" >"+e.value+"</a>\n                </outline>"}),$("sr-read").append("<toc-bg class="+t+'><toc class="simpread-font simpread-theme-root">'+n+"</toc></tocbg>"),$("sr-read toc outline a").on("click",function(e){var t=$(e.target).parent();t.parent().find("active").removeClass("toc-outline-active"),t.find("active").addClass("toc-outline-active");var n=$(e.target).attr("href");e.preventDefault(),$(n)[0].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}),p.storage.read.toc_hide?$("head").append("<style>toc-bg{width:50px!important;height:200px!important}.toc-bg-hidden{transition:opacity .2s ease}.toc-bg-hidden:hover toc{width:180px}toc{width:0;transition:width .5s!important}</style>"):$("toc").css({width:"initial"}),p.storage.option.unreader.sametheme&&["dark","palenight","night"].includes(p.storage.option.unreader.theme)&&$("toc").css({color:"#fff"})}},z=function(e){var t=function e(t,n){if("string"!=typeof t||!t)return null;if(t.match(/^[a-z]+\:\/\//i))return t;if(t.match(/^\/\//))return"http:"+t;if(t.match(/^[a-z]+\:/i))return t;if("string"!=typeof n){var o=document.createElement("a");return o.href=t,o.pathname?"http://"+t:null}if(n=e(n),null===n)return null;var o=document.createElement("a");o.href=n,"/"===t[0]?n=[]:(n=o.pathname.split("/"),n.pop()),t=t.split("/");for(var r=0;r<t.length;++r)if("."!==t[r])if(".."===t[r]){if("undefined"==typeof n.pop()||0===n.length)return null}else n.push(t[r]);return o.protocol+"//"+o.hostname+n.join("/")};return e=e.replace(/<img [\S ]*src="[^"]*"/gi,function(e){return e.replace(/src="[^"]*"/gi,function(e){var n=e.replace(/(src="|")/gi,"");return n.startsWith("http")||n.startsWith("data")?e:'src="'+t(n,_)+'"'})})},R=function(e,t){var n="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAOVBMVEX///+AgICfn5+Hh4f39/fPz8+vr6+QkJDg4ODv7+/n5+fAwMCoqKiYmJjHx8fX19e4uLjQ0NDIyMhhw/XSAAACBUlEQVRYw6VX2ZKEIAw0ATnk8Pj/j90q3V13SSOxpl+mHEknaUKCUw9xTZnpBLu02ukV4lGoAR9Rbb4Xgii7ztxTF35/ay4p1kdzm2mI/KDn4kkB0w3iICVmbO9IDae31zMkoo8YZkJgl5IrGh1WpHaN34VdDUks//YfrNjsn/cO8NtnAedhivl+G6D9kCH8Buhl/JptLv0dLMIcuqnTBY8TGCdhelvohfGjI3mEEybYZKGdZTKokcfNipCXpg4IysgoMAwDl5KegFGwy2cEYZpfEBQkAjpnehFpQ2HRCwKeDKHdhQiQgGBcEE5NgEWwhgAm/eSo2BchmAXMPUMwBSaEYlE/0RPIGWxLb8BkwiiLam6n/kgzx+3+IOoSBGSbr5+0nN43cz0SnE9Wpr9O0/qz2psf0jCtTrqSR8zFK2lu1D5FjZtpnLX1wfGu/Pxn3e8QillUXGxa3A07J8fimjqb9tixrD8JXJJ8UQp7NcN6n7LrScvQTLAqxtEItTm0/r5wKOH/j9AgutAIc5MzE4VXBLa56UUjOsAwB2+bhuteprCIf9wr+yp7tl5H7C0TzW/tZQwaJQ+i2mX2w92M/BBpMEMhkiGzPtOXhyBCGaYZPFHBH6l2z90cRcfh3QJr8lWjsq1nn2Xe0hHCEvaUmL/btRaxyo/vFKdXiCFlPmk8u9rvdl/WWxJO0oeE7gAAAABJRU5ErkJggg==",o=[],r=t[0].name,a=t[1].url;e.each(function(e,t){var i={};i.name=$(r[e]).text(),i.url=$(a[e]).attr("src"),i.content=$(t).html(),!i.url&&(i.url=n),o.push(i)});var i=o.map(function(e){return'<sr-rd-mult><sr-rd-mult-avatar><div class="sr-rd-content-nobeautify"><img src="'+e.url+'" /></div><span>'+e.name+"</span></sr-rd-mult-avatar><sr-rd-mult-content>"+e.content+"</sr-rd-mult-content></sr-rd-mult>"});$("sr-rd-content").html(i)},j=function(e){var t=e[0].prev,n=e[1].next,o=function e(t,n){if("string"!=typeof t||!t)return null;if(t.match(/^[a-z]+\:\/\//i))return t;if(t.match(/^\/\//))return"http:"+t;if(t.match(/^[a-z]+\:/i))return t;if("string"!=typeof n){var o=document.createElement("a");return o.href=t,o.pathname?"http://"+t:null}if(n=e(n),null===n)return null;var o=document.createElement("a");o.href=n,"/"===t[0]?n=[]:(n=o.pathname.split("/"),n.pop()),t=t.split("/");for(var r=0;r<t.length;++r)if("."!==t[r])if(".."===t[r]){if("undefined"==typeof n.pop()||0===n.length)return null}else n.push(t[r]);return o.protocol+"//"+o.hostname+n.join("/")},r=function(e,t,n){var o=n.disable?"cursor: no-drop;color: rgba(0, 0, 0, 0.298039);background-color: rgb(229, 229, 229);box-shadow: none;":"";return'<a id="'+e+'" href="'+n.href+'" target="_self" style="display:block;min-width:88px;height:36px;margin:6px;padding:0;font-family:sans-serif;text-decoration:none;cursor:pointer;border:none;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,0.14), 0 1px 5px 0 rgba(0,0,0,0.12), 0 3px 1px -2px rgba(0,0,0,0.2);color:#fff;background-color:#1976D2;margin-right:0px;line-height: 36px;letter-spacing: .5px;font-size: 14px;'+o+'">'+t+"</a>"},a=r("btn-next","后一页 →",{href:void 0==n?"javascript:;":location.origin+location.pathname+"?url="+o(n,C.url),disable:void 0==n,color:"#fff",bgColor:"#1976D2"}),i=r("btn-prev","← 前一页",{href:void 0==t?"javascript:;":location.origin+location.pathname+"?url="+o(t,C.url),disable:void 0==t,color:"#fff",bgColor:"#1976D2"});t||n?$("sr-page").html(i+a):$("sr-page").remove()},L=function(){$("body").addClass("simpread-hidden"),N.append(O),$(".simpread-read-root").addClass("simpread-theme-root"),$("head title").prepend("简悦 | "),f.default.Change(p.storage.option.unreader.sametheme&&["dark","palenight","night"].includes(p.storage.option.unreader.theme)||"auto"==p.storage.option.darkmode&&f.default.isDarkmode()?"dark":p.storage.read.theme)},P=function(){N.addClass("simpread-font").addClass("simpread-theme-root").find(".simpread-read-root").css({top:"1000px"}).addClass("simpread-theme-root").animate({opacity:1}).addClass("simpread-read-root-show").css({top:0}),p.storage.read.fontfamily&&g.FontFamily(p.storage.read.fontfamily),p.storage.read.fontsize&&g.FontSize(p.storage.read.fontsize),p.storage.read.layout&&g.Layout(p.storage.read.layout),p.storage.read.site&&p.storage.read.site.css&&p.storage.read.site.css.length>0&&g.SiteCSS(p.storage.read.site.css),g.Preview(p.storage.read.custom),"auto"==p.storage.option.darkmode&&f.default.DarkdmodeEvent(function(e){f.default.Change(e.matches||p.storage.option.unreader.sametheme&&["dark","palenight","night"].includes(p.storage.option.unreader.theme)?"dark":p.storage.read.theme)})};$(document).ajaxError(function(e,t,n,o){p.storage.option.remote.parse&&n.url=="http://localhost:"+p.storage.option.remote.port+"/loadHTML"&&d('请确保 <b>简悦 · 同步助手</b> 处于 <a target="_blank" href="http://ksria.com/simpread/docs/#/Sync?id=同步"><b>开启状态 ↗</b></a>。')}),p.storage.Read(function(){i(p.storage.option.unreader.theme),C=new v.default(p.storage.sites),C.pure=!0,C.cleanup=!0,C.org_url=_,C.SetURL(_),C.AddPlugin(y.Plugin()),S=new k.default,S.Get(),""!=h.auth.token&&2==p.storage.user.rule||(p.storage.option.remote.parse=!1),a(function(e){try{s(e),l(),c(),setTimeout(function(){return A.Render()},100),p.storage.read.toc&&I(),M&&$("html").append("<sr-local>LOCAL</sr-local>"),T&&parent.postMessage({status:"complete",data:C.current},"*"),T&&$("head").append('<style type="text/css">html{overflow-y:hidden}html:hover{overflow-y:overlay}html::-webkit-scrollbar-track{background-color:transparent}html::-webkit-scrollbar{width:12px}html::-webkit-scrollbar-thumb{background-clip:padding-box;padding-top:80px;background-color:#ddd;border:3px solid transparent;border-radius:8px}</style>')}catch(e){0==$("sr-rd-content").length&&d('获取页面时出现了一些问题，请稍后再试。<br>如果是高级账户的话，可以开启内置解析方案，细节请看 <a target="_blank" href="http://ksria.com/simpread/docs/#/Sync?id=内置解析"><b>请看这里 ↗</b></a>')}finally{if(0==$("sr-rd-content").length)return}},function(e,t,n){})})},21:function(e,t,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.auth=void 0;var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),a=n(4),i=function(){function e(){o(this,e),this.uid=void 0,this.finger=void 0,this.getToken(),this.getLock()}return r(e,[{key:"setLock",value:function(e,t,n){var o=this;a.storage.Lock({lock:e,status:t},function(){o.lock=e,o.lock_status=t,n&&n()})}},{key:"getLock",value:function(e){var t=this;a.storage.Lock(void 0,function(n){t.lock=!n||n.lock,t.lock_status=n?n.status:void 0,e&&e()},"read")}},{key:"removeLock",value:function(){this.lock=!1,this.lock_status=void 0,a.storage.Lock(void 0,function(e){},"remove")}},{key:"setToken",value:function(e){this.token=e,a.storage.Token(this.token,function(e){})}},{key:"getToken",value:function(){var e=this;a.storage.Token(void 0,function(t){e.token=t},"read")}},{key:"removeToken",value:function(){this.token=void 0,a.storage.Token(this.token,function(e){},"remove")}},{key:"getFinger",value:function(e){var t=function(e){var t,n,o,r="";for(e+="",t=0,n=e.length;t<n;t++)o=e.charCodeAt(t).toString(16),r+=o.length<2?"0"+o:o;return r},n=function(e){var n=document.createElement("canvas"),o=n.getContext("2d"),r=e;o.textBaseline="top",o.font="14px 'Arial'",o.textBaseline="tencent",o.fillStyle="#f60",o.fillRect(125,1,62,20),o.fillStyle="#069",o.fillText(r,2,15),o.fillStyle="rgba(102, 204, 0, 0.7)",o.fillText(r,4,17);var a=n.toDataURL().replace("data:image/png;base64,",""),i=atob(a),s=t(i.slice(-16,-12));return s};e&&e(n("https://www.baidu.com/"))}},{key:"verifyHeader",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.uid?e?!(!n&&!this.token&&(t({code:403,status:-1010}),1)):(t({code:403,status:-1009}),!1):(t({code:403,status:-1008}),!1)}},{key:"registry",value:function(e){var t=this;this.getFinger(function(n){$.ajax({url:t.endpoint+"/invites/service/authentication/",method:"POST",headers:{finger:n,authentication:t.license,uid:t.uid}}).done(function(t,n,o){e(t)}).fail(function(t){e({code:-1,data:t})})})}},{key:"login",value:function(e){var t=this;this.getFinger(function(n){t.verifyHeader(n,e,!0)&&$.ajax({url:t.endpoint+"/accounts/service/login/",method:"POST",headers:{finger:n,token:t.token,uid:t.uid}}).done(function(t,n,o){e(t)}).fail(function(t){e({code:-1,data:t})})})}},{key:"logout",value:function(e){var t=this;this.getFinger(function(n){t.verifyHeader(n,e)&&$.ajax({url:t.endpoint+"/accounts/service/logout/",method:"POST",headers:{finger:n,token:t.token,uid:t.uid}}).done(function(t,n,o){e(t)}).fail(function(t){e({code:-1,data:t})})})}},{key:"verify",value:function(e){var t=this;this.getFinger(function(n){t.verifyHeader(n,e)&&$.ajax({url:t.endpoint+"/accounts/service/verify/",method:"POST",headers:{finger:n,token:t.token,uid:t.uid}}).done(function(t,n,o){e(t)}).fail(function(t){e({code:-1,data:t})})})}},{key:"reset",value:function(e,t){$.ajax({url:this.endpoint+"/accounts/service/reset/",method:"POST",data:{sn:e}}).done(function(e,n,o){t(e)}).fail(function(e){t({code:-1,data:e})})}},{key:"code",get:function(){return{verify:{"-1":"后台操作异常，请稍后再试。"},login:{"-1":"由于后台异常导致恢复购买失败，请稍后再试。"},logout:{"-1":"登出时出现错误，请稍候再试。"},401:"异常登录，请重新确认。","-1001":"一个账户仅能绑定一个密钥。","-1002":"非法登录，如果因为价格的因素，可以联系管理员。","-1003":"在相同时间内您登录了过多的浏览器，此账户已被锁定，请联系管理员解锁。","-1004":"非法验证，如果因为价格的因素，可以联系管理员。","-1005":"当前账户的权限存在异常，请联系管理员。","-1006":"异常退出，请确保此设备已登录。","-1007":"您使用此账户登录了过多的浏览器，请联系管理员或登出已登录的设备。","-1008":"当前设备出现了授权异常（尤其是刚付费且首次授权时），不要担心，请重启浏览器再重新授权即可。","-1009":"当前设备验证错误，请稍后再试，仍无法验证请联系管理员。","-1010":"当前设备未授权，如您是高级账户请通过恢复购买获取您的权益","-1011":"您还不是高级账户，请先购买高级账户资格"}}},{key:"endpoint",get:function(){return a.storage.service}}]),e}(),s=new i;t.auth=s},31:function(e,t,n){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s="rgba(51, 51, 51, .87)",l="rgba(204, 204, 204, 1)",c="rgba(255, 64, 129, 1)",d="rgba(238, 238, 238, 1)",p="rgba(255, 255, 255, 1)",u=function(){var e="block",t="100px",n={hidden:"none",root:{},root_normal:{position:"relative",display:"flex",alignItems:"center",margin:0,padding:0,height:"36px",width:t,lineHeight:1,cursor:"pointer",userSelect:"none"},disable:{color:l,cursor:"not-allowed"},text:{display:e,margin:0,padding:"8px 24px 8px 0",width:"100%",textAlign:"left"},icon:{display:"block",position:"absolute",width:"24px",height:"24px",top:"6px",right:0,border:"none",backgroundPosition:"center",backgroundRepeat:"no-repeat",backgroundImage:"url( data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAALEgAACxIB0t1+/AAAABx0RVh0U29mdHdhcmUAQWRvYmUgRmlyZXdvcmtzIENTNXG14zYAAABqSURBVEiJ7dQxCsAgDIXhZ8ktgmetVw31GIF06lI0yeIWJyH4f4hgMzOcXNfRegEFFAAAoGA+ROR2A0STmftu7t5ARAYRTS+uqtt4CACAqvYVkomngBWSjQPxG/yR59tnz7X6rgso4DzwAnJQKlbAmFdgAAAAAElFTkSuQmCC)"},bg:{display:"none",position:"fixed",top:0,left:0,width:"100%",height:"100%"}};return n},f=function(){var e={hidden:"none",root:{},root_normal:{display:"block",position:"absolute",top:0,left:0,margin:0,padding:0,width:"100%",maxHeight:"300px",color:s,backgroundColor:p,boxSizing:"border-box",boxShadow:"0 8px 10px 1px rgba(0,0,0,0.14), 0 3px 14px 2px rgba(0,0,0,0.12), 0 5px 5px -3px rgba(0,0,0,0.2)",borderRadius:"2px",zIndex:2100,overflowY:"auto",opacity:0,transform:"scaleY(0)",transformOrigin:"left top 0px",transition:"transform 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms, opacity 1s cubic-bezier(0.23, 1, 0.32, 1) 0ms"},open:{opacity:1,transform:"scaleY(1)"},list_filed:{display:"flex",alignItems:"center",padding:"8px 24px 8px 16px",height:"36px",width:"100%",textAlign:"left",boxSizing:"border-box",transition:"all 1s cubic-bezier(0.23, 1, 0.32, 1) 0ms"},list_filed_icon:{display:"block",width:"18px",height:"18px",margin:"0 10px 0 0",padding:"10px",border:"none",backgroundPosition:"center",backgroundRepeat:"no-repeat"},list_filed_value:{display:"inline",width:"100%",fontSize:"inherit"},list_filed_info:{display:"inline",padding:"0 0 0 16px",fontSize:"13px",textAlign:"right",minWidth:"100px"}};return e},m=function(t){function s(){var e,t,r,a;n(this,s);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return t=r=o(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(l))),r.style=f(),a=t,o(r,a)}return r(s,t),i(s,[{key:"onMouseOver",value:function(e){var t=$(e.target);t.is("list-field")&&($("list-field[active=true]").css("background-color","transparent").attr("active",!1),t.attr("active",!0).css("background-color",d))}},{key:"onClick",value:function(e){for(var t=this,n=$(e.target);!n.is("list-field");)n=n.parent();setTimeout(function(){return t.props.onChange&&t.props.onChange(n.find("list-field-name").attr("value"),n.find("list-field-name").text())},130)}},{key:"render",value:function(){var t=this,n=a({},this.style);n.root=this.props.items.length>0?a({},n.root_normal,n.open):a({},n.root_normal);var o=this.props.items.map(function(o,r){var i=a({},n.list_filed_value),s=a({},n.list_filed_icon);return o.icon&&""!=o.icon?s.backgroundImage="url("+o.icon+")":s.display=n.hidden,o.name==t.props.active&&(i.color=c),o.style&&o.style.root&&(n.list_filed=a({},n.list_filed,o.style.root)),o.style&&o.style.icon&&(s=a({},s,o.style.icon)),o.style&&o.style.text&&(i=a({},i,o.style.text)),e.createElement("list-field",{class:t.props.waves,style:n.list_filed,onMouseOver:function(e){return t.onMouseOver(e)},onClick:function(e){return t.onClick(e)}},e.createElement("i",{style:s}),e.createElement("list-field-name",{style:i,value:o.value},o.name))});return e.createElement("list-view",{style:n.root},o)}}]),s}(e.Component);m.defaultProps={waves:"",items:[],active:""},m.propTypes={waves:e.PropTypes.string,items:e.PropTypes.array,active:e.PropTypes.string,onChange:e.PropTypes.func};var g=function(t){function s(){var e,t,r,a;n(this,s);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return t=r=o(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(l))),r.state={name:r.props.name},r.style=u(),a=t,o(r,a)}return r(s,t),i(s,[{key:"onClick",value:function(){!this.props.disable&&this.props.items.length>0&&this.setState({items:this.props.items}),!this.props.disable&&this.props.items.length>0&&$(this.refs.bg).css("display","block")}},{key:"bgOnClick",value:function(){$(this.refs.bg).css("display","none"),this.setState({items:[]})}},{key:"onChange",value:function(e,t){this.props.onChange&&this.props.onChange(e,t),this.setState({items:[],name:t}),$(this.refs.bg).css("display","none")}},{key:"render",value:function(){var t=this,n=function(e){return e.sort(function(e,t){return t.name.length-e.name.length}),12*e[0].name.length},o=a({},this.style);if(o.root=this.props.disable?a({},o.root_normal,o.disable):a({},o.root_normal),this.props.disable&&(o.border=a({},o.border,o.border_disable)),this.props.width)o.root.width=this.props.width;else{var r=n(this.props.items)+40;r>=100&&(o.root.width=r+"px")}return e.createElement("dropdown",{style:o.root},e.createElement("span",{style:o.text,onClick:function(){return t.onClick()}},""==this.state.name?this.props.name:this.state.name),e.createElement("icon",{style:o.icon}),e.createElement(m,{waves:this.props.waves,active:this.state.name,items:this.state.items,onChange:function(e,n){return t.onChange(e,n)}}),e.createElement("list-bg",{ref:"bg",style:o.bg,onClick:function(){return t.bgOnClick()}}))}}]),s}(e.Component);g.defaultProps={name:"",disable:!1,width:void 0,items:[],waves:""},g.propTypes={name:e.PropTypes.string,disable:e.PropTypes.bool,width:e.PropTypes.string,items:e.PropTypes.array,waves:e.PropTypes.string,onChange:e.PropTypes.func},t.default=g}).call(t,n(2))},32:function(e,t,n){(function(e){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s="rgba(51, 51, 51, .87)",l="rgba(204, 204, 204, 1)",c="rgba(245, 245, 245, 1)",d="rgba(0, 137, 123, 1)",p="rgba(189, 189, 189, 1)",u="rgba(0, 137, 123, .5)",f=function(){var e={hidden:"none",root:{display:"flex",alignItems:"center",position:"relative",width:"100%",height:"37px",margin:"8px 0 0 0",padding:0,overflow:"visible"},large_height:"46px",enable:{color:s,cursor:"pointer"},disable:{color:l,cursor:"not-allowed"},label:{display:"block",width:"100%",fontFamily:"sans-serif",fontSize:"14px",fontWeight:400,userSelect:"none",pointerEvents:"none"},label_after:{textAlign:"right",order:2},label_before:{textAlign:"left",order:-1},range:{display:"block",position:"relative",float:"left",flexShrink:0,width:"36px",margin:"0 0 0 8px",padding:"4px 0px 6px 2px",transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},thumb:{},thumb_normal:{display:"block",position:"absolute",top:"1px",left:"0px",width:"20px",height:"20px",color:s,backgroundColor:c,boxShadow:"rgba(0, 0, 0, 0.117647) 0px 1px 6px, rgba(0, 0, 0, 0.117647) 0px 1px 4px",boxSizing:"border-box",borderRadius:"50%",transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},thumbed:{left:"100%",marginLeft:"-20px",backgroundColor:d},thumb_disable:{left:0,marginLeft:0,backgroundColor:l},track:{},track_normal:{display:"block",width:"100%",height:"14px",borderRadius:"30px",backgroundColor:p,transition:"all 450ms cubic-bezier(0.23, 1, 0.32, 1) 0ms"},tracked:{backgroundColor:u},content:{display:"flex",flexDirection:"column",alignItems:"flex-start",width:"100%"},subtitle:{display:"-webkit-box",flexShrink:2,WebkitLineClamp:1,"-webkit-box-orient":"vertical",overflow:"hidden",textOverflow:"ellipsis",textAlign:"left",color:"rgba( 51, 51, 51, .54 )"}};return e},m=function(t){function s(){var e,t,r,a;n(this,s);for(var i=arguments.length,l=Array(i),c=0;c<i;c++)l[c]=arguments[c];return t=r=o(this,(e=s.__proto__||Object.getPrototypeOf(s)).call.apply(e,[this].concat(l))),r.state={checked:r.props.checked},r.style=f(),a=t,o(r,a)}return r(s,t),i(s,[{key:"onClick",value:function(){!this.props.disable&&this.setState({checked:!this.state.checked}),!this.props.disable&&this.props.onChange&&this.props.onChange(!this.state.checked)}},{key:"componentWillReceiveProps",value:function(e){this.setState({checked:e.checked})}},{key:"render",value:function(){var t=this,n=a({},this.style);this.props.thumbColor&&(n.thumb_normal.backgroundColor=this.props.thumbColor),this.props.thumbedColor&&(n.thumbed.backgroundColor=this.props.thumbedColor),this.props.trackColor&&(n.track_normal.backgroundColor=this.props.trackColor),this.props.trackedColor&&(n.tracked.backgroundColor=this.props.trackedColor),this.state.checked?(n.thumb=a({},n.thumb_normal,n.thumbed),n.track=a({},n.track_normal,n.tracked)):(n.thumb=a({},n.thumb_normal),n.track=a({},n.track_normal)),this.props.disable?(n.root=a({},n.root,n.disable),n.thumb=a({},n.thumb,n.thumb_disable),n.track=a({},n.track_normal)):n.root=a({},n.root,n.enable),n.label="before"==this.props.order?a({},n.label,n.label_before):a({},n.label,n.label_after),""==this.props.label&&(n.label.display=n.hidden),this.props.width&&(n.root.width=this.props.width),this.props.desc&&(n.root.height=n.root.large_height);var o=this.props.tooltip;return e.createElement("switch",{style:n.root,"data-tooltip":o.text?o.text:this.props[o.target],"data-tooltip-position":o.position,"data-tooltip-delay":o.delay,onClick:function(){return t.onClick()}},e.createElement("content",{style:n.content},e.createElement("span",{style:n.label},this.props.label),e.createElement("subtitle",{style:n.subtitle},this.props.desc)),e.createElement("switch-rang",{style:n.range},e.createElement("thumb",{style:n.thumb,className:this.props.waves}),e.createElement("track",{style:n.track})))}}]),s}(e.Component);m.defaultProps={checked:!1,disable:!1,width:void 0,label:"",order:"before",thumbColor:void 0,thumbedColor:void 0,trackColor:void 0,trackedColor:void 0,desc:"",waves:"",tooltip:""},m.propTypes={checked:e.PropTypes.bool,disable:e.PropTypes.bool,width:e.PropTypes.string,label:e.PropTypes.string,order:e.PropTypes.string,thumbColor:e.PropTypes.string,thumbedColor:e.PropTypes.string,trackColor:e.PropTypes.string,trackedColor:e.PropTypes.string,desc:e.PropTypes.string,waves:e.PropTypes.string,tooltip:e.PropTypes.string,onChange:e.PropTypes.func},t.default=m}).call(t,n(2))},33:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e){var t=function(e){(new u.default).Render(o[e],"不再提示",function(){g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:e}))})},n=function(e){g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(n){n&&t(e)})},o={klGUASLasg:'检测到当前环境有代码段，请使用      <a target="blank" href="https://simpread.ksria.cn/plugins/details/klGUASLasg">代码增强插件</a> 辅助阅读',VQOZdNET2d:'检测到当前环境有大量的图片，可以使用 <a target="blank" href="https://simpread.ksria.cn/plugins/details/VQOZdNET2d">点击查看大图</a> 辅助阅读',DxlFcL52iy:'如果你想换个论坛类页面风格，可以使用 <a target="blank" href="https://simpread.ksria.cn/plugins/details/DxlFcL52iy">Materail Design 风格</a> 辅助阅读'};$("sr-read").find("pre").length>0&&e.findIndex(function(e){return"klGUASLasg"==e})==-1&&n("klGUASLasg"),$("sr-read").find("img").length>5&&e.findIndex(function(e){return"VQOZdNET2d"==e})==-1&&n("VQOZdNET2d"),"www.zhihu.com"==location.hostname&&location.pathname.startsWith("/question/")&&e.findIndex(function(e){return"DxlFcL52iy"==e})==-1&&n("DxlFcL52iy")}function i(e,t){"statistics"==e&&1==t.read?(new u.default).Render({content:"嗨，很高兴第一次使用简悦的阅读模式，建议看看新手帮助？",action:"我要看",cancel:"老司机",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:"http://ksria.com/simpread/guide/#readmode"})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"readmode"}))}}):"epub"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:'嗨，简悦内置了 <a target="blank" href="http://ksria.com/simpread/docs/#/Sync?id=epub"><b>原生了 Epub 转换方式</b></a>，请升级为高级账户即刻拥有此功能。',action:"升级",cancel:"不再提示",state:"holdon",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:g.browser.extension.getURL("options/options.html#account?mode=upgrade")})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"epub"}))}})}):"enhance_epub"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:'嗨，简悦 <b>高级账户</b> 内置了 <a target="blank" href="http://ksria.com/simpread/docs/#/Sync?id=epub"><b>原生了 Epub 转换方式</b></a>，有需要的话请前往开启此功能。',action:"开启",cancel:"不再提示",state:"holdon",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:g.browser.extension.getURL("options/options.html#connect?anchor=增强导出")})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"enhance_epub"}))}})}):"pdf"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{
code:e}),function(e){e&&(new u.default).Render({type:2,content:'嗨，简悦内置了 <a target="blank" href="http://ksria.com/simpread/docs/#/Sync?id=pdf"><b>原生了 PDF 转换方式</b></a>，升级为高级账户即刻拥有此功能。',action:"升级",cancel:"不再提示",state:"holdon",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:g.browser.extension.getURL("options/options.html#account?mode=upgrade")})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"pdf"}))}})}):"enhance_pdf"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:'嗨，简悦 <b>高级账户</b> 内置了 <a target="blank" href="http://ksria.com/simpread/docs/#/Sync?id=pdf"><b>原生了 PDF 转换方式</b></a> ，有需要的话请前往开启此功能。',action:"开启",cancel:"不再提示",state:"holdon",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:g.browser.extension.getURL("options/options.html#connect?anchor=增强导出")})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"enhance_pdf"}))}})}):"plain"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:'嗨，简悦 2.1 增加了 <a target="blank" href="http://ksria.com/simpread/docs/#/Sync?id=导出服务"><b>增强导出功能</b></a> 可保存到本地任意位置，升级为高级账户即刻拥有此功能。',action:"升级",cancel:"不再提示",state:"holdon",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:g.browser.extension.getURL("options/options.html#account?mode=upgrade")})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"plain"}))}})}):"enhance_plain"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:'嗨，简悦 <b>高级账户</b> 内置了 <a target="blank" href="http://ksria.com/simpread/docs/#/Sync?id=导出服务"><b>增强导出功能</b></a> 可保存到本地任意位置。',action:"开启",cancel:"不再提示",state:"holdon",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:g.browser.extension.getURL("options/options.html#connect?anchor=增强导出")})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"enhance_plain"}))}})}):"VQOZdNET2d_disable"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:"嗨，当选择了 <b>浮动标注栏为点击打开</b> 时下无法使用 <b>点击查看大图</b> 插件。",cancel:"不再提示",state:"holdon",callback:function(e){"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"VQOZdNET2d_disable"}))}})}):"ctrl+c"==e?g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:"嗨，在标注模式下，使用 <b>复制</b> 功能会有复制不完整的情况，建议退出标注模式（支持快捷键）后使用。",cancel:"不再提示",state:"holdon",callback:function(e){"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"ctrl+c"}))}})}):"annote_order"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e}),function(e){e&&(new u.default).Render({type:2,content:"嗨，简悦 2.2 新增了 <b>标注自动排序</b> 功能。",cancel:"不再提示",action:"更改",callback:function(e){"action"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:g.browser.extension.getURL("options/options.html#labs?anchor=标注")})),"cancel"==e&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"annote_order"}))}})})}function s(e){!h&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:"unreader"}),function(t){t&&(new u.default).Render({content:"嗨，欢迎使用 <b>全新的标注及稍后读</b> 系统，建议看看新手帮助？",action:"我要看",cancel:"老司机",callback:function(t){"action"==t&&e&&e(),g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:"unreader"})),h=!1}})}),h=!0}function l(e){var t=function(e){g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips,{code:e,type:"pre-version"}),function(t){t.version&&t.tips&&o(t.version,e)})},n={"2.1.0":{annote:'嗨，<a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html"><b>简悦 2.2.0 ↗</b></a> 标注多种更新，包括：自动排序，浮动工具栏显示方式可更改，可同时导出标注 + 全文等，更多细节 <a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html#annote"><b>请看这里</b></a>。',fap:'嗨，<a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html"><b>简悦 2.2.0 ↗</b></a> 全新的 <b>浮动控制面板</b>：布局更合理，功能更集中，更适合新手用户。</br>可随时切换到 <b>旧版模式</b>（选项页 → 高级设定 → 阅读模式 ）',unreader:'嗨，<a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html"><b>简悦 2.2.0 ↗</b></a> 稍后读大更新，包括：反向链接，知识图谱，Mindmap 查看，离线功能等，更多细节 <a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html#unreader"><b>请看这里</b></a>。',sync:'嗨，<a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html"><b>简悦 2.2.0 ↗</b></a> 同步助手更新，包括：优化扩展端读取速度，读取离线文件，修改 PDF 图片无法显示的问题，Dock 栏图标可隐藏等，更多细节 <a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html#sync"><b>请看这里</b></a>。<br>请使用同步助手的用户 <b>务必更新</b>，<a target="blank" href="http://ksria.com/simpread/docs/#/Sync?id=下载"><b>下载地址 ↗</b>。',option:"<b>全新的选项页</b>，包括：</br>1. <b>导入/导出与同步助手相关的配置文件</b> 放在一处。</br>2. 全新的 <b>服务标签页</b>。</br>3. 除了左侧导航外，还加入了 <b>右侧目录</b> 导航功能。",labs:'<b>简悦 2.2.0 </b> 新增如下功能：</br>1. <b>自动聚焦模式</b>。</br>2. <b>自动暗色模式</b>。</br>3. <b>任意内容生成阅读模式</b>。</br>4. 更易用的 <b>标注</b>，详细说明 <a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html#annote"><b>请看这里</b>。</br>5. 更易用的 <b>稍后读</b>，详细说明 <a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html#unreader"><b>请看这里</b>。</br>6. 整理了 <b>黑名单 / 白名单 / 排除列表</b> 到全局。</br>请通过右侧目录跳转到相应功能。',connect:'全新的 <b>服务标签页</b>，管理简悦全部的导出服务，包括：<b>授权管理</b> · <b>同步助手的增强导出功能 / 发送邮件</b> · <b>定制化 Markdown</b> · <b>API</b> <b>Webhook</b> 等，关于这些功能 <a target="blank" href="http://ksria.com/simpread/docs/#/服务"><b>请看这里 ↗</b></a>。',account:'嗨，<a target="blank" href="https://simpread.pro/welcome/version_2.2.0.html"><b>简悦 2.2.0 ↗</b></a> 用户信息增加了 <b>修改功能</b>，适合 <a target="blank" href="https://github.com/Kenshin/simpread/discussions/1958"><b>找回 UID 后快速绑定 ↗</b></a>。</br>简悦增加了 <b>Newsletter</b>，包括：不定期会推送简悦的用法，版本更新等相关信息，请通过 <b>右侧目录订阅</b>。关于简悦更多的订阅渠道 <a target="blank" href="https://simpread.pro/subscribe"><b>请看这里 ↗</b></a>。'}},o=function(e,t){(new u.default).Render({type:1,content:n[e][t],action:"不再提示",state:"holdon",callback:function(n){"action"==n&&g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.tips_norepeat,{code:e+"::"+t}))}})};t(e)}function c(e,t){var n=JSON.parse(localStorage["simpread-tips"]||"{}");t(!n[e])}function d(e){var t=JSON.parse(localStorage["simpread-tips"]||"{}");t[e]=!0,localStorage.setItem("simpread-tips",JSON.stringify(t))}Object.defineProperty(t,"__esModule",{value:!0}),t.Annotate=t.Update=t.Help=t.Done=t.Verify=t.Render=void 0;var p=n(7),u=r(p),f=n(6),m=o(f),g=n(3),h=!1;t.Render=a,t.Verify=c,t.Done=d,t.Help=i,t.Update=l,t.Annotate=s},36:function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(t,n,o){b.Popup(E)||t?b.Open(e.createElement(A,{onAction:function(e){return o(e)}}),k):b.Open(e.createElement(C,{token:n,onAction:function(e){return o(e)}}),k),$(".simpread-upgrade-root").on("click",function(e){e.target.className==k&&o("exit"),e.target.className==k&&b.Close()}),w.Render({root:".simpread-upgrade-root"})}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(71),n(66),n(115);var d=n(9),p=r(d),u=n(3),f=n(6),m=r(f),g=n(4),h=n(30),b=r(h),v=n(10),x=o(v),y=n(17),w=r(y),k="simpread-upgrade-root",E="."+k,A=function(t){function n(){return a(this,n),i(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return s(n,t),c(n,[{key:"close",value:function(){$(".simpread-upgrade-root ").removeClass("open"),setTimeout(function(){return b.Close()},400)}},{key:"carousel",value:function(){$(".carousel.carousel-slider").carousel({fullWidth:!0}),setInterval(function(){return $(".carousel.carousel-slider").carousel("next")},5e3)}},{key:"onNavigateClick",value:function(e){$(".carousel.carousel-slider").carousel(e)}},{key:"onUnlockClick",value:function(){u.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:u.browser.extension.getURL("options/options.html#account?mode=upgrade")}))}},{key:"componentDidMount",value:function(){$(".simpread-upgrade-root ").addClass("mini"),setTimeout(function(){$(".simpread-upgrade-root ").addClass("open"),$(".simpread-upgrade-root .floating .billing").addClass("open")},400),this.carousel()}},{key:"render",value:function(){var t=this,n=location.href.startsWith("https")?"https://simpread-1254315611.file.myqcloud.com/static/welcome/":"http://sr.ksria.cn/";return e.createElement(b.Dialog,null,e.createElement(b.Content,null,e.createElement("sr-div",{class:"close"},e.createElement(x.default,{shape:"circle",width:"36px",color:"#fff",backgroundColor:"transparent",icon:p.IconPath("close_icon"),onClick:function(){return t.close()}})),e.createElement("sr-div",{class:"upgrade"},e.createElement("sr-div",{class:"carousels"},e.createElement("div",{className:"carousel carousel-slider","data-indicators":"true"},e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:p.IconPath("welcome-2","webp")}),e.createElement("sr-div",{class:"descr"},"简悦 · 高级账户"))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:n+"welcome-annoate-pro.webp"}),e.createElement("sr-div",{class:"descr"},"多种标注样式 · 标注拖拽排序"))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:n+"welcome-unreader-backlinks.webp"}),e.createElement("sr-div",{class:"descr"},"稍后读 · 知识图谱"))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:n+"welcome-automated.webp"}),e.createElement("sr-div",{class:"descr"},"自动化"))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:n+"welcome-developer.webp"}),e.createElement("sr-div",{class:"descr"},"API & Webhooks"))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:n+"welcome-synchelper.webp"}),e.createElement("sr-div",{class:"descr"},"同步助手"))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:n+"welcome-synchronisation.webp"}),e.createElement("sr-div",{class:"descr"},"自动同步")))))),e.createElement("sr-div",{class:"floating"},e.createElement("sr-span",{class:"billing md-waves-effect",onClick:function(){return t.onUnlockClick()}},e.createElement("sr-span",null,"马上解锁您的权益"))),e.createElement("footer",null,e.createElement(x.default,{shape:"circle",width:"40px",color:"#fff",backgroundColor:"#4CAF50",icon:p.IconPath("prev_icon"),waves:"md-waves-effect md-waves-button",onClick:function(){return t.onNavigateClick("prev")}}),e.createElement(x.default,{shape:"circle",width:"40px",color:"#fff",backgroundColor:"#4CAF50",icon:p.IconPath("next_icon"),waves:"md-waves-effect md-waves-button",onClick:function(){return t.onNavigateClick("next")}}))))}}]),n}(e.Component),C=function(t){function n(){var e,t,o,r;a(this,n);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return t=o=i(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),o.state={base:void 0,pro:void 0,stores:void 0,price:void 0,sales:void 0,floating:void 0},r=t,i(o,r)}return s(n,t),c(n,[{key:"close",value:function(){$(".simpread-upgrade-root ").removeClass("open"),setTimeout(function(){return b.Close()},400)}},{key:"carousel",value:function(){$(".carousel.carousel-slider").carousel({fullWidth:!0}),setInterval(function(){return $(".carousel.carousel-slider").carousel("next")},1e4)}},{key:"onBillingClick",value:function(){$(".pro .pricecard")[0].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})}},{key:"parseFloating",value:function(t){var n=this;return!this.props.token&&e.createElement("div",{className:"floating"},e.createElement("span",{className:"billing md-waves-effect",onClick:function(){return n.onBillingClick()}},e.createElement("span",null,"马上升级"),e.createElement("span",{className:"sales"},e.createElement("span",{className:"rate"},"立省 "+(100-100*t.discountRate)+"%"),e.createElement("del",null,"¥ "+t.price),e.createElement("span",{className:"price"},"¥ "+parseInt(t.price*t.discountRate)))))}},{key:"parseSales",value:function(t){return e.createElement("span",{className:"discountrate"},e.createElement("span",{className:"rate"},"立省 "+(100-100*t)+"%"))}},{key:"parsePrice",value:function(t){return e.createElement("span",{className:"sales"},e.createElement("span",{className:"desc"},e.createElement("del",null,"¥ "+t.price)),e.createElement("span",{className:"price"},"¥ "+parseInt(t.price*t.discountRate)),e.createElement("span",{className:"countdown"},e.createElement("span",{className:"message"},t.countDown)))}},{key:"parseStore",value:function(t){return e.createElement("div",{className:"dropdown-price"},t.map(function(t){var n=t.tips&&e.createElement("span",{className:"tips"},t.tips);return e.createElement("a",{className:"store md-waves-effect",href:t.link,target:"_blank"},e.createElement("img",{className:"icon",src:t.icon}),e.createElement("span",{className:"names"},e.createElement("span",{className:"name"},t.site),e.createElement("span",{className:"des"},t.desc)),e.createElement("span",{className:"num"},t.price+" 起"," ",n),e.createElement("i",{className:"fas fa-sort-down"}))}))}},{key:"parseFeature",value:function(t){return e.createElement("div",{className:"features diff"},t.map(function(t){var n=t.items&&t.items.map(function(t){if(""==t)return e.createElement("div",{className:"feature empty"});var n=t.endsWith("::feature")?e.createElement("span",{className:"remark"},"即刻推出"):t.endsWith("::roadmap")?e.createElement("span",{className:"remark roadmap"},"马上到来"):void 0;return t=t.replace(/::\w+/gi,""),e.createElement("div",{className:"feature sub"},e.createElement("span",{className:"icon"}),e.createElement("span",{className:"label"},t,n))});return e.createElement("div",null,e.createElement("div",{className:"feature"},e.createElement("span",{className:"icon"},e.createElement("i",{className:"fas fa-"+t.icon})),e.createElement("span",{className:"label"},e.createElement("a",{className:t.link&&"active",href:t.link?t.link:"#",target:"_blank"},t.name))),n)}))}},{key:"getSales",value:function(){var e=this;$.ajax({url:this.props.endpoint+"/sales/service/get/",method:"POST"}).done(function(t,n,o){if(t&&201==t.code){$(".upgrade .features").removeClass("init").find(".loading").remove();var r=e.parseFeature(t.data.base),a=e.parseFeature(t.data.pro),i=e.parseStore(t.data.stores),s=e.parsePrice(t.data),l=e.parseSales(t.data.discountRate),c=e.parseFloating(t.data);e.setState({base:r,pro:a,stores:i,price:s,sales:l,floating:c})}else $(".upgrade .features").removeClass("init").addClass("error").html("<img src="+(location.origin+"/unreader/assets/images/404.svg")+"/>价格获取出现了些问题，稍后再试。")}).fail(function(e){})}},{key:"componentDidMount",value:function(){setTimeout(function(){return $(".simpread-upgrade-root ").addClass("open")},400),!this.props.token&&$(".simpread-upgrade-root dialog-content").on("scroll",function(){event.target.scrollTop>470?$(".simpread-upgrade-root .floating .billing").addClass("open"):$(".simpread-upgrade-root .floating .billing").removeClass("open")}),this.carousel(),this.getSales()}},{key:"render",value:function(){var t=this;return e.createElement(b.Dialog,null,e.createElement(b.Content,null,e.createElement("div",{className:"close"},e.createElement(x.default,{shape:"circle",width:"36px",color:"#fff",backgroundColor:"transparent",icon:p.IconPath("close_icon"),onClick:function(){return t.close()}})),e.createElement("div",{className:"upgrade"},e.createElement("div",{className:"head"},e.createElement("img",{src:u.browser.runtime.getURL("assets/images/icon128.png")}),e.createElement("span",{className:"title"},"简悦 · 高级账户"),!this.props.token&&e.createElement("span",{className:"desc"},"感谢简悦一路有你，从现在开始你可以升级到 ",e.createElement("b",null,"高级账户"),"，来支持我们的开发，以便获得更多的权益与功能。")),e.createElement("div",{className:"carousels"},e.createElement("div",{className:"carousel carousel-slider","data-indicators":"true"},e.createElement("div",{className:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:p.IconPath("welcome-2","webp")}),e.createElement("div",{className:"descr"},"简悦 · 高级账户"))),e.createElement("div",{className:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:"http://sr.ksria.cn/welcome-annoate-pro.webp"}),e.createElement("div",{className:"descr"},"多种标注样式 · 标注拖拽排序"))),e.createElement("div",{className:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:"http://sr.ksria.cn/welcome-unreader-collection.webp"}),e.createElement("div",{className:"descr"},"稍后读 · 合辑"))),e.createElement("div",{className:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:"http://sr.ksria.cn/welcome-unreader-share.webp"}),e.createElement("div",{className:"descr"},"稍后读 · 分享页"))))),e.createElement("div",{className:"features init"},e.createElement("div",{className:"loading"},e.createElement("span",{dangerouslySetInnerHTML:{__html:this.props.loading}})),e.createElement("div",{className:"base","data-enable":void 0==this.props.token?"true":"false"},e.createElement("div",{className:"pricecard"},e.createElement("span",{className:"discountrate"}),e.createElement("span",{className:"mode"},"基础账户"),e.createElement("span",{className:"sales"},e.createElement("span",{className:"desc"},"¥ 0")),e.createElement("span",{className:"billing md-waves-effect"},"正在使用")),this.state.base),e.createElement("div",{className:"pro","data-enable":void 0!=this.props.token?"true":"false"},e.createElement("div",{className:"pricecard"},this.state.sales,e.createElement("span",{className:"mode"},"高级账户"),this.state.price,e.createElement("span",{className:"billing"},e.createElement("span",null,void 0!=this.props.token?"当前使用":"马上升级"),e.createElement("i",{className:"fas fa-sort-down"}),this.state.stores)),this.state.pro)),e.createElement("div",{className:"ticket"},e.createElement("span",{className:"line"}),e.createElement("div",{className:"notice"},"回报计划"),e.createElement("span",{className:"message"},"简悦从 1.0.3 版开始增加了捐助的入口，感谢每一位请我 ☕ 的朋友，在这里为每个捐助我的用户提供一个福利："),e.createElement("ul",{className:"content"},e.createElement("li",null,"只要你的捐助价格超过（含） 8 元，即可通过此 ",e.createElement("a",{href:"https://wj.qq.com/s2/6773645/5a87/",target:"_blank"},"联系方式")," 获得简悦的终身高级账户。"),e.createElement("li",null,"不满足上述条件且也请过 ☕ 的朋友，可以 ",e.createElement("a",{href:"https://wj.qq.com/s2/6773707/ddf0/",target:"_blank"},"以当前价格 50% 折扣")," 获得终身高级账户。"),e.createElement("li",null,"捐助功能将在简悦 2.0 版发布后下线，请勿再使用捐助方式。"))),e.createElement("div",{className:"ticket"},e.createElement("span",{className:"line"}),e.createElement("div",{className:"notice"},"用户权益"),e.createElement("ul",{className:"content"},e.createElement("li",null,"目前采用买断制，一次性付费后，即可获得简悦终身高级账户一枚。"),e.createElement("li",null,"可登录简悦的不同客户端，不限于扩展端，Web 端等。"),e.createElement("li",null,"可使用最多三台设备，同一账户不能在同一时间同时登录不同设备。"),e.createElement("li",null,"同一账户在同一时间同时登录不同设备的方式视为：非法登录，会锁定当前账户。 "))),e.createElement("div",{className:"ticket"},e.createElement("span",{className:"line"}),e.createElement("div",{className:"notice"},"购买须知"),e.createElement("ul",{className:"content"},e.createElement("li",null,"购买的兑换码只能兑换一次，兑换后即失效。同时兑换时对应的账户（即账户标识），则升级为高级账户，切勿丢失。"),e.createElement("li",null,"简悦从 2.0 版本开始增加了高级账户，但 1.0 版本的功能均永久免费使用。"),e.createElement("li",null,"我知道订阅制模式是维持独立开发者的最好办法，但我们认为不是什么产品都可以使用订阅制模式。"),e.createElement("li",null,"我希望我的产品依旧是简单的一次性付费制。"),e.createElement("li",null,"对于用户来说是一次性付费，但我们需要每年固定为服务器 / 域名等缴费。"),e.createElement("li",null,"为了让简悦持续的良性发展下去以及不想使用订阅制的前提，我们制定了一些不一样的定价规则（请看下方）。"))),e.createElement("div",{className:"ticket"},e.createElement("span",{className:"line"}),e.createElement("div",{className:"notice"},"已购必读"),e.createElement("ul",{className:"content"},e.createElement("li",null,"希望每个购买高级账户的朋友，请前往 ",e.createElement("a",{href:"http://ksria.com/simpread/docs/#/已购必读",target:"_blank"},"已购必读")," 仔细阅读。"),e.createElement("li",null,"购买后，可前往 ",e.createElement("a",{href:"http://ksria.com/simpread/docs/#/高级账户?id=如何绑定",target:"_blank"},"说明文档")," 获取绑定说明。"),e.createElement("li",null,"如果在绑定中出现无法绑定的情况，可前往 ",e.createElement("a",{href:"https://github.com/Kenshin/simpread/issues/908",target:"_blank"},"常见问题")," 查看。"),e.createElement("li",null,"授权当前设备后如何同步，请前往 ",e.createElement("a",{href:"https://github.com/Kenshin/simpread/issues/908",target:"_blank"},"#3/4")," 查看。"),e.createElement("li",null,"如果绑定后丢失 UID（配置文件），可前往 ",e.createElement("a",{href:"https://simpread.pro/code",target:"_blank"},"高级账户自助平台")," 找回。"),e.createElement("li",null,"通过腾讯问卷渠道购买的用户，可前往 ",e.createElement("a",{href:"https://simpread.pro/code",target:"_blank"},"兑换码申领平台")," 自助获取 License。"),e.createElement("li",null,"如果经常遇到 -1003 错误的话，可通过 ",e.createElement("a",{href:"http://ksria.com/simpread/docs/#/已购必读?id=同时开启多台设备被锁的解决办法",target:"_blank"},"此方式")," 解决。"))),e.createElement("div",{className:"ticket"},e.createElement("span",{className:"line"}),e.createElement("div",{className:"notice"},"定价规则"),e.createElement("ul",{className:"content"},e.createElement("li",null,"为了保障已购用户的权益，我们不会对简悦随意降价打折促销。"),e.createElement("li",null,"简悦的初始定价较低，但随着功能的增加，我们会增加它的定价，涨幅不定。"),e.createElement("li",null,"简悦的价格逐步恢复到原价后不再随意打折。"),e.createElement("li",null,"每年不超过 3次 的打折促销。"),e.createElement("li",null,"我们会不定期的进行微博等社交媒体的抽奖活动。"),e.createElement("li",null,"通过上述方式，希望给用户传达一个信息：",e.createElement("b",null,"无论什么时候，当前都是购买的最佳时期。")))),e.createElement("div",{className:"ticket"},e.createElement("span",{className:"line"}),e.createElement("div",{className:"last"},e.createElement("a",{href:"https://simpread.pro/privacy.html",target:"_blank"},"隐私策略"),e.createElement("a",{href:"https://simpread.pro/agreement.html",target:"_blank"},"用户条款"))))),this.state.floating)}}]),n}(e.Component);C.defaultProps={loading:'<svg version="1.1" id="L9" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" viewBox="0 0 100 100" enable-background="new 0 0 0 0" xml:space="preserve">\n                    <path fill="#333" d="M73,50c0-12.7-10.3-23-23-23S27,37.3,27,50 M30.9,50c0-10.5,8.5-19.1,19.1-19.1S69.1,39.5,69.1,50" transform="rotate(56.1481 50 50)">\n                        <animateTransform attributeName="transform" attributeType="XML" type="rotate" dur="1s" from="0 50 50" to="360 50 50" repeatCount="indefinite"></animateTransform>\n                    </path>\n                  </svg>',endpoint:g.storage.service},t.Render=l}).call(t,n(2))},37:function(e,t){"use strict";function n(){var e=void 0,t=$.Deferred(),n=function(t){e?(e.removeClass(i),$(t.target).addClass(i)):$(t.target).addClass(i),e=$(t.target)};return $("html").one("click",function(o){if(e)return $(o.target).removeClass(i),$("html").off("mousemove",n),e=void 0,t.resolve(o.target),!1}),$("html").one("keydown",function(t){if(27==t.keyCode&&e)return $("html").find("."+i).removeClass(i),$("html").off("mousemove",n),e=void 0,t.preventDefault(),!1}),$("html").on("mousemove",n),t}function o(e){var t=void 0,n=function(e){t?(t.removeClass(i),$(e.target).addClass(i)):$(e.target).addClass(i),t=$(e.target)},o=function(t){return e(t.target),!1};$("sr-rd-content").on("click",o),$("html").on("keydown",function(e){if(27==e.keyCode&&t)return $("sr-rd-content").find("."+i).removeClass(i),$("sr-rd-content").off("mousemove",n),$("sr-rd-content").off("click",o),t=void 0,e.preventDefault(),!1}),$("sr-rd-content").on("mousemove",n)}function r(){var e=$.Deferred();return $("html").one("mouseup",function(t){var n=void 0;window.getSelection?n=window.getSelection():document.selection&&(n=document.selection.createRange());var o=n;n.text&&(o=n.text),""!=o&&(o=""+o,window.getSelection().removeAllRanges(),e.resolve(o))}),e}function a(e){var t=$(e),n=$.Deferred(),o='<simpread-highlight>\n                        <sr-highlight-ctl class="add"><svg t="1560496884701" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M876.089 439.182h-291.271v-291.271c0-40.268-32.549-72.818-72.818-72.818s-72.818 32.549-72.818 72.818v291.271h-291.271c-40.268 0-72.818 32.549-72.818 72.818s32.549 72.818 72.818 72.818h291.271v291.271c0 40.268 32.549 72.818 72.818 72.818s72.818-32.549 72.818-72.818v-291.271h291.271c40.268 0 72.818-32.549 72.818-72.818s-32.549-72.818-72.818-72.818z" p-id="1998" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="sub"><svg t="1560496679351" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M127.289058 490.154459l0 43.770899c0 32.338522 27.009144 57.108672 58.774615 58.734706 0 0 132.448568 13.021571 325.936327 13.021571s325.936327-13.021571 325.936327-13.021571c31.765471-1.626034 58.774615-26.396183 58.774615-58.734706l0-43.770899c0-32.338522-26.51591-57.068763-58.774615-58.734706 0 0-128.005372-12.005428-325.942467-12.005428s-325.930187 12.005428-325.930187 12.005428C153.804968 433.085696 127.289058 457.815937 127.289058 490.154459z" p-id="3204" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="done"><svg t="1560496955945" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M416.832 798.08C400.64 798.08 384.512 791.872 372.16 779.52L119.424 525.76C94.784 500.992 94.784 460.8 119.424 436.032 144.128 411.264 184.128 411.264 208.768 436.032L416.832 644.928 814.4 245.76C839.04 220.928 879.04 220.928 903.744 245.76 928.384 270.528 928.384 310.656 903.744 335.424L461.504 779.52C449.152 791.872 432.96 798.08 416.832 798.08Z" p-id="1755" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="none"><svg t="1560499513561" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M649.179 512l212.839-212.84c37.881-37.881 37.881-99.298 0-137.179s-99.298-37.881-137.179 0L512 374.821l-212.839-212.84c-37.881-37.881-99.298-37.881-137.179 0s-37.881 99.298 0 137.179L374.821 512 161.982 724.84c-37.881 37.881-37.881 99.297 0 137.179 18.94 18.94 43.765 28.41 68.589 28.41 24.825 0 49.649-9.47 68.589-28.41L512 649.179l212.839 212.84c18.94 18.94 43.765 28.41 68.589 28.41s49.649-9.47 68.59-28.41c37.881-37.882 37.881-99.298 0-137.179L649.179 512z" p-id="1990" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                        <sr-highlight-ctl class="help"><svg t="1560573280563" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M512 958.326255c247.255337 0 447.696462-200.441125 447.696462-447.696462s-200.441125-447.696462-447.696462-447.696462-447.696462 200.441125-447.696462 447.696462S264.74364 958.326255 512 958.326255zM512 217.681788c35.32146 0 63.956637 28.635177 63.956637 63.956637 0 35.323507-28.635177 63.956637-63.956637 63.956637s-63.956637-28.633131-63.956637-63.956637C448.043363 246.316965 476.67854 217.681788 512 217.681788zM448.043363 510.629793c0-35.32146 28.635177-63.956637 63.956637-63.956637s63.956637 28.635177 63.956637 63.956637l0 223.848231c0 35.323507-28.635177 63.956637-63.956637 63.956637s-63.956637-28.633131-63.956637-63.956637L448.043363 510.629793z" p-id="1979" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                  </simpread-highlight>';return t.addClass("simpread-highlight-controlbar"),$("html").append(o),$("html").find("sr-highlight-ctl").on("click",function(e){var o=$(e.currentTarget).attr("class");if("add"==o)t.removeClass("simpread-highlight-controlbar"),t=t.parent(),t.addClass("simpread-highlight-controlbar");else if("sub"==o)t.removeClass("simpread-highlight-controlbar"),t=$(t.children()[0]),t.addClass("simpread-highlight-controlbar");else if("none"==o)t.removeClass("simpread-highlight-controlbar"),$("simpread-highlight").remove();else if("help"==o){var r=$('<a style="display:none" target="_blank" href="http://ksria.com/simpread/docs/#/手动框选"></a>').appendTo("body");r[0].click(),r.remove()}else t.removeClass("simpread-highlight-controlbar"),$("simpread-highlight").remove(),n.resolve(t[0])}),n}Object.defineProperty(t,"__esModule",{value:!0});var i="simpread-highlight-selector";t.Start=n,t.Multi=o,t.Annotate=r,t.Control=a},41:function(e,t,n){(function(e){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){return e&&e.__esModule?e:{default:e}}function a(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function i(e){_=e}function s(e){switch(e){case".":p();break;case",":g()}}function l(e){var t=$.Callbacks();t.add(e),y.default.bind("esc",function(e,n){v()?t.fire(n):b()?h():m()?f():"keyboard"==S?y.default.trigger(T):t.fire(n)})}function c(e){M.add(e);var t=new Map;Object.values(C.keyboard).forEach(function(e){Object.values(e).forEach(function(e){var n=e.kbd[0]+" "+e.kbd[1],o=function(o,r){var a=e.type.replace("_","");t.delete(n),t.set(n+" "+(r+1),e.type+C.shortcuts[a].name[r])};switch(t.set(n,e.type),e.type){case"fontfamily_":Array(5).fill(1).forEach(o);break;case"fontsize_":case"layout_":Array(3).fill(1).forEach(o);break;case"theme_next":t.delete(n),t.set(n+" right",e.type);break;case"theme_prev":t.delete(n),t.set(n+" left",e.type)}})}),y.default.bind([].concat(a(t.keys())),function(e,n){"keyboard"==S&&M.fire(t.get(n))})}function d(e,t){e.includes("-")||y.default.bind(e,t)}function p(){return m()?void f():(_.find("a").map(function(e,t){var n=z(e+"");$(t).addClass("sr-kbd-a").append("<sr-kbd id="+n+">"+n+"</sr-kbd>"),O.push(n.toLowerCase())}),void(O.length>0&&$("html").on("keypress",u)))}function u(t){var n=t.key.toUpperCase(),o=O.join("").match(new RegExp(n,"ig"));if("."!=n)if(o)if(1==o.length){var r=_.find("sr-kbd[id="+n+"]");if(r&&r.is("sr-kbd")){var a=r.parent()[0].href;a&&a.startsWith("http")&&w.browser.runtime.sendMessage(E.Add(E.MESSAGE_ACTION.new_tab,{url:a})),a&&a.startsWith("http")&&f()}}else!function(){(new e).Render("已缩小查询范围。"),O=[];var t=0;_.find("sr-kbd").map(function(e,o){if(o.id.includes(n)){var r=z(t+"");o.outerHTML="<sr-kbd id="+r+">"+r+"</sr-kbd>",O.push(r.toLowerCase()),t++}else $(o).remove()})}();else(new e).Render("当前已进入链接模式，如需其它操作，请使用 ESC 退出此模式。")}function f(){$("sr-kbd").remove(),_.find("a").removeClass("sr-kbd-a"),$("html").off("keypress",u),O=[]}function m(){return!!(_&&_.find($("sr-kbd")).length>0)}function g(){var e="";Object.keys(C.keyboard).forEach(function(t){var n="";Object.keys(C.keyboard[t]).forEach(function(e,o){var r=C.keyboard[t][e];n+='<kbd-map><kbd-name><kbd id="'+r.type+'">'+r.kbd+"</kbd></kbd-name><kbd-desc>"+r.desc+"</kbd-desc></kbd-map>"}),e+="<kbd-maps-group><kbd-maps-title>"+t+"</kbd-maps-title>"+n+"</kbd-maps-group>"});var t="\n    <kbd-mapping>\n        <kbd-map-title>快捷键一览</kbd-map-title>\n        <kbd-maps>\n            <kbd-maps-group>\n                <kbd-maps-title>全局</kbd-maps-title>\n                <kbd-map><kbd-name><kbd>esc</kbd></kbd-name><kbd-desc>退出当前模式</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>←</kbd></kbd-name><kbd-desc>前一页</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>→</kbd></kbd-name><kbd-desc>后一页</kbd-desc></kbd-map>\n            </kbd-maps-group>\n            <kbd-maps-group>\n                <kbd-maps-title>阅读模式</kbd-maps-title>\n                <kbd-map><kbd-name><kbd>sr</kbd></kbd-name><kbd-desc>快捷键开启/关闭条件</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>,</kbd></kbd-name><kbd-desc>打开/关闭快捷键一览</kbd-desc></kbd-map>\n                <kbd-map><kbd-name><kbd>.</kbd></kbd-name><kbd-desc>打开当前页面的任意链接</kbd-desc></kbd-map>\n            </kbd-maps-group>\n            "+e+"\n        </kbd-maps>\n    </kbd-mapping>\n    ";
b()?h():_.parent().append("<kbd-bg>"+t+"</kbd-bg>")}function h(){_.parent().find("kbd-bg").remove()}function b(){return $("kbd-bg").length>0}function v(){return $(".simpread-annote-popup-root").length>0}Object.defineProperty(t,"__esModule",{value:!0}),t.Bind=t.Listen=t.ListenESC=t.Render=void 0;var x=n(116),y=r(x),w=n(3),k=n(6),E=o(k),A=n(27),C=o(A),_=void 0,S="",M=$.Callbacks(),T="s r",N=[".",","];N.map(function(e){return T+" "+e}),y.default.bind(T,function(){0!=$("html").find(".simpread-read-root").length&&(""==S?(S="keyboard",(new e).Render({content:"已进入快捷键操作模式，请使用 sr 或点击右侧退出，帮助请按,",mode:"snackbar",action:"退出",callback:function(){y.default.trigger("s r")}})):(S="",(new e).Render({content:"已退出快捷键操作模式！",mode:"snackbar"}),$("notify").map(function(e,t){var n=$(t);n.find("notify-content").text().trim().startsWith("已进入快捷键操作模式")&&n.remove()})))}),y.default.bind(N,function(e,t){"keyboard"==S&&s(t)});var O=[],I=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],z=function(e){switch(!0){case e<26:return I[e];case e>=26&&e<=99:return I[e[0]]+I[e[1]];case e>99:return I[e[0]]+I[e[1]]+I[e[2]]}};t.Render=i,t.ListenESC=l,t.Listen=c,t.Bind=d}).call(t,n(7))},48:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,"notify-gp{font:300 14px -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased;display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;-webkit-box-align:end;-ms-flex-align:end;align-items:flex-end;position:fixed;top:0;right:0;margin:0 15px 0 0;padding:0;text-transform:none;pointer-events:none}notify-gp notify{display:-webkit-flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0;margin-top:15px;padding:14px 24px;min-width:288px;max-width:568px;min-height:48px;color:hsla(0,0%,100%,.9);background-color:#000;box-sizing:border-box;border-radius:4px;pointer-events:auto;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:left top 0;transform-origin:left top 0;-webkit-transition:all .45s cubic-bezier(.23,1,.32,1) 0ms,opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:all .45s cubic-bezier(.23,1,.32,1) 0ms,opacity 1s cubic-bezier(.23,1,.32,1) 0ms;box-shadow:0 3px 5px -1px rgba(0,0,0,.2),0 6px 10px 0 rgba(0,0,0,.14),0 1px 18px 0 rgba(0,0,0,.12)}notify-gp notify-title{font-size:13px;font-weight:700}notify-gp notify-content{display:block;font-size:14px;font-weight:400;text-align:left;overflow:hidden}notify-gp notify-content a,notify-gp notify-content a:active,notify-gp notify-content a:link,notify-gp notify-content a:visited{margin:inherit;padding-bottom:5px;color:#fff;font-size:inherit;text-decoration:none;-webkit-transition:color .5s;transition:color .5s}notify-gp notify-content a:hover{margin:0;margin:initial;padding:0;padding:initial;color:inherit;font-size:inherit;text-decoration:none}notify-gp notify-i{display:none;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 10px 0 0;width:24px;height:24px;background-position:50%;background-repeat:no-repeat}notify-gp notify-action,notify-gp notify-cancel{display:none;margin:0 8px;max-width:80px;min-width:56px;height:36px;line-height:34px;color:#bb86fc;font-weight:500;font-size:inherit;text-transform:uppercase;text-align:center;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;-webkit-transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;cursor:pointer}notify-gp .notify-error notify-action,notify-gp .notify-error notify-cancel,notify-gp .notify-success notify-action,notify-gp .notify-success notify-cancel,notify-gp .notify-warning notify-action,notify-gp .notify-warning notify-cancel{color:#fff}notify-gp notify-action:active,notify-gp notify-cancel:active{border-radius:4px;background-color:rgba(98,0,238,.3)}notify-gp notify-cancel{margin:0}notify-gp notify-a{display:block;position:absolute;top:5px;right:5px;cursor:pointer}notify-gp notify-exit{display:none;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-left:5px;width:36px;height:36px;min-width:36px;min-height:36px;background-color:transparent;border-radius:50%;-webkit-transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;cursor:pointer}notify-gp notify-exit:hover{background-color:hsla(0,0%,100%,.4)}notify-gp notify-exit:active{background-color:hsla(0,0%,100%,.2)}notify-gp notify-a notify-span{display:block;width:16px;height:16px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABDklEQVQ4T6VT0VFCQQzcrQA7ECoRK1AqEDugA6ECsQPsADvgVSAlaAlWEGdvkjchczI45Osud9nc7m2IEmY2BfAEYA5A6xsARwAHAB8ktR6DeWNmKwAvXlSxY78i+RabEcDM9gAe/qoq+T3JhXINwDu/Xlgc1zYk13TOn+XZA4C7AvgN4LbkZgJYO+84O5C8N7Odi6n8O8llh+ZGAD3uO5LPDgIvzoDRbBDAV+dputBAXKNecQM5B9CefQlAj0JwVmdLdGSwHI1CFXEgOS8ihia1WRNRdpU9JwlatpWVc0gr3c0xu95IAfdPK2uoHkcrJxANkzTJdPKTf3ROchvJk2n0LxNPfV9vnDVEJ+P8C6jMhLeGEqMKAAAAAElFTkSuQmCC);opacity:.9}notify-gp notify-i.holdon{display:block;margin:0 0 0 24px;width:20px;height:20px;background-image:url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAQAAAAngNWGAAAATUlEQVR4AWMYSuB/4P+V/1lRRFiBIoEYCoGC//+vAypFKFsHFFkJV4AsAVGKzsOjFFUZHqUElCGUwpRRrpCw1YQ9Qzh4SA5wwlE4hAAAiFGQefYhNJkAAAAASUVORK5CYII=);cursor:pointer}notify-gp .notify-show{opacity:1;-webkit-transform:scaleY(1)!important;transform:scaleY(1)!important}notify-gp .notify-hide{-webkit-animation-name:fadeOutUp;animation-name:fadeOutUp;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}notify-gp .notify-success{background-color:#4caf50}notify-gp .notify-warning{background-color:#ffa000}notify-gp .notify-error{background-color:#ef5350}notify-gp .notify-info{background-color:#1976d2}notify-gp .notify-modal{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;height:auto;max-height:200px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2)}notify-gp .notify-modal .notify-modal-content{margin-top:5px;font-size:13px;white-space:normal}notify-gp .notify-modal .notify-modal-content a{margin:0;padding:0;color:inherit;font-size:inherit;text-decoration:underline;cursor:pointer}notify-gp .notify-modal .notify-modal-content a:active,notify-gp .notify-modal .notify-modal-content a:focus,notify-gp .notify-modal .notify-modal-content a:hover,notify-gp .notify-modal .notify-modal-content a:visited{color:inherit}notify-gp .notify-snackbar{position:fixed;bottom:0;left:50%;margin-bottom:5px;-webkit-transform-origin:left bottom 0;transform-origin:left bottom 0}.notify-position-lt-corner{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;margin:0 0 0 15px;left:0;right:auto}.notify-position-lb-corner{margin:0 0 15px 15px;right:auto;left:0}.notify-position-lb-corner,.notify-position-rb-corner{-webkit-box-orient:vertical;-webkit-box-direction:reverse;-ms-flex-flow:column-reverse wrap-reverse;flex-flow:column-reverse wrap-reverse;top:auto;bottom:0}.notify-position-rb-corner{-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;margin:0 15px 15px 0;left:auto;right:0}@-webkit-keyframes fadeOutUp{0%{opacity:1}to{margin-top:0;padding:0;height:0;min-height:0;opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0)}}@keyframes fadeOutUp{0%{opacity:1}to{margin-top:0;padding:0;height:0;min-height:0;opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0)}}@media (pointer:coarse){notify-gp{top:auto;bottom:0;left:0;margin:0 10px 10px}notify-gp notify{width:100%;max-width:600px}notify-gp .notify-hide,notify-gp .notify-show{-webkit-transform-origin:bottom!important;transform-origin:bottom!important}notify-gp .notify-snackbar{position:static}}",""])},50:function(e,t,n){var o=n(48);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},51:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){I=e}function i(e){T=e}function s(e,t){var n=JSON.stringify(t.root),o=JSON.stringify(t.all_images),r='<!DOCTYPE html>\n    <html>\n        <head>\n            <meta charset="utf-8">\n            <meta http-equiv="content-type" content="text/html; charset=UTF-8;charset=utf-8">\n            <meta http-equiv="X-UA-Compatible" content="IE=Edge">\n            <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">\n            <meta name="author" content="Kenshin"/>\n            <meta name="description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展" />\n            <meta name="keywords" content="Chrome extension, Chrome 扩展, 阅读模式, 沉浸式阅读, 简悦, 简阅, read mode, reading mode, reader view, firefox, firefox addon, userscript, safari, opera, tampermonkey"/>\n            <meta name="thumbnail" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>\n            <meta property="og:title" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>\n            <meta property="og:type" content="website">\n            <meta property="og:local" content="zh_CN"/>\n            <meta property="og:url" content="http://ksria.com/simpread"/>\n            <meta property="og:image" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>\n            <meta property="og:image:type" content="image/png"/>\n            <meta property="og:image:width" content="960"/>\n            <meta property="og:image:height" content="355"/>\n            <meta property="og:site_name" content="http://ksria.com/simpread"/>\n            <meta property="og:description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>\n            <title>'+e+'</title>\n            <style>* { margin: 0; padding: 0; } #mindmap { display: block; width: 100vw; height: 100vh;}#mindmap *{font-size:12px!important;font-family:-apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif!important;font-weight:300!important;white-space:pre}#mindmap a{font-family:Source Sans Pro,Helvetica Neue,Arial,sans-serif;font-size:11px;font-weight:400;text-decoration:none;color:#4285f4}#mindmap img{height:100%;max-height:200px}</style>\n            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/prismjs@1.23.0/themes/prism.css">\n            <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.12.0/dist/katex.min.css">\n        </head>\n        <body>\n            <svg id="mindmap"></svg>\n            <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>\n            <script src="https://cdn.jsdelivr.net/npm/d3@6.6.0"></script>\n            <script src="https://cdn.jsdelivr.net/npm/markmap-view@0.2.3"></script>\n            <script>\n                markmap.Markmap.create( "svg#mindmap", undefined, '+n+");\n                const images = "+o+';\n                $( "svg code" ).map( ( idx, item ) => {\n                    const $target = $( item ),\n                        id      = $target.text().replace( "image-", "" );\n                    $target.parent().html( `\'<img src="${ images[id] }">` );\n                });\n            </script>\n        </body>\n    </html>';return r}function l(e,t,n,o){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:window.location.href,a=arguments.length>5&&void 0!==arguments[5]&&arguments[5],i=arguments.length>6&&void 0!==arguments[6]&&arguments[6],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",l=function(){if("string"==typeof n)return"<sr-rd-title>"+e+"</sr-rd-title>\n                    "+(a||""==t?"":'<sr-rd-desc style="margin: 0;padding-top: 0;padding-bottom: 0;font-style: normal;font-size: 18px;">'+t+"</sr-rd-desc>")+"\n                    <sr-rd-content>"+n+"</sr-rd-content>";var o="";return n.forEach(function(e){o+='<sr-rd-title id="title-'+e.unread.idx+'"><a style="color:#195bf7;text-decoration:none;" href="'+e.unread.url+'" target="_blank">'+e.unread.title+"</a></sr-rd-title>\n                         <sr-rd-content>"+e.html+"</sr-rd-content>"}),n=o},c=l(),d=function(){return n.search('pre class="hljs')>-1||n.search('code class="hljs')>-1?'<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/default.min.css">':""},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t="";return n.search("sr-annote")>-1&&$("head").find("style").map(function(n,o){$(o).hasClass(e)&&o.innerText.search("--sr-annote-color-0")>-1&&(t=o.innerText)}),t},u=function(){return n.search("MJX_Assistive_MathML")>-1?".MJX_Assistive_MathML{display: none}":""},f="body {-webkit-print-color-adjust: exact}.simpread-font{font:300 16px/1.8 -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#333;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}.simpread-hidden{display:none}.simpread-read-root{display:-webkit-flex;justify-content:center;align-items:center;position:relative;margin:0;top:-1000px;left:0;width:100%;z-index:2147483646;overflow-x:hidden;opacity:0;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}.simpread-read-root-show{top:0}.simpread-read-root-hide{top:1000px}sr-read{margin:0 auto!important;width:100%;max-width:800px;text-align:center;box-sizing:border-box}sr-rd-desc,sr-read{display:block}sr-rd-footer{display:flex;flex-direction:column;font-size:14px}sr-rd-footer-group{display:flex;flex-direction:row;justify-content:center;align-items:center}sr-rd-footer-line{width:100%;border-top:1px solid #e0e0e0}sr-rd-footer-text{min-width:150px}sr-rd-footer-copywrite{margin:10px 0 0;color:inherit}sr-rd-footer-copywrite abbr{font-variant:normal;text-decoration:none}sr-rd-footer-copywrite .second{margin:10px 0}sr-rd-footer-copywrite .third a:hover{border:none!important}sr-rd-footer-copywrite .third a:first-child{margin-right:50px}sr-rd-footer-copywrite .sr-icon{display:inline-flex;justify-content:center;align-items:center;width:33px;height:33px;opacity:.8;transition:opacity .5s ease;cursor:pointer}sr-rd-footer-copywrite .sr-icon:hover{opacity:1}sr-rd-footer-copywrite a,sr-rd-footer-copywrite a:link,sr-rd-footer-copywrite a:visited{margin:0;padding:0;color:inherit;background-color:transparent;font-size:inherit!important;line-height:normal;text-decoration:none;vertical-align:initial;border:none!important;box-sizing:border-box}sr-rd-footer-copywrite a:focus,sr-rd-footer-copywrite a:hover,sr-rd-footer a:active{color:inherit;text-decoration:none;border-bottom:1px dotted!important}.MJX_Assistive_MathML{display: none}",m=r.startsWith("http")?'，<a href="'+r+'" target="_blank">原文地址 </a>':"， 来自 "+r,g='\n                <html lang="en" class="simpread-font simpread-theme-root" style=\''+$("html").attr("style")+'\'>\n                    <head>\n                        <meta charset="utf-8">\n                        <meta http-equiv="content-type" content="text/html; charset=UTF-8;charset=utf-8">\n                        <meta http-equiv="X-UA-Compatible" content="IE=Edge">\n                        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=1">\n                        <meta name="author" content="Kenshin"/>\n                        <meta name="description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展" />\n                        <meta name="keywords" content="Chrome extension, Chrome 扩展, 阅读模式, 沉浸式阅读, 简悦, 简阅, read mode, reading mode, reader view, firefox, firefox addon, userscript, safari, opera, tampermonkey"/>\n                        <meta name="thumbnail" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>\n                        <meta property="og:title" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>\n                        <meta property="og:type" content="website">\n                        <meta property="og:local" content="zh_CN"/>\n                        <meta property="og:url" content="http://ksria.com/simpread"/>\n                        <meta property="og:image" content="https://simpread-1254315611.cos.ap-shanghai.myqcloud.com/static/introduce-2.png"/>\n                        <meta property="og:image:type" content="image/png"/>\n                        <meta property="og:image:width" content="960"/>\n                        <meta property="og:image:height" content="355"/>\n                        <meta property="og:site_name" content="http://ksria.com/simpread"/>\n                        <meta property="og:description" content="简悦 SimpRead - 如杂志般沉浸式阅读体验的扩展"/>\n                        <style type="text/css">'+(i?"":o.global)+'</style>\n                        <style type="text/css">'+o.common+'</style>\n                        <style type="text/css">'+o.theme+'</style>\n                        <style type="text/css">'+(i?f:"")+'</style>\n                        <style type="text/css">'+(i?"":o.mobile)+'</style>\n                        <style type="text/css">'+(i?"":o.css)+'</style>\n                        <style type="text/css">'+(i?"":o.special)+'</style>\n                        <style type="text/css">'+p()+'</style>\n                        <style type="text/css">'+p("sr-annote-dark-colors")+'</style>\n                        <style type="text/css">'+u()+'</style>\n                        <style type="text/css">'+(a?N.trim():O.trim())+"</style>\n                        "+(T?"<style>sr-rd-content * { color: rgb(235, 235, 235)!important }</style>":"")+"\n                        "+d()+'\n                        <script>setTimeout(()=>{const e=location.hash.replace("#id=","");let t,a=!1;const n=t=>{for(let n of t){let t;if((t=e.length>6?n.getAttribute("data-id"):n.getAttribute("data-idx"))==e){n.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"}),a=!0;break}}};e&&(0==(t=document.getElementsByClassName("sr-unread-card")).length&&(t=document.getElementsByTagName("sr-annote")),n(t),a||n(t=document.getElementsByClassName("sr-annote")))},500);</script>\n                        '+(I?'<script>document.addEventListener("DOMContentLoaded",function(){if("localhost"==location.hostname){const t=document.getElementsByTagName("img");for(let o of t){const t=o.src;t.startsWith("http")&&(o.src=location.origin+"/proxy?url="+t)}}},!1);</script>':"")+"\n                        <title>简悦 | "+e.replace("simpread-","")+"</title>\n                    </head>\n                    <body>\n                        <sr-read style='"+$("sr-read").attr("style")+"'>\n                            "+c+"\n                            "+(s?"<toc-bg>"+s.replace(/color: [a-z0-9(), ]+/gi,"").replace('class="toc-outline-active"',"")+"</toc-bg>":"")+'\n                            <sr-rd-footer>\n                                <sr-rd-footer-group>\n                                    <sr-rd-footer-line></sr-rd-footer-line>\n                                    <sr-rd-footer-text>全文完</sr-rd-footer-text>\n                                    <sr-rd-footer-line></sr-rd-footer-line>\n                                </sr-rd-footer-group>\n                                <sr-rd-footer-copywrite>\n                                    <div>本文由 <a href="http://ksria.com/simpread" target="_blank">简悦 SimpRead</a> 转码，用以提升阅读体验'+m+"</div>\n                                </sr-rd-footer-copywrite>\n                            </sr-rd-footer>\n                        </sr-read>\n                    </body>\n                </html>";return g}function c(e,t,n,o,r){if("object"==("undefined"==typeof o?"undefined":v(o))){var a="";o.forEach(function(e){return a+=e.html}),o=a}var i=e.startsWith("http")?'，<a href="'+e+'" target="_blank">原文地址 </a>':"， 来自 "+e,s=function(){var e="";o.search("sr-annote")>-1&&($("head").find("style").map(function(t,n){n.innerText.search("--sr-annote-color-0")>-1&&(e=n.innerText)}),o=o.replace(/<sr-annote/gi,"<span").replace(/<\/sr-annote>/gi,"</span>"));var t=getComputedStyle(document.documentElement);return e=e.replace(/var\(--sr-annote-color-1\)/gi,t.getPropertyValue("--sr-annote-color-1").trim()).replace(/var\(--sr-annote-color-2\)/gi,t.getPropertyValue("--sr-annote-color-2").trim()).replace(/var\(--sr-annote-color-3\)/gi,t.getPropertyValue("--sr-annote-color-3").trim()).replace(/var\(--sr-annote-color-4\)/gi,t.getPropertyValue("--sr-annote-color-4").trim()).replace(/var\(--sr-annote-color-5\)/gi,t.getPropertyValue("--sr-annote-color-5").trim())},l=function(){o.search("sr-rd-mult")>-1&&(o=o.replace(/<sr-rd-mult-avatar/gi,'<div class="sr-rd-mult-avatar"').replace(/<\/sr-rd-mult-avatar>/gi,"</div>").replace(/<sr-rd-mult-content/gi,'<div class="sr-rd-mult-content"').replace(/<\/sr-rd-mult-content>/gi,"</div>").replace(/<sr-rd-mult/gi,'<span class="sr-rd-mult"').replace(/<\/sr-rd-mult>/gi,"</span>"))};return l(),'<html>\n                <style type="text/css">'+r+'</style>\n                <style type="text/css">'+s()+'</style>\n                <body>\n                    <div class="sr-header">\n                        <a target="_blank" href="https://simpread.pro"><span class="sr-logo"></span><span class="sr-name">简 悦</span></a>\n                        <span class="sr-slogan">「如杂志般沉浸式」的阅读体验</span>\n                    </div>\n                    '+(void 0!=n&&""!=n?'<blockquote class="sr-rd-content-desc">'+n+"</blockquote>":"")+"\n                    <sr-rd-content>"+o+'</sr-rd-content>\n                    <div class="sr-rd-footer">\n                        <div class="sr-rd-footer-group">\n                            <div class="sr-rd-footer-line"></div>\n                            <div class="sr-rd-footer-text">全文完</div>\n                            <div class="sr-rd-footer-line"></div>\n                        </div>\n                        <div class="sr-rd-footer-copywrite">\n                            <div>本文由 <a href="http://ksria.com/simpread" target="_blank">简悦 SimpRead</a> 转码，用以提升阅读体验'+i+"</div>\n                        </div>\n                    </div>\n                </body>\n            </html>"}function d(e,t){S="markdown",_=t,M=e,C=new Map;var n=M.match(/!\[\]\(http\S+\)/gi);n&&n.length>0?(n.forEach(function(e,t){M=M.replace(e,"![][img-"+t+"]"),e=e.replace(/[!\[\]\(]|[\)]/gi,""),M=M+"\r\n\r\n"+("[img-"+t+"]:"+e),C.set(e,"[img-"+t+"]:"+e)}),A=[].concat(r(C.keys())),E=A.length,k=0,u(A[0])):_(M)}function p(e,t){if(S="html",_=e,C=new Map,"object"==("undefined"==typeof t?"undefined":v(t))){var n="";t.forEach(function(e){return n+=e.html}),t=n}var o=void 0;void 0!=t?($("html").append('<sr-annote-tmpl style="display:none">'+t+"</sr-annote-tmpl>"),o=$("sr-annote-tmpl")):o=$("sr-rd-content"),o.find("img").map(function(e,t){C.has(t.src)||C.set(t.src,t)}),A=[].concat(r(C.keys())),E=A.length,k=0,u(A[0])}function u(e){x.browser.runtime.sendMessage(w.Add(w.MESSAGE_ACTION.base64,{url:e}),function(e){k++,e&&e.done&&f(e.done.url,e.done.uri),k<E?u(A[k]):_&&_(M)})}function f(e,t){var n=C.get(e);if("html"==S)$(n).attr("src",t).attr("sr-org-src",e);else{var o=n.replace(e,t);M=M.replace(n,o)}}function m(e,t){fetch(e).then(function(e){return e.blob()}).then(function(n){return new Promise(function(o,r){var a=new FileReader;a.onloadend=function(n){t({done:{url:e,uri:n.target.result}})},a.onerror=function(n){t({fail:{error:n,url:e}})},a.readAsDataURL(n)})}).catch(function(n){t({fail:{error:n,url:e}})})}function g(){$("sr-rd-content").find("img").map(function(e,t){var n=$(t).attr("sr-org-src");$(t).attr("src",n).removeAttr("sr-org-src")}),$("sr-annote-tmpl").remove()}function h(){$("sr-rd-content").find("img").map(function(e,t){var n=$(t).attr("sr-base64-src");$(t).attr("src",n)})}function b(){$("sr-rd-content").find("img").map(function(e,t){var n=$(t).attr("sr-org-src"),o=$(t).attr("src");$(t).attr("src",n).attr("sr-base64-src",o)})}Object.defineProperty(t,"__esModule",{value:!0}),t.restoreBaseImg=t.cacheImg=t.restoreImg=t.toBase64=t.img2Base64=t.Mindmap=t.Markdown=t.Mail=t.HTML=t.setProxy=t.isDarkmode=void 0;var v="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x=n(3),y=n(6),w=o(y),k=0,E=0,A=[],C=void 0,_=void 0,S="html",M=void 0,T=!1,N="html {\n        background-color: #fafafa!important;\n    }\n\n    body {\n        margin: 0;\n        padding: 0;\n    }\n\n    sr-rd-content *, sr-rd-content p, sr-rd-content div {\n        margin: 0;\n        font-size: 13px!important;\n    }\n\n    sr-rd-content {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .annote-preview, .annote-preview * {\n        color:#8F9193;\n    }\n\n    .sr-unread-card {\n        position: relative;\n        display: flex;\n        flex-direction: column;\n        margin: 15px;\n        padding: 15px;\n        color: rgba(51,51,51,0.87);\n        background-color: #fff;\n        font-weight: 400;\n        border-radius: 4px;\n        box-shadow: 0 0 6px 1px rgb(0 0 0 / 8%), 0 8px 8px 0 rgb(0 0 0 / 8%);\n        transition: all 0.25s ease-out;\n    }\n\n    .sr-unread-create {\n        color: #8F9193;\n        font-size: 12px;\n    }\n\n    .sr-unread-refs {\n        display: flex;\n        flex-direction: column;\n    }\n\n    .sr-unread-refs,\n    .sr-unread-note {\n        margin-top: 15px;\n        font-size: 14px!important;\n        font-weight: 400;\n        white-space: pre-wrap;\n        color: #333;\n    }\n\n    .sr-unread-card a {\n        padding-left: 0;\n        font-size: 13px!important;\n    }\n\n    .sr-unread-desc {\n        margin: 15px 0 0 0;\n        padding-left: 10px;\n        font-size: 13px;\n        color: #8F9193;\n        border-left: 2px solid #E6E6E6;\n    }\n\n    .sr-unread-desc img {\n        margin: 0;\n        padding: 0;\n        max-width: 100%!important;\n        height: auto;\n        background: #fff;\n        border: 0;\n        box-shadow: none;\n    }\n\n    .sr-unread-tags {\n        margin: 15px 0 0 0;\n    }\n\n    span.sr-unread-tag {\n        margin-right: 5px;\n        padding: 0 5px;\n        color: #195bf7;\n        background: rgb(25 91 247 / .1);\n        font-style: normal;\n        font-size: 13px;\n        font-weight: bold;\n        border-radius: 3px;\n    }\n\n    .sr-unread-card.backlinks .backlink-field {\n        border-left: 2px solid #E6E6E6!important;\n    }\n\n    .sr-unread-card .backlink-field {\n        margin-bottom: 10px;\n    }\n    .sr-unread-card.backlinks .backlink-field:last-child {\n        margin-bottom: 0;\n    }\n\n    .backlink-field .annotegp {\n        border-left-width: 2px!important;\n    }\n\n    .sr-unread-card.backlinks.annote .backlink-field {\n        border-left-width: 0!important;\n    }\n    \n    .sr-unread-card.backlinks.annote .backlink-fields {\n        margin-top: 15px;\n    }\n\n    .sr-unread-card.backlinks.annote  .backlink-title {\n        padding-left: 10px;\n        font-size: 13px;\n        color: #8F9193;\n        border-left: 2px solid #E6E6E6;\n    }\n    \n    .sr-unread-card.backlinks.annote  .backlink-title .link {\n        margin: 0;\n    }\n\n    .backlink-field .sr-unread-tags,\n    .backlink-field .note,\n    .backlink-field .link {\n        margin-top: 10px;\n    }\n\n    .backlink-field ul, .backlink-field li:last-child {\n        margin-bottom: 0!important;\n    }\n    \n    .backlink-field ul {\n        margin-top: 10px;\n    }\n\n    .backlink-field img {\n        width: 80%;\n    }\n",O="sr-rd-content *, sr-rd-content p, sr-rd-content div {\n        font-size: 15px;\n    }\n\n    .annote-perview, .annote-perview * {\n        color: rgb(85, 85, 85);\n        font-weight: 400;\n        line-height: 1.8;\n    }\n",I=!1;t.isDarkmode=i,t.setProxy=a,t.HTML=l,t.Mail=c,t.Markdown=d,t.Mindmap=s,t.img2Base64=p,t.toBase64=m,t.restoreImg=g,t.cacheImg=b,t.restoreBaseImg=h},52:function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"此功能";return R.auth.lock&&(new e).Render({type:2,content:t+"为高级账户功能，请 <b>升级到高级账户</b>，如已是高级账户，请在选项页右上角 <b>仅授权当前设备</b>。",state:"holdon",action:"升级",cancel:"授权",callback:function(e){"action"==e?L.Render(!0,R.auth.token,function(e){}):"cancel"==e&&b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.new_tab,{url:b.browser.extension.getURL("options/options.html")}))}}),R.auth.lock}function i(e){return["hypothes","readwise"].includes(e)}function s(t,n,o,r){var c=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,u=arguments.length>5&&void 0!==arguments[5]&&arguments[5],m=arguments.length>6&&void 0!==arguments[6]?arguments[6]:window.location.href;"page"==h.storage.option.annote.exp_mode?h.storage.option.annote.export=!1:"annote"==h.storage.option.annote.exp_mode&&(h.storage.option.annote.export=!0),n=n.trim(),!u&&h.storage.unread&&h.storage.unread.idx>0&&(n=h.storage.unread&&h.storage.unread.title),!u&&h.storage.unread&&h.storage.unread.idx>0&&(o=h.storage.unread&&h.storage.unread.desc),C.setProxy("pdf"==t||"mail"==t&&"pdf"==h.storage.option.remote.export.attach||h.storage.option.export.html.proxy),C.isDarkmode(["night","dark"].includes(h.storage.read.theme));var v=!1,y=!1,k=r,A=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];T.SpecialCSS(h.storage.pr&&h.storage.pr.mathjax||!1,function(n){S.default.GetAll();var o=S.default.Get(t?"github":h.storage.read.theme),r=S.default.Get("global"),a=S.default.Get("common"),i=S.default.Get("mobile"),s=T.GetCustomCSS();e({theme:o,global:r,common:a,css:s,mobile:i,special:n})})},_=function(n){if("both"==h.storage.option.annote.exp_mode&&(h.storage.option.annote.export=!0),y&&h.storage.option.export.markdown.custom&&""!=h.storage.option.export.markdown.template&&(h.storage.option.annote.export||c)&&!a("<b>自定义模板</b> "))!function(){b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.track,{eventCategory:"service",eventAction:"service",eventValue:"custom_markdown"}));var e="",o="refslink"==t?"{{#each}}\n\n"+h.storage.option.annote.link+"\n\n{{/each}}":"annote"==c&&1==h.storage.option.export.markdown.single&&""!=h.storage.option.export.markdown.single_tmp?h.storage.option.export.markdown.single_tmp:h.storage.option.export.markdown.template;if(u)r.forEach(function(t){e+=f.AnnoteMDTemplate(o,h.storage.option.export.markdown,t.unread,t.unread.annotations,g.Markdown,W.Markdown)});else{"string"==typeof r&&(r=h.storage.unread.annotations);var a="string"==typeof k?r:k;e=f.AnnoteMDTemplate(o,h.storage.option.export.markdown,h.storage.unread,a,g.Markdown,W.Markdown)}n(e)}();else if(u){var i="";r.forEach(function(t){g.MDWrapper(f.ClearMD(t.unread.desc,t.html.replace(/sr-(div|desc)/gi,"blockquote"),!0,t.unread.url),void 0,new e,h.storage.option.export.markdown.format).done(function(e){return i+=e})}),n(i)}else g.MDWrapper(f.ClearMD(o,r.replace(/sr-(div|desc)/gi,"blockquote").replace('<div class="unread-refs"','<br/><br/><div class="unread-refs"'),!0,m),void 0,new e,h.storage.option.export.markdown.format).done(function(e){return n(e)})},M=function(){if(u){var e="";return r.forEach(function(t){e+='<outline class="toc-level-h2"><a href="#title-'+t.unread.idx+'"><span>'+t.unread.title+"</span></a></outline>";
}),'<toc class="simpread-font simpread-theme-root" style="width: initial;">'+e+"</toc>"}if(h.storage.option.export.html.toc&&a("<b>导出 HTML 或离线 HTML 包含目录</b> 的功能 "))return"";var t=$("toc-bg").html()||$("iframe").contents().find("toc-bg").html()||"";return 0==y&&h.storage.option.export.html.toc?t.replace(/toc-outline-theme-(dark|night)/gi,""):""},N=function(n){if(u)return n;try{var o=n.match(/[a-z]+$/i)||[],r=o.length>0?"."+o[0]:"",a=function(){var e=h.storage.option.export.title.template.match(/{{date_format\|[\u4e00-\u9fa5a-zA-Z :-]+}}/),t="";if(e&&e.length>0){var n=e[0].replace("{{date_format|","").replace("}}","");t=f.FmtDate2(new Date,n)}return t},i="";return h.storage.option.export.title.custom?(i=h.storage.option.export.title.template.replace(/{{type}}/gi,t).replace(/{{title}}/gi,n).replace(/{{id}}/gi,h.storage.unread.idx?h.storage.unread.idx+"-":"").replace(/{{create}}/gi,h.storage.unread.create?h.storage.unread.create:"").replace(/{{un_title}}/gi,h.storage.unread.title?h.storage.unread.title:n).replace(/{{mode}}/gi,y?"@annote":"").replace(/{{date_format\|[\u4e00-\u9fa5a-zA-Z :-]+}}/,a()).replace(/{{timestamp}}/gi,f.FmtDate(h.storage.unread.create?h.storage.unread.create.replace(/年|月/gi,"-").replace(/日/gi,""):+new Date).replace(/年|月|日|:| /gi,"")),h.storage.option.export.title.template.includes("{{un_title}}")&&h.storage.unread.title&&r&&(i+=r),""==i?n:i):n}catch(t){return(new e).Render({type:2,content:'自定义标题模板有错误，只能导出 <b>原文的标题</b>，自定义标题 <a target="_blank" href="http://ksria.com/simpread/docs/#/定制化导出?id=标题"><b>请看这里 ↗</b></a>。',state:"holdon"}),n}},I=function(t,n){200!=t.status&&$("notify-content").text().startsWith("请在 简悦 · 同步助手 中")||(t&&200==t.status?(new e).Render(1,"已成功保存。"):401==t.code&&"uid"==t.status?(new e).Render(2,"当前用户不是高级账户，请在 <b>选项页授权当前设备</b> 或 <b>升级到高级账户</b>。"):403==t.status?(new e).Render({type:2,content:'请在 <b>简悦 · 同步助手</b> 中 <b>开启相关选项</b>，详细说明 <a target="_blank" href="https://github.com/Kenshin/simpread/discussions/2118"><b>请看这里 ↗</b></a>。',state:"holdon"}):403==t.code&&"export"==t.status?(new e).Render({type:2,content:'请在 <b>简悦 · 同步助手</b> 中 <b>设置导出文件夹</b>，详细说明 <a target="_blank" href="http://ksria.com/simpread/docs/#/Sync?id=如何配置-2"><b>请看这里 ↗</b></a>。',state:"holdon"}):403==t.code&&"mail"==t.status?(new e).Render({type:2,content:'请在 <b>简悦 · 同步助手</b> 中 <b>设置邮件服务</b>，详细说明 <a target="_blank" href="http://ksria.com/simpread/docs/#/Sync?id=邮件服务"><b>请看这里 ↗</b></a>。',state:"holdon"}):403==t.code&&"kindle"==t.status?(new e).Render({type:2,content:'请在 <b>简悦 · 同步助手</b> 中 <b>设置 Kindle 接收邮箱</b>，详细说明 <a target="_blank" href="http://ksria.com/simpread/docs/#/Sync?id=发送到kindle><b>请看这里 ↗</b></a>。',state:"holdon"}):(new e).Render(3,'导出失败，此功能为实验性功能，如有需求请提 <a target="_blank" href="https://github.com/Kenshin/simpread/issues/new/choose">Issues ↗</a>'))};if(u)!function(){y=!0;var e=[];r.forEach(function(n){var o="";if(["html","offlinehtml","local"].includes(t)&&"card"==h.storage.option.export.html.layout)v=!0,o+=f.AnnoteHTML2(n,n.annotations||[],W.HTML);else{var r=!["html","offlinehtml","onenote","weizhi","mail","pdf","kindle"].includes(t);o+=f.AnnoteHTML(m,n,n.annotations||[],r,"evernote"==t||"yinxiang"==t,!1,W.HTML),v=!1}e.push({unread:n,html:o})}),r=e}();else if((h.storage.option.annote.export||c)&&h.storage.unread)if(void 0==h.storage.unread.annotations&&(h.storage.unread.annotations=[]),y=!0,"string"==typeof r&&(1==h.storage.option.annote.export||c)&&(r=h.storage.unread.annotations),["html","offlinehtml","local"].includes(t)&&"card"==h.storage.option.export.html.layout)v=!0,r=f.AnnoteHTML2(h.storage.unread,r,W.HTML);else{var j=!["html","offlinehtml","onenote","weizhi","mail","pdf","kindle"].includes(t);r=f.AnnoteHTML(m,h.storage.unread,r,j,"evernote"==t||"yinxiang"==t,!1,W.HTML),v=!1}try{if("annote"==h.storage.option.annote.exp_mode&&(!h.storage.unread||h.storage.unread&&h.storage.unread.annotations&&0==h.storage.unread.annotations.length)){var L=$("sr-rd-content").html()||$("iframe").contents().find("sr-rd-content").html();L&&(r=L.trim())}}catch(e){}if(t.indexOf("_")>0&&t.startsWith("share")){var P="";switch(t.split("_")[1]){case"facebook":P="https://www.facebook.com/dialog/feed?app_id=1528743474024441&link="+m;break;case"twitter":P="https://twitter.com/intent/tweet?text="+n+" （ 分享自 简悦 ）&url="+m;break;case"gplus":P="https://plus.google.com/share?url="+m;break;case"weibo":P="http://service.weibo.com/share/share.php?url="+m+"&title="+n+" （ 分享自 简悦-SimpRead ）";break;case"telegram":P="https://t.me/share/url?url="+m;break;case"card":(new e).Render("已启动分享卡标注功能，请在页面标注，生成分享卡。"),$("sr-rd-crlbar").find("panel-bg").length>0&&$("sr-rd-crlbar").find("panel-bg")[0].click(),w.Annotate().done(function(e){""!=e&&E.Render("focus"==h.storage.current.mode?"html":"sr-read",n,e)})}"card"!=t.split("_")[1]&&b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.new_tab,{url:P}))}else if(["save","markdown","markdeep","offlinemarkdown","textbundle","mail","png","kindle","pdf","epub","temp","html","offlinehtml","local","snapshot","bear","copy","ulysses","wayback","refslink"].includes(t)){h.storage.Statistics("service",t),b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.track,{eventCategory:"service",eventAction:"service",eventValue:t})),["markdown","markdeep","offlinemarkdown","html","offlinehtml"].includes(t)&&(R.auth.lock&&!h.storage.option.remote.export.epub&&z.Help("plain"),!R.auth.lock&&!h.storage.option.remote.export.epub&&z.Help("enhance_plain")),R.auth.lock&&(h.storage.option.remote.export.plain||h.storage.option.remote.export.epub||h.storage.option.remote.export.pdf||h.storage.option.remote.export.kindle)&&(["mail","textbundle"].includes(t)&&(new e).Render({type:2,content:"嗨，此账户为基础账户，但发现你 <b>已开启增强导出功能</b>，此功能为高级账户功能，请在下条信息中使用 <b>重新授权获得高级账户资格</b>。",state:"holdon"}),["markdown","markdeep","offlinemarkdown","html","offlinehtml","epub","pdf"].includes(t)&&a("嗨，此账户为基础账户，但发现你 <b>已开启增强导出功能</b>，"));var H=function(){switch(t){case"save":m.replace(/(\?|&)simpread_mode=read/,""),h.storage.UnRead("add",f.GetPageInfo(),function(t){t&&(new e).Render(0,"成功加入未读列表。"),!t&&(new e).Render(0,"已加入未读列表，请勿重新加入。")});break;case"markdeep":case"markdown":var i="simpread-"+n+".md",s="markdown"==t?"":".html";h.storage.pr&&""!=h.storage.pr.current.site.avatar[0].name&&(r=f.MULTI2ENML(r)),"markdeep"==t&&h.storage.option.export.markdeep.custom&&a("<b>自定义 Markdeep 模板</b> ")&&(h.storage.option.export.markdeep=!1),_(function(e){!R.auth.lock&&h.storage.option.remote.export.plain?g.Enhance("http://localhost:"+h.storage.option.remote.port+"/plain",N(i.replace("simpread-",""))+s,f.Markdeep(e,""!=s,h.storage.option.export.markdeep),I):g.Download("data:text/plain;charset=utf-8,"+encodeURIComponent(f.Markdeep(e,"markdeep"==t,h.storage.option.export.markdeep)),i+s)});break;case"offlinemarkdown":b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.permission),function(t){return t.done?void!function(){var t=(new e).Render({content:"图片转换中，请稍等...",state:"loading"}),o="simpread-"+n+".md";h.storage.pr&&""!=h.storage.pr.current.site.avatar[0].name&&(r=f.MULTI2ENML(r)),_(function(e){C.Markdown(e,function(e){t.complete(),!R.auth.lock&&h.storage.option.remote.export.plain?g.Enhance("http://localhost:"+h.storage.option.remote.port+"/plain",N(o.replace("simpread-","")),e,I):b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.download,{data:e,name:o}),function(e){})})})}():void(new e).Render(2,"离线下载的文件体积较大，所以需要使用 Chrome 下载方案，请授权。")});break;case"textbundle":if(a('<a target="blank" href="http://ksria.com/simpread/docs/#/Textbundle"><b>Textbundle</b></a> '))return{v:void 0};if(!R.auth.lock&&!h.storage.option.remote.export.plain)return(new e).Render({type:2,content:"此功能需要开启 <b>选项页 → 服务 → 增强导出文本格式</b> 选项。",state:"holdon",action:"开启",callback:function(e){"action"==e&&b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.new_tab,{url:b.browser.extension.getURL("options/options.html#connect?anchor=增强导出")}))}}),{v:void 0};_(function(t){var o=(new e).Render({content:"正在保存 textbundle 到本地，请稍等...",state:"loading"});g.Enhance("http://localhost:"+h.storage.option.remote.port+"/textbundle",N(n),t,function(e,t){o.complete(),I(e,t)})});break;case"png":try{!function(){var t=(new e).Render({content:"正在保存到本地，请稍等...",state:"loading"}),o="read"==h.storage.current.mode?$(".simpread-read-root"):$(".simpread-focus-highlight");$("sr-rd-crlbar").css({opacity:0}),setTimeout(function(){g.PNG(o[0],"simpread-"+n+".png",function(n){t.complete(),$("sr-rd-crlbar").removeAttr("style"),!n&&(new e).Render(2,"转换 PNG 格式失败，这是一个实验性功能，不一定能导出成功。")})},1e3)}()}catch(t){notify5.complete(),(new e).Render(1,"转换 PNG 格式失败，请注意，这是一个实验性功能，不一定能导出成功。")}break;case"epub":!R.auth.lock&&h.storage.option.remote.export.epub?_(function(t){t="---\ntitle: "+n+"\n...\n\n"+t,n=n.replace(/ /gi,"");var o=(new e).Render({content:"正在保存到本地，请稍等...",state:"loading"});g.Enhance("http://localhost:"+h.storage.option.remote.port+"/convert",N(n),t,function(e,t){o.complete(),I(e,t)},{},{in:"md",out:"epub"})}):!function(){R.auth.lock&&!h.storage.option.remote.export.epub&&z.Help("epub"),!R.auth.lock&&!h.storage.option.remote.export.epub&&z.Help("enhance_epub");var t=(new e).Render({type:1,content:'当前使用了第三方 <a href="http://ksria.com/simpread/docs/#/发送到-Epub" target="_blank"><b>EpubPress</b></a> 服务，开始转码生成 epub 请稍等...',state:"loading"});g.Epub(r,m,n,o,function(n){t.complete(),n&&(new e).Render(0,"转换成功，马上开始下载，请稍等。"),!n&&(new e).Render(2,'转换失败，这是一个实验性功能，不一定能导出成功，详细请看 <a href="http://ksria.com/simpread/docs/#/发送到-Epub" target="_blank">epub.press</a>')})}();break;case"offlinehtml":b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.permission),function(t){return t.done?void!function(){var t=(new e).Render({content:"图片转换中，请稍等...",state:"loading"});C.img2Base64(function(){t.complete(),(new e).Render(0,"全部图片已经转换完毕，马上开始下载，请稍等。"),A(function(e){v&&a("<b>笔记模板</b> ")&&(v=!1);var t=h.storage.option.annote.export||c?$("sr-annote-tmpl").html():$("sr-rd-content").html()||$("sr-annote-tmpl").html(),r=M(),i=C.HTML(n,o,t,e,m,v,!1,r);C.restoreImg(),!R.auth.lock&&h.storage.option.remote.export.plain?g.Enhance("http://localhost:"+h.storage.option.remote.port+"/plain",N(n+".html"),i,I):b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.download,{data:i,name:"simpread-"+n+".html"}),function(e){})})},0==$(".simpread-focus-highlight").length?h.storage.option.annote.export||c?r:$("iframe").contents().find("sr-rd-content").html()||void 0:$(".simpread-focus-highlight").html())}():void(new e).Render(2,"离线下载的文件体积较大，所以需要使用 Chrome 下载方案，请授权。")});break;case"html":A(function(e){v&&a("<b>笔记模板</b> ")&&(v=!1);var t=M(),i=C.HTML(n,o,r,e,m,v,!1,t);!R.auth.lock&&h.storage.option.remote.export.plain?g.Enhance("http://localhost:"+h.storage.option.remote.port+"/plain",N(n+".html"),i,I):g.Download("data:text/plain;charset=utf-8,"+encodeURIComponent(i),"simpread-"+n+".html")});break;case"snapshot":(new e).Render("请移动鼠标，按住鼠标左键框选，框选后可再次框选。"),$("panel-bg").click(),setTimeout(function(){O.Start().done(function(e){O.End(),setTimeout(function(){b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.snapshot,e),function(e){g.Download(e.done,"simpread-"+n+".png")})},100)})},500);break;case"copy":_(function(t){f.Clipboard(t),(new e).Render("已成功复制 Markdown")});break;case"refslink":_(function(t){f.Clipboard(t),(new e).Render("已成功复制 Markdown")});break;case"bear":h.storage.pr&&""!=h.storage.pr.current.site.avatar[0].name&&(r=f.MULTI2ENML(r)),_(function(e){location.href="bear://x-callback-url/create?title="+n+"&text="+encodeURIComponent(e)+"&tags=simpread"});break;case"ulysses":h.storage.pr&&""!=h.storage.pr.current.site.avatar[0].name&&(r=f.MULTI2ENML(r)),_(function(e){e="#"+n+"\n\n"+e,location.href="ulysses://x-callback-url/new-sheet?text="+encodeURIComponent(e)});break;case"wayback":var l=(new e).Render({content:"正在保存，请稍等...",state:"loading"});g.wayback.Add(m,function(t,n){l.complete(),t?(new e).Render(1,'已成功保存，<a target="_blank" href="'+t+'">点击访问</a>。'):(new e).Render(2,"保存失败，并不是每个页面都可以正常保存成功。")});break;case"temp":case"kindle":!R.auth.lock&&"kindle"==t&&h.storage.option.remote.export.kindle?!function(){var t=function(t){var o=(new e).Render({content:"正在发送邮件，请稍等...",state:"loading"});g.Enhance("http://localhost:"+h.storage.option.remote.port+"/mail",n,"kindle",function(e,t){o.complete(),I(e,t)},t)},a=(new e).Render({content:"正在生成附件，请稍等...",state:"loading"});C.img2Base64(function(){a.complete(),(new e).Render(0,"开始发送，请稍等。"),A(function(e){var r=h.storage.option.annote.export||c?$("sr-annote-tmpl").html():$("sr-rd-content").html()||$("sr-annote-tmpl").html(),a=C.HTML(n,o,r,e,m);g.Enhance("http://localhost:"+h.storage.option.remote.port+"/plain","tmp-"+n+".html",a,function(e,n){C.restoreImg(),e&&200==e.status&&t("html")})})},h.storage.option.annote.export||c?r:void 0)}():!function(){var a=(new e).Render({state:"loading",content:"开始转码阅读模式并上传到服务器，请稍后。"}),i={theme:h.storage.read.theme,fontsize:h.storage.read.fontsize,fontfamily:h.storage.read.fontfamily,layout:h.storage.read.layout,custom:h.storage.read.custom};g.kindle.Read(m,n,o,r,i,function(n,o){if(a.complete(),o)(new e).Render(2,"保存失败，请稍候再试！");else switch(t){case"kindle":(new e).Render("保存成功，3 秒钟后将跳转到发送页面。"),setTimeout(function(){g.kindle.Send()},3e3);break;case"temp":(new e).Render("保存成功，3 秒钟后将跳转到临时页面。"),setTimeout(function(){g.kindle.Temp()},3e3)}})}();break;case"pdf":!R.auth.lock&&h.storage.option.remote.export.pdf?A(function(t){var a=C.HTML(n,o,r,t,m,v,!0),i=(new e).Render({content:"正在保存到本地，请稍等...",state:"loading"});g.Enhance("http://localhost:"+h.storage.option.remote.port+"/pdf",N(n),a,function(e,t){i.complete(),I(e,t)})},["dark","night"].includes(h.storage.read.theme)):(R.auth.lock&&!h.storage.option.remote.export.pdf&&z.Help("pdf"),!R.auth.lock&&!h.storage.option.remote.export.pdf&&z.Help("enhance_pdf"),"read"==h.storage.current.mode?($("sr-rd-crlbar").css({opacity:0}),setTimeout(function(){g.PDF(),$("sr-rd-crlbar").removeAttr("style")},500)):(new e).Render(2,"当前模式不支持导出到 PDF，请使用阅读模式。"));break;case"mail":if(a())return{v:void 0};if(!h.storage.option.remote.export.mail)return(new e).Render({type:2,content:"此功能需要开启 <b>选项页 → 服务 → 发送邮件</b> 选项。",state:"holdon",action:"开启",callback:function(e){"action"==e&&b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.new_tab,{url:b.browser.extension.getURL("options/options.html#connect?anchor=发送邮件")}))}}),{v:void 0};var d=function(t){var a=(new e).Render({content:"正在发送邮件，请稍等...",state:"loading"}),i=C.Mail(m,n,o,r,S.default.Get("mail"));g.Enhance("http://localhost:"+h.storage.option.remote.port+"/mail",n,i,function(e,t){a.complete(),I(e,t)},t)};"none"==h.storage.option.remote.export.attach?d():"pdf"==h.storage.option.remote.export.attach?A(function(t){var a=C.HTML(n,o,r,t,m,v,!0),i=(new e).Render({content:"正在生成附件，请稍等...",state:"loading"});g.Enhance("http://localhost:"+h.storage.option.remote.port+"/pdf","tmp-"+n,a,function(e,t){i.complete(),e&&200==e.status&&d("pdf")})}):"ofhtml"==h.storage.option.remote.export.attach&&!function(){var t=(new e).Render({content:"图片转换中，请稍等...",state:"loading"});C.img2Base64(function(){t.complete(),(new e).Render(0,"全部图片已经转换完毕，开始发送，请稍等。"),A(function(e){var t=h.storage.option.annote.export||c?$("sr-annote-tmpl").html():$("sr-rd-content").html()||$("sr-annote-tmpl").html(),r=C.HTML(n,o,t,e,m);g.Enhance("http://localhost:"+h.storage.option.remote.port+"/plain","tmp-"+n+".html",r,function(e,t){C.restoreImg(),e&&200==e.status&&d("html")})})},h.storage.option.annote.export||c?r:void 0)}()}}();if("object"===("undefined"==typeof H?"undefined":p(H)))return H.v}else if(["dropbox","pocket","instapaper","linnk","yinxiang","evernote","onenote","gdrive","jianguo","yuque","notion","github","joplin","youdao","weizhi","flomo","focusnote"].includes(t))!function(){var a=g.dropbox,i=g.pocket,s=g.instapaper,l=g.linnk,p=g.evernote,u=g.onenote,v=g.gdrive,w=g.jianguo,k=g.yuque,E=g.notion,S=g.youdao,M=g.weizhi,T=g.github,N=g.joplin,O=g.flomo,I=g.focusnote,z="yinxiang"==t?"evernote":t;h.storage.Statistics("service",t),b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.track,{eventCategory:"service",eventAction:"service",eventValue:t}));var R=function(t){!function(){switch(t){case"dropbox":h.storage.pr&&""!=h.storage.pr.current.site.avatar[0].name&&(r=f.MULTI2ENML(r)),_(function(o){a.Write(n+".md",o,function(n,o,r){return g.svcCbWrapper(o,r,a.name,t,new e)},"md/")});break;case"pocket":i.Add(m,n,function(n,o){return g.svcCbWrapper(n,o,i.name,t,new e)});break;case"instapaper":s.Add(m,n,o,function(n,o){return g.svcCbWrapper(n,o,s.name,t,new e)});break;case"linnk":var z=(new e).Render({content:"开始保存到 Linnk，请稍等...",state:"loading"});l.access_token=h.storage.secret.linnk.access_token,l.GetSafeGroup(l.group_name,function(o,r){z.complete(),r?(new e).Render(2,"error"==r?l.name+" 保存失败，请稍后重新再试。":r):(l.group_id=o.data.groupId,l.Add(m,n,function(n,o){return g.svcCbWrapper(n,o,l.name,t,new e)}))});break;case"evernote":case"yinxiang":p.env=t,p.sandbox=!1,h.storage.pr&&""!=h.storage.pr.current.site.avatar[0].name&&(r=f.MULTI2ENML(r)),p.Add(n,h.storage.option.annote.export||c?r:f.HTML2ENML(r,m),function(a,i){g.svcCbWrapper(a,i,p.name,t,new e),"error"==i&&((new e).Render("保存失败，正在尝试优化结构再次保存，请稍等..."),g.MDWrapper(f.ClearMD(o,r,!1,m),void 0,new e,h.storage.option.export.markdown.format).done(function(o){var r=f.MD2ENML(o),a=f.ClearHTML(g.MD2HTML(o),m);p.Add(n,a,function(o,a){g.svcCbWrapper(o,a,p.name,t,new e),"error"==a&&(new e).Render({content:"导出失败，是否以 Markdown 格式保存？",action:"是的",cancel:"取消",callback:function(o){"cancel"!=o&&((new e).Render({content:"转换为 Markdown 并保存中，请稍等...",delay:2e3}),p.Add(n,f.HTML2ENML(r,m),function(n,o){g.svcCbWrapper(n,o,p.name,t,new e),"error"==o&&(new e).Render({content:"转换后保存失败，是否提交当前站点？",action:"是的",cancel:"取消",callback:function(e){if("cancel"!=e){var t=encodeURI("https://github.com/Kenshin/simpread/issues/new?title="+p.name+"导入失败&labels=evernote&body=发生问题的地址: <"+location.href+">");b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.new_tab,{url:t}))}}})}))}})})}))});break;case"onenote":u.Add(u.Wrapper(m,n,r),function(n,o){return g.svcCbWrapper(n,o,u.name,t,new e)});break;case"gdrive":h.storage.pr&&""!=h.storage.pr.current.site.avatar[0].name&&(r=f.MULTI2ENML(r)),_(function(o){v.Add("file",function(n,o){return g.svcCbWrapper(n,o,v.name,t,new e)},v.CreateFile(n+".md",o))});break;case"jianguo":_(function(o){n=n.replace(/[|@!#$%^&*()<>/,.+=\\]/gi,"-"),w.Add(h.storage.secret.jianguo.username,h.storage.secret.jianguo.password,w.root+"/"+w.folder+"/"+n+".md",o,function(n){var o=void 0;n&&201!=n.status&&204!=n.status&&(o="导出到坚果云失败，请稍后再试。"),g.svcCbWrapper(n,o,w.name,t,new e)})});break;case"yuque":_(function(o){k.Add(n,o,function(n,o){return g.svcCbWrapper(n,o,k.name,t,new e)})});break;case"notion":_(function(o){d("load",function(){E.access_token=h.storage.secret.notion.access_token,E.folder_id=h.storage.secret.notion.folder_id,E.save_image=h.storage.secret.notion.save_image,E.schema=h.storage.secret.notion.schema,E.type=h.storage.secret.notion.type,E.href=m,E.Add(n,o.replace(/.(png|jpe?g)!\d+/gi,".$1").replace(/> 本文由 [\S ]+/i,"")+"\n> 本文由简悦 SimpRead 转码",function(n,o){"collection"==E.type&&E.schema!=h.storage.secret.notion.schema&&(h.storage.secret.notion.schema=E.schema,E.Save(h.storage)),g.svcCbWrapper(n,o,E.name,t,new e)})},500)});break;case"github":_(function(o){T.access_token=h.storage.secret.github.access_token,T.repo=h.storage.secret.github.repo,T.path=h.storage.secret.github.path,T.Add(n+".md",o,function(n,o){g.svcCbWrapper(n,o,T.name,t,new e)})});break;case"youdao":_(function(o){d("load",function(){S.access_token=h.storage.secret.youdao.access_token,S.folder_id=h.storage.secret.youdao.folder_id,S.Add(n,o,function(n,o){g.svcCbWrapper(n,o,S.name,t,new e)})})});break;case"weizhi":A(function(a){var i=C.HTML(n,o,r,a,m);d("load",function(){M.kbServer=h.storage.secret.weizhi.kbServer,M.kbGuid=h.storage.secret.weizhi.kbGuid,M.folder=h.storage.secret.weizhi.folder,M.access_token=h.storage.secret.weizhi.access_token,M.Add(n,i.replace(/<script>[\S ]+<\/script>/gi,""),function(n,o){g.svcCbWrapper(n,o,M.name,t,new e)})})});break;case"joplin":_(function(o){N.access_token=h.storage.secret.joplin.access_token,N.folder_id=h.storage.secret.joplin.folder_id,N.Add(n,o,function(n,o){g.svcCbWrapper(n,o,N.name,t,new e)})});break;case"flomo":O.access_token=h.storage.secret.flomo.access_token;var R=n;y&&(R=f.AnnoteText(r),R=n+"\n\n"+R+"\n"),O.Add(R+"\n"+m+"\n\n#简悦",function(n,o){g.svcCbWrapper(n,o,O.name,t,new e)});break;case"focusnote":I.access_token=h.storage.secret.focusnote.access_token,_(function(r){I.Add(m,n,o,r,function(n,o){g.svcCbWrapper(n,o,I.name,t,new e)})})}}()};g.VerifySvcWrapper(h.storage,g[z],t,g.Name(t),new e).done(function(e){return R(e)})}();else if(t.startsWith("dyslexia"))t.endsWith("speak")?b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.speak,{content:"标题 "+n+" 正文 "+r})):b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.speak_stop));else if(t.startsWith("fullscreen"))document.documentElement.requestFullscreen();else if(t.startsWith("webdav_")||t.startsWith("webhook_")){var B=function(){var i=t.replace("webdav_","").replace("webhook_",""),s=function(t,a){"html"==t?A(function(e){var t=M(),i=C.HTML(n,o,r,e,m,!1,t);a(i)}):"ofhtml"==t?!function(){var t=(new e).Render({content:"图片转换中，请稍等...",state:"loading"});C.img2Base64(function(){t.complete(),(new e).Render(0,"全部图片已经转换完毕，开始发送，请稍等。"),A(function(e){var t=h.storage.option.annote.export||c?$("sr-annote-tmpl").html():$("sr-rd-content").html(),r=M(),i=C.HTML(n,o,t,e,m,!1,r);C.restoreImg(),a(i)})},h.storage.option.annote.export||c?r:void 0)}():_(function(e){a(e)})};if(t.startsWith("webdav_"))b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.track,{eventCategory:"service",eventAction:"service",eventValue:"webdav"})),h.storage.Safe(function(){h.storage.secret.webdav.forEach(function(o,r){o=JSON.parse(o),void 0==o.format&&(o.format="md"),(o.name==i||""==i&&0==r)&&s(o.format,function(r){n=n.replace(/[|@!#$%^&*()<>/,.+=\\]/gi,"-");var a=o.format.endsWith("html")?".html":".md";(new e).Render("开始保存到 "+o.name+"，请稍等..."),g.webdav.Add(o.url,o.user,o.password,""+n+a,r,function(n){var r=void 0;n&&201!=n.status&&204!=n.status&&(r="导出到 "+o.name+" 失败，请稍后再试。"),g.svcCbWrapper(n,r,o.name,t,new e)})})})});else{if(a())return{v:void 0};b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.track,{eventCategory:"service",eventAction:"service",eventValue:"webhooks"})),h.storage.option.export.webhooks.forEach(function(r){r=JSON.parse(r),t.endsWith(r.name)&&!function(){var t=r,a=t.name,i=t.url,l=t.type,c=t.fmt,d={url:i,type:l},u=h.storage.unread.tags&&""!=h.storage.unread.tags?"object"==p(h.storage.unread.tags)?h.storage.unread.tags.join(","):h.storage.unread.tags:"",f=r,b=f.headers,v=f.body;s(c,function(t){b&&(d.headers=b),v=JSON.stringify(v),v=v.replace(/{{url}}/gi,m).replace(/{{title}}/gi,n).replace(/{{desc}}/gi,o).replace(/{{note}}/gi,h.storage.unread.note||"").replace(/{{tags}}/gi,u).replace(/"{{content}}"/gi,JSON.stringify(t)),b?v&&(d.data=v):v&&(d.data=JSON.parse(v));var r=(new e).Render({content:"正在发送到 "+a+"，请稍等...",state:"loading"});g.Webhook(d,function(t,n){r.complete(),g.svcCbWrapper(t,n,a,l,new e)})})}()})}}();if("object"===("undefined"==typeof B?"undefined":p(B)))return B.v}else if(t.startsWith("custom_")){var F=function(){if(a())return{v:void 0};if(!h.storage.option.remote.export.plain)return(new e).Render(2,"此功能需要开启【同步助手的文本导出格式】选项。"),{v:void 0};b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.track,{eventCategory:"service",eventAction:"service",eventValue:"custom"}));var i=function(t,o){var r=(new e).Render({content:"正在保存到本地，请稍等...",state:"loading"});g.Enhance("http://localhost:"+h.storage.option.remote.port+"/convert",N(n),t,function(e,t){r.complete(),I(e,t)},{},{in:o.in,out:o.out})};h.storage.option.export.custom.forEach(function(e){e=JSON.parse(e),t.endsWith(e.name)&&("html"==e.in?A(function(t){var a=M(),s=C.HTML(n,o,r,t,m,v,!1,a);i(s,e)}):_(function(t){i(t,e)}))})}();if("object"===("undefined"==typeof F?"undefined":p(F)))return F.v}else if(t.startsWith("automated_")){if(!D.Verify())return;b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.track,{eventCategory:"service",eventAction:"service",eventValue:"automated"})),h.storage.option.automated.forEach(function(e){t.endsWith(e.id)&&D.Run(!0,function(e){i(e)||(l(e,n,o,r),s(e,n,o,r))},"manual",e.id)})}else(new e).Render(2,"当前模式下，不支持此功能。")}function l(e,t,n,o){if("both"==h.storage.option.annote.exp_mode){if(h.storage.option.annote.export=!1,!["html","offlinehtml","markdown","offlinemarkdown","markdeep","epub","pdf","textbundle"].includes(e))return!0;if(e.startsWith("automated_")||e.startsWith("webhook_"))return!0;h.storage.unread&&h.storage.unread.annotations&&h.storage.unread.annotations.length>0&&setTimeout(function(){h.storage.option.annote.export=!0,s(e,t,n,o)},400)}}function c(t,n,o,r,a,i,s){void 0==i&&(i=$("sr-annote[data-id="+o+"]").text().replace($('sr-annote-note[data-note-id="note-${id}"]').text(),"")),""==a&&(a=[]),h.storage.Safe(function(){var t={url:"http://localhost:"+h.storage.option.remote.port+"/service/hypothes",type:"POST",data:{id:o,uri:s,title:$("sr-rd-title").text(),text:r,tags:a,exact:i,method:n,token:h.storage.secret.hypothes.access_token,group:h.storage.secret.hypothes.group_id}};b.browser.runtime.sendMessage(x.Add(x.MESSAGE_ACTION.CORB2,{settings:t}),function(t){t&&403==t.done.status&&(new e).Render(2,'如果需要使用 <b>同步标注到 Readwise.io 的话</b> 请先在简悦 · 同步助手中开启此功能，详细 <a target="_blank" href="http://ksria.com/simpread/docs/#/Sync?id=Hypothesis">请看这里</a>')})})}function d(e,t){"load"==e?0==$("#sr-corb").length?($("html").append('<iframe id="sr-corb" src="'+b.browser.runtime.getURL("options/corb.html")+'" width="0" height="0" frameborder="0"></iframe>'),$("#sr-corb").on("load",function(e){return t()})):t():$("#sr-corb").remove()}Object.defineProperty(t,"__esModule",{value:!0}),t.isSyncAction=t.Sync=t.Action=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u=n(29),f=r(u),m=n(28),g=r(m),h=n(4),b=n(3),v=n(6),x=r(v),y=n(37),w=r(y),k=n(132),E=r(k),A=n(51),C=r(A),_=n(23),S=o(_),M=n(9),T=r(M),N=n(55),O=r(N),I=n(33),z=r(I),R=n(21),j=n(36),L=r(j),P=n(73),D=r(P),H=n(117),W=r(H);window.addEventListener(x.MESSAGE_ACTION.plugin_export,function(e){var t=e.detail,n=t.type,o=t.title,r=t.desc,a=t.content;s(n,o,r,a)}),t.Action=s,t.Sync=c,t.isSyncAction=i}).call(t,n(7))},55:function(e,t){"use strict";function n(){var e=0==$(".simpread-focus-highlight").length?$(".simpread-read-root"):$(".simpread-focus-highlight");return a=$.Deferred(),l=!1,e.append("<simpread-snapshot><sr-mask></sr-mask></simpread-snapshot>"),$("simpread-snapshot").on("mousemove",function(e){if(0!=l){s={left:e.clientX,top:e.clientY};var t=s.left-i.left,n=s.top-i.top;c={left:t>=0?i.left:s.left,top:n>=0?i.top:s.top,width:Math.abs(t),height:Math.abs(n)},$(e.currentTarget).find("sr-mask").css(c)}}).on("mousedown",function(e){i={left:e.clientX,top:e.clientY},l=!0}).on("mouseup",function(e){l=!1,r()}),a}function o(){$("html").find("simpread-snapshot").remove()}function r(){if(!($("simpread-snapshot sr-highlight-ctl").length>0)){var e='<sr-snapshot-ctlbar>\n                    <sr-highlight-ctl class="done"><svg t="1560496955945" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M416.832 798.08C400.64 798.08 384.512 791.872 372.16 779.52L119.424 525.76C94.784 500.992 94.784 460.8 119.424 436.032 144.128 411.264 184.128 411.264 208.768 436.032L416.832 644.928 814.4 245.76C839.04 220.928 879.04 220.928 903.744 245.76 928.384 270.528 928.384 310.656 903.744 335.424L461.504 779.52C449.152 791.872 432.96 798.08 416.832 798.08Z" p-id="1755" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                    <sr-highlight-ctl class="none"><svg t="1560499513561" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M649.179 512l212.839-212.84c37.881-37.881 37.881-99.298 0-137.179s-99.298-37.881-137.179 0L512 374.821l-212.839-212.84c-37.881-37.881-99.298-37.881-137.179 0s-37.881 99.298 0 137.179L374.821 512 161.982 724.84c-37.881 37.881-37.881 99.297 0 137.179 18.94 18.94 43.765 28.41 68.589 28.41 24.825 0 49.649-9.47 68.589-28.41L512 649.179l212.839 212.84c18.94 18.94 43.765 28.41 68.589 28.41s49.649-9.47 68.59-28.41c37.881-37.882 37.881-99.298 0-137.179L649.179 512z" p-id="1990" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                    <sr-highlight-ctl class="help"><svg t="1560573280563" viewBox="0 0 1024 1024" version="1.1" width="15" height="15"><defs><style type="text/css"></style></defs><path d="M512 958.326255c247.255337 0 447.696462-200.441125 447.696462-447.696462s-200.441125-447.696462-447.696462-447.696462-447.696462 200.441125-447.696462 447.696462S264.74364 958.326255 512 958.326255zM512 217.681788c35.32146 0 63.956637 28.635177 63.956637 63.956637 0 35.323507-28.635177 63.956637-63.956637 63.956637s-63.956637-28.633131-63.956637-63.956637C448.043363 246.316965 476.67854 217.681788 512 217.681788zM448.043363 510.629793c0-35.32146 28.635177-63.956637 63.956637-63.956637s63.956637 28.635177 63.956637 63.956637l0 223.848231c0 35.323507-28.635177 63.956637-63.956637 63.956637s-63.956637-28.633131-63.956637-63.956637L448.043363 510.629793z" p-id="1979" fill="#ffffff"></path></svg></sr-highlight-ctl>\n                  </sr-snapshot-ctlbar>';$("simpread-snapshot").append(e),$("simpread-snapshot").on("click","sr-highlight-ctl",function(e){var t=$(e.currentTarget).attr("class");if("done"==t)a.resolve(c);else if("none"==t)o();else if("help"==t){var n=$('<a style="display:none" target="_blank" href="http://ksria.com/simpread/docs/#/截图"></a>').appendTo("body");n[0].click(),n.remove()}})}}Object.defineProperty(t,"__esModule",{value:!0});var a=void 0,i=void 0,s=void 0,l=!1,c=void 0;t.Start=n,t.End=o},56:function(e,t,n){var o,r,a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(i,s){"object"==a(t)&&"undefined"!=typeof e?e.exports=s():(o=s,r="function"==typeof o?o.call(t,n,t,e):o,!(void 0!==r&&(e.exports=r)))}(void 0,function(){"use strict";function e(e){return $.extend(!0,{},e)}function t(e){if(document){var t=document.createElement("a");return t.href=e,t}var n=e.match(/^(https?\:)\/\/(([^:\/?#]*)(?:\:([0-9]+))?)([\/]{0,1}[^?#]*)(\?[^#]*|)(#.*|)$/);return n&&{href:e,protocol:n[1],host:n[2],hostname:n[3],port:n[4],pathname:n[5],search:n[6],hash:n[7]}}function n(e){if(""==e)return[0,e];if(r(e))return[2,e];var t=e.match(/<\S+ (class|id)=("|')?[\w-_=;:' ]+("|')?>?$|<[^/][-_a-zA-Z0-9]+>?$/gi);return t&&t.length>0?[1,t]:[-1,void 0]}function o(e){var t=n(e),o=w(t,2),r=o[0],a=o[1];if(2==r)return e;if(1==r){var i=a[0].trim().replace(/['"<>]/g,"").replace(/ /gi,"=").split("="),s=w(i,3),l=s[0],c=s[1],d=s[2];return c?"class"===c.toLowerCase()?c=l+"."+d:"id"===c.toLowerCase()&&(c=l+"#"+d):c=l,c}return null}function r(e){return/^(\[\[)[\[{`'/]{1}[ \S]+[}`'/\]]\]\]{1}($)/g.test(e)}function i(e){var t=[e.replace(/(^)\[\[|\]\]$/g,"")],n=t[0],o=t[1];switch(n[0]){case"{":n=n.replace(/^{|}$/g,""),e=new Function("return "+n)(),o=0;break;case"'":e=(e=n.replace(/^'|'$/g,"")).match(/^<[a-zA-Z0-9_-]+>/g).join("").replace(/<|>/g,"")+":contains("+e.replace(/<[/a-zA-Z0-9_-]+>/g,"")+")",o=1;break;case"/":e=n.replace(/^\/|\/$/g,"").replace(/\\{2}/g,"\\").replace(/'/g,'"'),o=2;break;case"[":n=n.replace(/^{|}$/g,""),e=new Function("return "+n)()[0],o=3;break;case"`":n=l(n=n.replace(/^`|`$/g,"")),e=$(n),o=4;break;default:o=-1}return[e,o]}function s(e){try{if(""!=e.id)return void 0==e.id?"":"//*[@id='"+e.id+"']";if(e===document.body)return"/html[1]/"+e.tagName.toLowerCase();for(var t=0,n=e.parentNode.childNodes,o=0;o<n.length;o++){var r=n[o];if(r===e)return s(e.parentNode)+"/"+e.tagName.toLowerCase()+"["+(t+1)+"]";1===r.nodeType&&r.tagName===e.tagName&&t++;
}}catch(e){return""}}function l(e){return document.evaluate(e,document,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}function c(){var e=$("body"),t=!0,n=!1,o=void 0;try{for(var r,a=["[itemprop='articleBody']","article",".post-content",".entry-content",".post-article",".content-post",".article-entry",".article-content",".article-body",".markdown-body",".post",".content"][Symbol.iterator]();!(t=(r=a.next()).done);t=!0){var i=r.value,s=e.find(i);if(s.length>0)return s}}catch(e){n=!0,o=e}finally{try{!t&&a.return&&a.return()}finally{if(n)throw o}}return-1}function d(){var e=document.location,t=(e.href,e.host,e.protocol,e.host,e.protocol.substr(0,e.protocol.indexOf(":")),e.protocol,e.host,e.pathname.substr(0,e.pathname.lastIndexOf("/")+1),new C.Readability(document.cloneNode(!0)).parse());return t}function p(n,o,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=function(e){var t=e.replace("www.","").match(/\.\S+\.\S+/g);return t?t[0].substr(1):e.replace("www.","")},s=t(S),l=[].concat(k(o.keys())),c=r.match(/[.a-zA-z0-9-_]+/g)[1].replace("www.",""),d=i(s.hostname),p=function(){return"/"==s.pathname||/\/(default|index|portal).[0-9a-zA-Z]+$/.test(s.pathname)},u=!0,f=!1,m=void 0;try{for(var g,h=l[Symbol.iterator]();!(u=(g=h.next()).done);u=!0){var b=g.value,v=o.get(b).name,x=i(v);b.startsWith("[[/")&&b.endsWith("/]]")&&new RegExp(b.replace(/^\[\[\/|\/\]\]/g,"")).test(location.href)?a.push([b,e(o.get(b)),n]):p()||b.endsWith("*")||b.replace(/^http[s]?:/,"")!=r.replace(/^http[s]?:/,"")?b.match(/\*/g)&&1==b.match(/\*/g).length&&!p()&&b.endsWith("*")&&c.includes(x)&&d==x&&r.includes(v)?a.push([b,e(o.get(b)),n]):A(s.origin+s.pathname,b)&&a.push([b,e(o.get(b)),n]):a.push([b,e(o.get(b)),n])}}catch(e){f=!0,m=e}finally{try{!u&&h.return&&h.return()}finally{if(f)throw m}}}function u(e){if(!e.name||!e.url||!e.include)return-1;if(-1==n(e.title)[0]||-1==n(e.include)[0]||-1==n(e.desc)[0])return-2;if(e.paging){if(2!=e.paging.length)return-3;if(!e.paging[0].prev)return-4;if(!e.paging[1].next)return-5;if(-1==n(e.paging[0].prev)[0]||-1==n(e.paging[1].next)[0])return-6}if(e.avatar){if(2!=e.avatar.length)return-7;if(!e.avatar[0].name)return-8;if(!e.avatar[1].url)return-9;if(-1==n(e.avatar[0].name)[0]||-1==n(e.avatar[1].url)[0])return-10}return 0}function f(e){var t=e.replace('<div id="readability-page-1" class="page">',""),n=$(t)[0],o=n.outerHTML.replace(n.innerHTML,""),r=$(o)[0],a=r.tagName.toLowerCase(),i=r.className;return{id:r.id,cls:i,tag:a}}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"text",n=$("html");if(r(e)){var o=i(e),a=w(o,2),s=a[0],l=a[1];0==l?e=s:3==l?e=g(n.find(s)):4==l&&(e=s.html())}else"html"==t?e=g(n.find(e)):"multi"==t||(e=n.find(e).text().trim());return e}function g(e){var t="";switch(e.length){case 0:t="<sr-rd-content-error></sr-rd-content-error>";break;case 1:t=e.html().trim();break;default:t=e.map(function(e,t){return $(t).html()}).get().join("<br>")}return t}var h=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},x=function e(t,n,o){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,o)}if("value"in r)return r.value;var i=r.get;return void 0!==i?i.call(o):void 0},y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=("undefined"==typeof t?"undefined":a(t))&&"function"!=typeof t?e:t},w=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],o=!0,r=!1,a=void 0;try{for(var i,s=e[Symbol.iterator]();!(o=(i=s.next()).done)&&(n.push(i.value),!t||n.length!==t);o=!0);}catch(e){r=!0,a=e}finally{try{!o&&s.return&&s.return()}finally{if(r)throw a}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),k=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},E={url:"",target:"",matching:[],name:"",title:"",desc:"",exclude:[],include:"",avatar:[],paging:[]},A=void 0,C=void 0,_=void 0,S=void 0,M=function(){function n(){var e,t,o=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{global:[],custom:[],local:[]};h(this,n),this.url=(t=(e="/"!=(e=window.location.pathname)&&e.endsWith("/")?e=e.replace(/\/$/,""):e).replace(/\/[%@#.~a-zA-Z0-9_-]+$|^\/$/g,""),window.location.protocol+"//"+window.location.hostname+t+"/"),this.sites=o,this.current={},this.state="none",this.origins=[],this.mathjax=void 0,S=location.href}return b(n,[{key:"SetURL",value:function(e){var n,o=t(e),r=(n="/"!=(n=o.pathname)&&n.endsWith("/")?n=n.replace(/\/$/,""):n).replace(/\/[%@#.~a-zA-Z0-9_-]+$|^\/$/g,"");this.url=o.protocol+"//"+o.hostname+r+"/",S=e}},{key:"SetMinimatch",value:function(e){A=e}},{key:"SetRdability",value:function(e){C=e}},{key:"SetMarkdown",value:function(e){_=e}},{key:"isMathJax",value:function(){var e=this;return void 0==this.mathjax&&(this.mathjax=!1,$("body").find("script").each(function(t,n){n.type.startsWith("math")&&(e.mathjax=!0)})),this.mathjax}},{key:"MathJaxMode",value:function(){var e=c();if(-1!=e)return this.Newsite("read",e[0].outerHTML),this.dom=e[0],this.state="temp",e;var t=d();if(t&&""!=t.content){var n=f(t.content),o=n.id,r=n.cls,a=n.tag;return""!=o?"<"+a+' id="'+o+'">':""!=r?"<"+a+' class="'+r+'">':void 0}}},{key:"Readability",value:function(){try{var t=d();if(!t||""==t.content)throw"Readability error";this.Newsite("read",t.content,t.excerpt);var n=f(t.wrap),o=n.id,r=n.cls,a=n.tag;this.dom=""!=o?$("body").find("#"+o)[0]:""!=r?$("body").find("."+r.replace(/ /gi,"."))[0]:$("body").find(""+a)[0],this.state="temp"}catch(t){var i=c();-1!=i?(this.Newsite("read",i[0].outerHTML),this.dom=i[0],this.state="temp"):this.current.site=e(E)}}},{key:"Getsite",value:function(e,t){return this.sites[e].find(function(e){return e[0]==t})}},{key:"Getsites",value:function(){var e=this,t=[],n=function(){if(A(location.href,"file://**/*.txt")||A(location.href,"http*://**/*.txt"))return function(){var e=location.pathname.split("/").pop(),t="file:"==location.protocol?"local":"remote",n={name:"txtread::"+t,title:"<title>",desc:"",include:"<pre>",auto:!1,exclude:[]};return"remote"==t&&(n.include="",n.html=$("body pre").html().replace(/\n/gi,"<br>")),!$("title").html()&&$("head").append("<title>"+decodeURI(e.replace(".txt",""))+"</title>"),n}();if($($("body").children()[0]).is("pre")&&(A(location.href,"file://**/*.md")||A(location.href,"http*://**/*.md")))return function(){var e=location.pathname.split("/").pop(),t={name:"txtread::"+("file:"==location.protocol?"local":"remote"),title:"<title>",desc:"",include:"",auto:!1,exclude:[]},n=(new _.default.Converter).makeHtml($("body pre").text());return t.html=n,!$("title").html()&&$("head").append("<title>"+decodeURI(e.replace(".md",""))+"</title>"),t}();var e=/<\S+ (class|id)=("|')?[\w-_=;:' ]+("|')?>?$|<[^/][-_a-zA-Z0-9]+>?$/gi,t={name:$("meta[name='simpread:name']").attr("content"),url:$("meta[name='simpread:url']").attr("content"),title:$("meta[name='simpread:title']").attr("content"),desc:$("meta[name='simpread:desc']").attr("content"),include:$("meta[name='simpread:include']").attr("content"),exp:$("meta[name='simpread:exclude']").attr("content"),auto:$("meta[name='simpread:auto']").attr("content"),exclude:[]};if(t.name&&t.include){if(t.url&&!A(location.href,t.url))return;!t.title&&(t.title="<title>"),!t.desc&&(t.desc=""),!t.exp&&(t.exp=""),t.name="metaread::"+t.name,t.auto="true"==t.auto;var n=["title","desc","include","exp"].findIndex(function(n){return""!=t[n]&&!t[n].match(e)});return t.exclude.push(t.exp),delete t.exp,-1==n?t:void 0}}();if(this.current.url=this.url,n)this.current.auto=n.auto,this.current.url=n.url,delete n.auto,delete n.url,this.current.site=v({},n),this.current.site.name.startsWith("metaread::")&&(this.state="meta"),this.current.site.name.startsWith("txtread::")&&(this.state="txt");else if(p("local",new Map(this.sites.local),this.url,t),p("global",new Map(this.sites.global),this.url,t),p("person",new Map(this.sites.person),this.url,t),p("custom",new Map(this.sites.custom),this.url,t),t.length>0){var o=void 0;if(t.forEach(function(t){t[1].active&&(o=t,e.current.url=o[0],e.current.site=e.Safesite(v({},o[1]),o[2],o[0]),e.state="adapter")}),!o){var r=t[0];r[1].active=!0,this.current.url=r[0],this.current.site=this.Safesite(v({},r[1]),r[2],r[0]),this.state="adapter"}}else{var a=function(){if(location.pathname.includes("thread")||location.pathname.includes("forum.php")){if($(".t_f").length>0&&$(".favatar").find(".authi").length>0&&$(".avatar").find("img").length>0)return{avatar:[{name:"[[{$('.favatar').find('.authi')}]]"},{url:"[[{$('.avatar').find('img')}]]"}],include:"[[{$('.t_f')}]]"}}else if(/\/t\/[\w-]+\/\d+/.test(location.pathname)&&$("meta[name=generator]").attr("content").includes("discourse"))return{avatar:[{name:"[[{$('.topic-avatar').find('.a[data-user-card]')}]]"},{url:"[[{$('.topic-avatar').find('img')}]]"}],include:"[[{$('.cooked')}]]"};return-1}();-1!=a?(this.Newmultisite("read",a),this.state="temp"):this.Readability()}this.current.site.matching=t}},{key:"Addsites",value:function(e){var t=0;if(0==this.sites.global.length)this.sites.global=this.Formatsites(e),t=this.sites.global.length;else{var n=function(e,t){var n=new Map(t),o=[].concat(k(n.keys())),r=0;return e.map(function(e){o.includes(e[0])?o.includes(e[0]):r++}),{count:r,newsites:e}}(this.Formatsites(e),this.sites.global);t=n.count,this.sites.global=n.newsites}return t}},{key:"Addlocalsites",value:function(e){return this.sites.local=[].concat(k(e)),this.sites.local}},{key:"Addallsites",value:function(e){return this.sites={global:[].concat(k(e.global)),person:[].concat(k(e.person)),custom:[].concat(k(e.custom)),local:[].concat(k(e.local))},this.sites}},{key:"Newsite",value:function(e,t,n){var o={mode:e,url:window.location.href,site:{name:"tempread::"+window.location.host,title:"<title>",desc:"[[{$('meta[name=Description]').attr('content')||$('meta[name=description]').attr('content')}]]",include:"",exclude:[]}};t&&(o.site.html=t),this.current.mode=o.mode,this.current.url=o.url,this.current.site=this.Safesite(v({},o.site),"local",o.url),n&&(this.current.site.excerpt=n)}},{key:"Newmultisite",value:function(e,t){var n={mode:e,url:window.location.href,site:{name:"tempread::"+window.location.host,title:"<title>",desc:"",include:t.include,exclude:[],avatar:t.avatar}};this.current.mode=n.mode,this.current.url=n.url,this.current.site=this.Safesite(v({},n.site),"local",n.url)}},{key:"Updatesite",value:function(e,t,n){var o=this.sites[e].findIndex(function(e){return e[0]==t});-1==o&&(o=this.sites[e].length),this.sites[e].splice(o,1,n)}},{key:"Deletesite",value:function(e,t,n){var o=this.sites[e].findIndex(function(e){return e[0]==t});-1!=o&&this.sites[e].splice(o,1),n(o)}},{key:"Safesite",value:function(e,t,n){return e.url=n,e.target=t,""==e.name&&(e.name="tempread::"),(!e.avatar||0==e.avatar.length)&&(e.avatar=[{name:""},{url:""}]),(!e.paging||0==e.paging.length)&&(e.paging=[{prev:""},{next:""}]),e}},{key:"Cleansite",value:function(e){return delete e.url,delete e.html,delete e.target,delete e.matching,e.avatar&&e.avatar.length>0&&""==e.avatar[0].name&&delete e.avatar,e.paging&&e.paging.length>0&&""==e.paging[0].prev&&delete e.paging,e}},{key:"Formatsites",value:function(e){var t=new Map,n=!0,o=!1,r=void 0;try{for(var a,i=e.sites[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var s=a.value;if(0==u(s)){var l=s.url;delete s.url,t.set(l,s)}}}catch(e){o=!0,r=e}finally{try{!n&&i.return&&i.return()}finally{if(o)throw r}}return[].concat(k(t))}},{key:"Clearsites",value:function(e){e?this.sites[e]=[]:this.sites={global:[],custom:[],local:[]}}},{key:"Origins",value:function(e){var t=e.origins.map(function(e){return e.url});return(t=new Set(this.origins.concat(t))).forEach(function(e){""!=e.trim()&&e.trim().startsWith("http")&&e.trim().endsWith(".json")||t.delete(e)}),this.origins=[].concat(k(t)),this.origins}},{key:"Addorigins",value:function(e){return this.sites.custom=[].concat(k(e)),this.sites.custom}},{key:"Clearorigins",value:function(){var e=this.sites.custom.length;return this.sites.custom=[],e}}]),n}();return function(t){function n(e){h(this,n);var t=y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.version="0.0.4 build 210524",t.org_url=location.href,t.html={},t.plugin={},t.pure=!1,t.cleanup=!1,t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+("undefined"==typeof t?"undefined":a(t)));e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,M),b(n,[{key:"Exist",value:function(){return this.org_url==location.href}},{key:"AddPlugin",value:function(e){this.plugin={minimatch:e.minimatch,pangu:e.pangu,beautify:e.beautify,stylesheet:e.style,rdability:e.rdability,markdown:e.markdown},x(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"SetMinimatch",this).call(this,this.plugin.minimatch),x(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"SetRdability",this).call(this,this.plugin.rdability),x(n.prototype.__proto__||Object.getPrototypeOf(n.prototype),"SetMarkdown",this).call(this,this.plugin.markdown)}},{key:"ReadMode",value:function(){var t,n,r,a,i;this.html=(t=this.current.site,n=e(t),r=o(""==t.title?"<title>":t.title),a=o(t.desc),i=o(t.include),n.title=""==t.title||"<title>"==t.title?$("head title").text():m(r),n.desc=function(e){if(void 0==e)return e;var t=e.length,n=e.indexOf("。")+1;return t>100&&(e=n>0?e.substr(0,n):e.substr(0,101)+"......"),e}(t.excerpt?t.excerpt:m(a)),n.include=""==t.include&&""!=t.html?t.html:m(i,"html"),n.avatar&&n.avatar.length>0&&""==n.avatar[0].name&&delete n.avatar,n.paging&&n.paging.length>0&&""==n.paging[0].prev&&delete n.paging,n.avatar&&n.avatar.forEach(function(e){var t=Object.keys(e).join(),n=e[t];e[t]=m(o(n),"html")}),n.paging&&n.paging.forEach(function(e){var t=Object.keys(e).join(),n=e[t];e[t]=m(o(n))}),n)}},{key:"TempMode",value:function(e,t){this.state="temp",this.dom=t,this.Newsite(e,t.outerHTML)}},{key:"GetDom",value:function(e,t){return m(o(e),t)}},{key:"Include",value:function(){var e=this.current.site.include,t=[],n=o(e);try{if(r(n)){var a=i(e),s=w(a,2),l=s[0],c=s[1];0==c?(e=e.replace(/\[\[{\$\(|}\]\]|\).html\(\)/g,""),t=$(i("[[["+e+"]]]")[0])):3==c&&(t=l)}else n&&(t=$("body").find(n))}catch(e){}return t}},{key:"Exclude",value:function(e){return function(e,t){var n=[],a="",s=!0,l=!1,c=void 0;try{for(var d,p=t[Symbol.iterator]();!(s=(d=p.next()).done);s=!0){var u=d.value;if(r(u)){var f=i(u),m=w(f,2),g=m[0],h=m[1];if(1==h)a=g;else if(2==h){var b=e.html().match(new RegExp(g,"g"));if(b&&b.length>0){var v=b.join("");a="*["+v+"]"}else a=void 0}else 3==h?g.remove():4==h&&g.remove()}else a=o(u);a&&n.push(a)}}catch(e){l=!0,c=e}finally{try{!s&&p.return&&p.return()}finally{if(l)throw c}}return n.join(",")}(e,this.current.site.exclude)}},{key:"Beautify",value:function(e){0!=e.children().length&&this.plugin.beautify&&(this.plugin.beautify.specTag(this.current.site.name,e),this.cleanup&&this.plugin.beautify.cleanHTML(e,this.pure,this.isMathJax()),this.plugin.beautify.specbeautify(this.current.site.name,e),this.plugin.beautify.removeSpareTag(this.current.site.name,e),this.plugin.beautify.htmlbeautify(e),this.plugin.beautify.commbeautify(this.current.site.name,e),this.plugin.beautify.imgBrokenReload(e))}},{key:"Format",value:function(e){this.plugin.pangu&&this.plugin.pangu.spacingElementByClassName(e)}},{key:"Utils",value:function(){return{dom2Xpath:s,xPath2Dom:l}}}]),n}()})},60:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,'.simpread-font{font:300 16px/1.8 -apple-system,PingFang SC,Microsoft Yahei,Lantinghei SC,Hiragino Sans GB,Microsoft Sans Serif,WenQuanYi Micro Hei,sans-serif;color:#333;text-rendering:optimizelegibility;-webkit-text-size-adjust:100%;-webkit-font-smoothing:antialiased}.simpread-hidden{display:none}.simpread-read-root{display:-webkit-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;position:relative;margin:0;top:-1000px;left:0;width:100%;z-index:2147483646;overflow-x:hidden;opacity:0;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}.simpread-read-root-show{top:0}.simpread-read-root-hide{top:1000px}sr-read{display:-webkit-flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-flow:column nowrap;flex-flow:column;margin:20px 20%;min-width:400px;min-height:400px;text-align:center}read-process{position:fixed;top:0;left:0;height:3px;width:100%;background-color:#64b5f6;-webkit-transition:width 2s;transition:width 2s;z-index:20000}sr-rd-content-error{display:block;position:relative;margin:0;margin-bottom:30px;padding:25px;background-color:rgba(0,0,0,.05)}sr-rd-footer{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;font-size:14px}sr-rd-footer,sr-rd-footer-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}sr-rd-footer-group{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-rd-footer-line{width:100%;border-top:1px solid #e0e0e0}sr-rd-footer-text{min-width:150px}sr-rd-footer-copywrite{margin:10px 0 0;color:inherit}sr-rd-footer-copywrite abbr{-webkit-font-feature-settings:normal;font-feature-settings:normal;font-variant:normal;text-decoration:none}sr-rd-footer-copywrite .second{margin:10px 0}sr-rd-footer-copywrite .third a:hover{border:none!important}sr-rd-footer-copywrite .third a:first-child{margin-right:50px}sr-rd-footer-copywrite .sr-icon{display:-webkit-inline-box;display:-ms-inline-flexbox;display:inline-flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:33px;height:33px;opacity:.8;-webkit-transition:opacity .5s ease;transition:opacity .5s ease;cursor:pointer}sr-rd-footer-copywrite .sr-icon:hover{opacity:1}sr-rd-footer-copywrite a,sr-rd-footer-copywrite a:link,sr-rd-footer-copywrite a:visited{margin:0;padding:0;color:inherit;background-color:transparent;font-size:inherit!important;line-height:normal;text-decoration:none;vertical-align:baseline;vertical-align:initial;border:none!important;box-sizing:border-box}sr-rd-footer-copywrite a:focus,sr-rd-footer-copywrite a:hover,sr-rd-footer a:active{color:inherit;text-decoration:none;border-bottom:1px dotted!important}.simpread-blocks{text-decoration:none!important}.simpread-blocks *{margin:0}.simpread-blocks a{padding:0;text-decoration:none!important}.simpread-blocks img{margin:0;padding:0;border:0;background:transparent;box-shadow:none}.simpread-focus-root{display:block;position:fixed;top:0;left:0;right:0;bottom:0;background-color:hsla(0,0%,92%,.9);z-index:2147483645;opacity:0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms}.simpread-focus-highlight{position:relative;box-shadow:0 0 0 20px #fff;background-color:#fff;overflow:visible;z-index:2147483646}.sr-controlbar-bg sr-rd-crlbar,.sr-controlbar-bg sr-rd-crlbar fab{z-index:2147483647}sr-rd-crlbar.controlbar{position:fixed;right:0;bottom:0;width:100px;height:100%;opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}sr-rd-crlbar.controlbar:hover{opacity:1}sr-rd-crlbar fap *{box-sizing:border-box}@media (max-height:620px){fab{zoom:.8}}@media (max-height:783px){dialog-gp dialog-content{max-height:580px}dialog-gp dialog-footer{border-top:1px solid #e0e0e0}}.simpread-highlight-selector{outline:3px dashed #1976d2!important;cursor:pointer!important}.simpread-highlight-controlbar,.simpread-highlight-selector{background-color:#fafafa!important;opacity:.8!important;-webkit-transition:opacity .5s ease!important;transition:opacity .5s ease!important}.simpread-highlight-controlbar{position:relative!important;border:3px dashed #1976d2!important}simpread-highlight,sr-snapshot-ctlbar{position:fixed;top:0;left:0;right:0;padding:15px;height:50px;background-color:rgba(50,50,50,.9);box-shadow:0 2px 5px rgba(0,0,0,.26);box-sizing:border-box;z-index:2147483640}simpread-highlight,sr-highlight-ctl,sr-snapshot-ctlbar{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-highlight-ctl{margin:0 5px;width:50px;height:20px;color:#fff;background-color:#1976d2;border-radius:4px;box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12);cursor:pointer}toc-bg{position:fixed;left:0;top:0;width:50px;height:200px;font-size:medium}toc-bg:hover{z-index:3}.toc-bg-hidden{opacity:0;-webkit-transition:opacity .5s ease;transition:opacity .5s ease}.toc-bg-hidden:hover{opacity:1;z-index:3}.toc-bg-hidden:hover toc{width:180px}toc *{all:unset}toc{position:fixed;left:0;top:100px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;padding:10px;width:0;max-width:200px;max-height:500px;overflow-x:hidden;overflow-y:hidden;cursor:pointer;border:1px solid hsla(0,0%,62%,.22);-webkit-transition:width .5s;transition:width .5s}toc:hover{overflow-y:auto}toc.mini:hover{width:200px!important}toc::-webkit-scrollbar{width:3px}toc::-webkit-scrollbar-thumb{border-radius:10px;background-color:hsla(36,2%,54%,.5)}toc outline{position:relative;display:-webkit-box;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden;text-overflow:ellipsis;padding:2px 0;min-height:21px;line-height:21px;text-align:left}toc outline a,toc outline a:active,toc outline a:focus,toc outline a:visited{display:block;width:100%;color:inherit;font-size:11px;text-decoration:none!important;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}toc outline a:hover{font-weight:700!important}toc outline a.toc-outline-theme-dark,toc outline a.toc-outline-theme-night{color:#fff!important}.toc-level-h1{padding-left:5px}.toc-level-h2{padding-left:15px}.toc-level-h3{padding-left:25px}.toc-level-h4{padding-left:35px}.toc-outline-active{border-left:2px solid #f44336}toc outline active{position:absolute;left:0;top:0;bottom:0;padding:0 0 0 3px;border-left:2px solid #e8e8e8}sr-kbd{background:-webkit-gradient(linear,0 0,0 100%,from(#fff785),to(#ffc542));border:1px solid #e3be23;-o-border-image:none;border-image:none;-o-border-image:initial;border-image:initial;position:absolute;left:0;padding:1px 3px 0;font-size:11px!important;font-weight:700;box-shadow:0 3px 7px 0 rgba(0,0,0,.3);overflow:hidden;border-radius:3px}.sr-kbd-a{position:relative}kbd-mapping{position:fixed;left:5px;bottom:5px;-ms-flex-flow:row;flex-flow:row;width:250px;height:500px;background-color:#fff;border:1px solid hsla(0,0%,62%,.22);box-shadow:0 2px 5px rgba(0,0,0,.26);border-radius:3px}kbd-mapping,kbd-maps{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}kbd-maps{margin:40px 0 20px;width:100%;overflow-x:auto}kbd-maps::-webkit-scrollbar-thumb{background-clip:padding-box;border-radius:10px;border:2px solid transparent;background-color:rgba(85,85,85,.55)}kbd-maps::-webkit-scrollbar{width:10px;-webkit-transition:width .7s cubic-bezier(.4,0,.2,1);transition:width .7s cubic-bezier(.4,0,.2,1)}kbd-mapping kbd-map-title{position:absolute;margin:5px 0;width:100%;font-size:14px;font-weight:700}kbd-maps-group{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start}kbd-maps-title{margin:5px 0;padding-left:53px;font-size:12px;font-weight:700}kbd-map kbd{display:inline-block;padding:3px 5px;font-size:11px;line-height:10px;color:#444d56;vertical-align:middle;background-color:#fafbfc;border:1px solid #c6cbd1;border-bottom-color:#959da5;border-radius:3px;box-shadow:inset 0 -1px 0 #959da5}kbd-map kbd-name{display:inline-block;text-align:right;width:50px}kbd-map kbd-desc{padding-left:3px}sharecard-bg{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:rgba(0,0,0,.4);z-index:2147483647}sharecard{max-width:450px;background-color:#64b5f6}sharecard,sharecard-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-head{margin:25px;color:#fff;border-radius:10px;box-shadow:0 2px 6px 0 rgba(0,0,0,.2),0 25px 50px 0 rgba(0,0,0,.15)}sharecard-card{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column}sharecard-card,sharecard-top{display:-webkit-box;display:-ms-flexbox;display:flex}sharecard-top{-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:65px;background-color:#fff;color:#878787;font-size:25px;font-weight:500;border-top-left-radius:10px;border-top-right-radius:10px}sharecard-top span.logos{display:block;width:48px;height:48px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAMAAABg3Am1AAABU1BMVEUAAAAnNJMnNZI3Q5onNJInNJMnNJInNJMnNJI8SJ0tOZY/S55EUKAoNJI6RpwoNJNIU6InNJInNJImNJI7SJwmNJJ2fLUiMJFKVaNCTJ9faK1HUaJOWKVSXaUnNJNYY6pye7cmM5JXYKhwebMjMI8mL4719fW9vb0oNZP/UlLz8/QqN5TAwMAnNJPv7+/Pz8/q6+/p6enNzc3Kysry8vMsOJXc3env7/LU1uXo29vR0dHOzs7ExMTwjo73bW37XV3Aj1TCYELl5u3n5+fW2Obn6O7f4OrZ2+g0QJkxPpgvO5bh4uvS1OTP0ePCwsJQW6ZLVqTs7fHd3d3V1dXqv79VX6lET6A1TIxXUIBSgHxWQnpelHf+WVnopkXqbC7j5Ozi4uLDw8NGUaFATJ9SgH3r6+vGyd7BxNva2trX19ejqM2gpczHx8dze7Zha67Z2dlTgH1aXQeSAAAAJnRSTlMA6ff+497Y8NL+/fv49P379sqab/BeOiX06tzVy8m/tKqpalA7G6oKj0EAAAJlSURBVEjHndNXWxpBFIDhcS2ICRLAkt4Dx4WhLk0E6R0MYoIISrWX5P9f5cwSIRC2+T1czMV5n2FnZwn2eWONUqCAv3H2Uf5Ra1hx4+0WEXtDQW0fCPYJ1EffEfIV4CSROAE4jsePoTFsNmTJF/IeIHF2lgCIn57GodlqDWXBK7IwBYatVlMWFAildPKX7I3m74Z9fsCiQChoimoFQAz04Ad2gH1n9fv9n9hgMNDr9euLWD6fLxQKxaLfb7dTSlahbFVdEPwIQtrAihZQgyKCtCagbQe3xh0QFMgy5MR11+ewYY5/qlZ7vT2xu93ULKjbFLpiUxnIIwjgKmVTLDUFXMrAi2NJWCRLIthTBo4xyOLKpwyqU6CuDCI41hFBCVdOhyLw4FgJ1skCAiyl9BSHbCorgo6VJXTru5hrVCQS8Yr5xLzX59YJSFpVFwD9U0BGC3hGdFpATgRupTGe9R9I1b1ePBvXKDyvq/O/44LT4/E4BUbSCAwj8Evq6HlnOBprx6JhJz8Gktc7xeaP9ndY+0coQvCccFBD4JW60UIY50ciLOAODAQRVOeCHm4Q3Xks6uRDY+CQ+AR4T2wMYh6+jMCIQOp78CFoj0H7EQgIuhI3dGaHCrwgADwCPjJvA372GRigCJg49FUdk3D87pq3zp4SA5zc1Zh9DxfwkpjgUg5Mv+lbeE3McC8Lpu7SA3wk2xzcqL2tN5DfIsQC8HB7UamUy6FQOpTO5QKBQDZbKnWSyUzGjdWCwaDA8+7Le4BNgm3qQGWchYh9s5hNq6wVbBlbwhZYOp3OYOA4zmgEypnM2zj8ByIdedKrH8vDAAAAAElFTkSuQmCC");zoom:.8}sharecard-content{padding:15px;max-height:500px;font-size:20px;text-align:justify;background-color:#2196f3;overflow-x:hidden;overflow-y:auto}sharecard-via{padding:10px;font-size:10px;background-color:#2196f3}sharecard-footer{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;padding-right:5px;height:100px;background-color:#fff;color:#878787;font-size:15px;font-weight:500;border-bottom-left-radius:10px;border-bottom-right-radius:10px}sharecard-footer,sharecard-footer div{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sharecard-footer span.qrcode{display:block;width:100px;height:100px;margin:5px;background-repeat:no-repeat;background-position:50%;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADwAAAA8CAMAAAANIilAAAAA7VBMVEUAAAD///8ZGRnw8PBWVlb4+PgeHh719fVEREQlJSUODg6Ojo7Ly8v9/f1NTU2VlZUFBQV6enrCwsLy8vLh4eE0NDQLCwu8vLyXl5dxcXHa2trAwMCFhYVDQ0OysrKampo7OzssLCwICAioqKjJyckhISHu7u4/Pz9TU1NQUFBLS0tAQED6+vrS0tKRkZFISEgvLy+goKB+fn5vb29nZ2fm5uYbGxvk5OTX19d2dnZaWlre3t5hYWEyMjK5ubkoKCgVFRXQ0NDMzMzFxcW0tLSsrKykpKSMjIzq6urU1NSAgICvr6+cnJyHh4dsbGyfc25QAAAFkElEQVRIx4WXB3faMBCA74wHxgMMGAOh1MyyVyBAmtVmd/3/n1OdDtWstt/Li5JD35MtnU4CMnCIlkLEOpSKuMPhuI4FE444L9+dyv3zciad/rAjfU/yOPpGcjWS1NKSGsk29WTSD1IeYsIPkvsAJF+C5BIZkieYMNjJnsF4+JHk61wOSlVDyOIPqKBgZIxYTrqy/AmNtC1ps7yqlgE6dgYa1WqD5aV9SbKDbe6ZNnCq5A5ILlhGjEASIoawJdmHHo98AZLOnmxzKM9yK9Aht63FoAWBBmEgsEHnkfMgsZU8PJbpbXJd3MIep/Lg/MjbRqMRRuNtQ4Tthga5RiNzfmSWD97ZExQ64HhtgLb3CmbBGyj54vixjyeMsKjnV4AvOAHTwsHphKnH9toXki7Li3jLsgswizskv+c3PHKXe7ZHu5E/YMKcM2yqZIJkAclZTPClbJezivI1yTr4f+TeMib5qXxHsr7XtUFJDIc8pLAHA7Su4JXkd8ySnKZddQXH2NohswIutRu0Qu0jyS46JPugU+gISB1R8NBKWegVUsahTKEjAP9Bm5bKAc3DPlzjKaDvscE7PeEJu63WUg9a82tdA1O/ESupL9Cr6C1cXetjIe9zgQ4kvKLgHi6xC5LcGq9hhmiK0AYgUvLQtzm3n/x0jnum/Vo9j1jxg/pL3/f9W8isMOsv6/Ubf47rvl+u17nnZ1xQ+4iIXa6IpRVeimEEE3pnxO8kIz4CbFDyidVSpooBCCLLsj5noFlqUg2rwK0l+Anmm+VhCzKfrRHtqjGOLANxUKIUiYvFEcuaaZpXANniD5ZzpiBDTSRkuDJfWM6awxGuikUArp7fIOE7RlB6OygGTyhfsMyrtwDNIAkcp1YRhKC9Oh2IHUFQ6UPupnLL3icODaD5zVlUto7zhm1n7kmZ5kDSQBxykfZhD66eaQBoWriEGPcA182C4Crst90Z9NwvHgahDTALw/Ae4D500Pjq3oj/4sjtwcwVrCkkgB01HB8cdM0iIlWSr6IpNqFO+1mDHQFWORtO5EIi08b4jxy6giBsgKDnRnEYYdd9nIYvaLmuhS/h9DF5bEFr/7HTKAjUqWY1oUUBKgYEZdgIP6gJE2xQIWVvLhZBcAWx843kz87PDDi4cgR92s8/1FLpAGNeKiUbGtRQEIPkGb9TM1EF8MpCVEni7pIkkUdDs1ZcI/ZUer6YZg4WxTtqMmYsZJWebbOzEekZV4sCKaNhBaXQQ0NtjL71ZooNE1vWLfyyyFUbw7MsD0fWOFMSqAnbwj1Kuk0Aqp4aJ91MZhhvyS7+oQoMy5v63Jfoz/UYfPSiep2KQb5e4/gt1Ycdc7Se6jNyVbpuQNI08FrICQ6ccKnSXddrKCnqkqWFupJFAewKudSTBVAyBEjrLSXjCYnc5rrdQVl6VaiKqOTToi/kaSrlcW5fpGpgrlJTLvoGVxKDOg7PHzc6NLXOmuUHTZQhTWvS4T7T5ixPqGPz/EHXp/azkMeQoGOqBBOSq1gD4vwRe1culz8W8HlZKQt6Sjbm5XeS9eWizJw73HcsOW8mSpa0eT8zfK1w85LdtWKTf5dWfCPzMg5J+MBdsvvy6Q2QD/d91sfzouRz9zAdBp6HCcUzskccyBdKzjTC9ZE8HT8+JHLxtiE4d33Ud0uleOObvpXZk4E4/9h2sKD9t6oxgaCFxs9AHiI3wYJCndMbIMs9lLi7vEHFLxAUURyciOnTyzrLH6qSJwo+8CWuQIFL2wSoVyvQea/qtk2yvPtb4mekZMhJQkPwyvIzBbJGJD+jX3eGcfIFhWVmxsVAG5FMgSzm9y4wKL8aJdzvyctoTqEgep6K5lckWGM3uuuA5DadFvIhiTzBL1xzVtT0UDEDxd9ldeutcJLoyvUaoPgNdiqckZLamd0AAAAASUVORK5CYII=")}sharecard-control{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;padding:0 19px;height:80px;background-color:#fff}simpread-snapshot{width:100%;height:100%;cursor:move;z-index:2147483645}simpread-snapshot,sr-mask{position:fixed;left:0;top:0}sr-mask{background-color:rgba(0,0,0,.1)}.simpread-feedback,.simpread-urlscheme{position:fixed;right:20px;bottom:20px;z-index:2147483646}simpread-feedback,simpread-urlscheme{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:20px 20px 0;width:500px;color:rgba(51,51,51,.87);background-color:#fff;border-radius:3px;box-shadow:0 0 2px rgba(0,0,0,.12),0 2px 2px rgba(0,0,0,.26);overflow:hidden;-webkit-transform-origin:bottom;transform-origin:bottom;-webkit-transition:all .6s ease;transition:all .6s ease}simpread-feedback *,simpread-urlscheme *{font-size:12px!important;box-sizing:border-box}simpread-feedback.active,simpread-urlscheme.active{-webkit-animation-name:srFadeInUp;animation-name:srFadeInUp;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback.hide,simpread-urlscheme.hide{-webkit-animation-name:srFadeInDown;animation-name:srFadeInDown;-webkit-animation-duration:.45s;animation-duration:.45s;-webkit-animation-fill-mode:both;animation-fill-mode:both}simpread-feedback sr-fb-label,simpread-urlscheme sr-urls-label{width:100%}simpread-feedback sr-fb-head,simpread-urlscheme sr-urls-head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin-bottom:5px;width:100%}simpread-feedback sr-fb-content,simpread-urlscheme sr-urls-content{margin-bottom:5px;width:100%}simpread-feedback sr-urls-footer,simpread-urlscheme sr-urls-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-fb-a,simpread-urlscheme sr-urls-a{color:#2163f7;cursor:pointer}simpread-feedback text-field-state,simpread-urlscheme text-field-state{border-top:none rgba(34,101,247,.8)!important;border-left:none rgba(34,101,247,.8)!important;border-right:none rgba(34,101,247,.8)!important;border-bottom:2px solid rgba(34,101,247,.8)!important}simpread-feedback switch,simpread-urlscheme switch{margin-top:0!important}@-webkit-keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@keyframes srFadeInUp{0%{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}to{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}}@-webkit-keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}@keyframes srFadeInDown{0%{opacity:1;-webkit-transform:translateY(0);transform:translateY(0)}to{opacity:0;-webkit-transform:translateY(100px);transform:translateY(100px)}}simpread-feedback sr-fb-head{font-weight:700}simpread-feedback sr-fb-content{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column}simpread-feedback sr-fb-content,simpread-feedback sr-fb-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal}simpread-feedback sr-fb-footer{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;width:100%}simpread-feedback sr-close{position:absolute;right:20px;cursor:pointer;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s;z-index:200}simpread-feedback sr-close:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-top:10px}simpread-feedback sr-stars i{margin-right:10px;cursor:pointer}simpread-feedback sr-stars i svg{-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}simpread-feedback sr-stars i svg:hover{-webkit-transform:rotate(-15deg) scale(1.3);transform:rotate(-15deg) scale(1.3)}simpread-feedback sr-stars i.active svg{-webkit-transform:rotate(0) scale(1);transform:rotate(0) scale(1)}simpread-feedback sr-emojis{display:block;height:100px;overflow:hidden}simpread-feedback sr-emoji{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-transition:.3s;transition:.3s}simpread-feedback sr-emoji>svg{margin:15px 0;width:70px;height:70px;-ms-flex-negative:0;flex-shrink:0}simpread-feedback sr-stars-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin:10px 0 20px}',""]);
},63:function(e,t,n){var o=n(60);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},64:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(){return f}function a(){return f.unshift({name:"Readwise.io",value:"readwise",type:"sync"}),f.unshift({name:"Hypothes.is",value:"hypothes",type:"sync"}),f}function i(e){var t=$.extend(!0,{},$.isEmptyObject(s.storage.simpread.read.actionbar)?c.readItems:s.storage.simpread.read.actionbar),n=void 0;return"hypothes"==e?n={name:e,color:"#6a2c70",icon:'<i class="fas fa-highlighter"></i>'}:"readwise"==e&&(n={name:e,color:"#3f72af",icon:'<i class="fas fa-sync"></i>'}),void 0==n&&void 0!=c.readItems.readlater.items[e]&&(n=t.readlater.items[e]),void 0==n&&void 0!=c.readItems.download.items[e]&&(n=t.download.items[e]),void 0==n&&void 0!=c.readItems.send.items[e]&&(n=t.send.items[e]),void 0==n&&e.startsWith("custom_")&&s.storage.option.export.custom.forEach(function(t){t=JSON.parse(t),"custom_"+t.name==e&&(n=t,n.icon=t.icon?t.icon:'<i class="fas fa-cloud-upload-alt"></i>',n.color="#D4237A")}),void 0==n&&e.startsWith("webhooks_")&&s.storage.option.export.webhooks.forEach(function(t){t=JSON.parse(t),"webhooks_"+t.name==e&&(n=t,n.icon=t.icon?t.icon:'<i class="fas fa-cloud-upload-alt"></i>',n.color="#00BCD4")}),void 0==n&&e.startsWith("webdav_")&&(n={name:e,color:"#00BCD4",icon:p.IconPath("webdav_icon")}),void 0==n&&e.startsWith("automated_")&&s.storage.option.automated.forEach(function(t){"automated_"+t.id==e&&(n=t,n.icon=t.icon,n.color=t.bgColor)}),void 0==n&&(n={name:e,color:"#D4237A",icon:'<i class="fas fa-cloud-upload-alt"></i>'}),n.name=n.name.replace("导出为 ","").replace("保存到 ","").replace("webhook_","").replace("custom_","").replace("webdav_",""),n.icon&&n.icon.startsWith("chrome")&&(n.icon=n.icon.replace(/chrome-extension:\/\/\w+/,"chrome-extension://"+u.browser.runtime.id)),n}Object.defineProperty(t,"__esModule",{value:!0}),t.addSyncService=t.getAllService=t.findService=void 0;var s=n(4),l=n(27),c=o(l),d=n(9),p=o(d),u=n(3),f=[];s.storage.Read(function(){s.storage.Safe(function(){Object.keys(c.readItems.readlater.items).forEach(function(e){!["save"].includes(e)&&f.push({value:e,name:c.readItems.readlater.items[e].name.replace("保存到 ",""),type:"readlater"})}),Object.keys(c.readItems.send.items).forEach(function(e){f.push({value:e,name:c.readItems.send.items[e].name.replace("导出为 ","").replace("保存到 ",""),type:"send"})}),s.storage.secret.webdav.forEach(function(e){try{e=JSON.parse(e),f.push({name:e.name,value:"webdav_"+e.name,type:"webdav"})}catch(e){}}),s.storage.option.export.webhooks.forEach(function(e){try{e=JSON.parse(e),f.push({name:e.name,value:"webhook_"+e.name,type:"webhooks"})}catch(e){}}),Object.keys(c.readItems.download.items).forEach(function(e){f.push({value:e,name:c.readItems.download.items[e].name.replace("导出为 ","").replace("保存到 ",""),type:"download"})}),s.storage.option.export.custom.forEach(function(e){try{e=JSON.parse(e),f.push({name:e.name,value:"custom_"+e.name,type:"custom"})}catch(e){}}),s.storage.option.automated.forEach(function(e){"manual"==e.type&&f.push({name:e.name,value:"automated_"+e.id,type:"automated"})})})}),t.findService=i,t.getAllService=r,t.addSyncService=a},65:function(e,t){"use strict";function n(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function o(e){var t=new Map,n=function(e){e.forEach(function(n,o){var r={value:e.slice(0,o+1).join("/"),name:n,icon:'<i class="fas fa-tags"></i>',level:o},a=t.get(o)||[],i=a.findIndex(function(e){return e.name==n});0==o?r.pid=0:r.pid=t.get(o-1).filter(function(t){return t.name==e[o-1]})[0].id,i==-1?r.id=parseInt(1e6*Math.random()):r.id=a[i].id,o==e.length-1&&(r.icon='<i class="fas fa-hashtag"></i>'),i==-1&&a.push({id:r.id,pid:r.pid,name:r.name,value:r.value,level:r.level,icon:r.icon}),t.set(o,a)})},o=function(){for(var e=t.size,n=function(e){var n=t.get(e),o=t.get(e-1);n.forEach(function(e){o.forEach(function(t){t.id==e.pid&&(t.items=t.items?t.items.concat([e]):[e])})})},o=e-1;o>0;o--)n(o);return t.get(0)};return e.forEach(function(e){if(e.indexOf("/")>-1)n(e.split("/"));else{0==t.size&&t.set(0,[]);var o=t.get(0);o.findIndex(function(t){return t.name==e})==-1&&t.set(0,o.concat([{name:e,value:e,icon:'<i class="fas fa-hashtag"></i>',level:0,pid:0,id:parseInt(1e6*Math.random())}]))}}),o()}function r(e,t){var n=[];return t.forEach(function(t){var o=function(t,o,r){r&&r.forEach(function(r){if(r==e){var a=n.findIndex(function(e){return e.idx==t.idx});if(a==-1){var i=$.extend(!0,{},t);i.annotations=[],o&&i.annotations.push(o),n.push(i)}else{var s=n[a];s.annotations.push($.extend(!0,{},o))}}})};o(t,void 0,t.tags),t.annotations&&t.annotations.forEach(function(e){return o(t,e,e.tags)})}),n}function a(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=[];return t.forEach(function(t){var r=function(r){r&&r.forEach(function(r){!n&&(r=(r||"").toLowerCase()),n?r.startsWith(e)&&o.findIndex(function(e){return e.idx==t.idx})==-1&&o.push(t):r.includes(e)&&o.findIndex(function(e){return e.idx==t.idx})==-1&&o.push(t)})};r(t.tags),t.annotations&&t.annotations.forEach(function(e){return r(e.tags)})}),o}function i(e,t){var n=[];return t.forEach(function(t){var o=function(o){o&&o.forEach(function(o){e.includes(o)&&n.findIndex(function(e){return e.idx==t.idx})==-1&&n.push(t)})};o(t.tags),t.annotations&&t.annotations.forEach(function(e){return o(e.tags)})}),n}function s(e,t){var o=[];return t.forEach(function(t){var n=function(t){var n=!1;t&&t.forEach(function(t){e.includes(t)&&(n=!0)}),n&&(o=o.concat(t))};n(t.tags),t.annotations&&t.annotations.forEach(function(e){return n(e.tags)})}),[].concat(n(new Set(o)))}function l(e,t){for(var n=0;n<t.length;n++)if(t[n].idx==e)return t[n]}function c(e,t){for(var n=e.length,o=[],r=0,a=0;a<t.length;a++)if(e.includes(t[a].idx)&&(r++,o.push(t[a])),r>=n)return o;return o}function d(e,t){for(var n=0;n<t.length;n++){var o=t[n],r=o.annotations&&o.annotations.findIndex(function(t){return t.id==e});if(r>-1)return{unread:o,annote:o.annotations[r]}}return{unread:{},annote:{}}}function p(e,t){for(var n=e.length,o=[],r=0,a=0;a<t.length;a++){var i=t[a],s=i.annotations&&i.annotations.findIndex(function(t){return e.includes(t.id)});if(s>-1&&(r++,o.push({unread:i,annote:i.annotations[s]})),r>=n)return o}return o}function u(e,t){var n=[];return t.forEach(function(t){var o=function(o){o&&o.forEach(function(o){o.startsWith(e)&&n.findIndex(function(e){return e.id==t.id})==-1&&n.push(t)})};o(t.tags)}),n}function f(e,t){return"today"==e?t=t.filter(function(e){var t=new Date,n=new Date(e.create.replace(/年|月/gi,"-").replace("日",""));return t.getFullYear()==n.getFullYear()&&t.getMonth()==n.getMonth()&&t.getDate()==n.getDate()}):"yestoday"==e?t=t.filter(function(e){var t=new Date,n=t.getFullYear(),o=t.getMonth()+1,r=t.getDate(),a=864e5,i=+new Date(n+"-"+o+"-"+r+" 00:00:00"),s=+new Date(n+"-"+o+"-"+r+" 23:59:59")-a,l=+new Date(e.create.replace(/年|月/gi,"-").replace("日",""));return l+a>s&&l<i}):"week"==e?t=t.filter(function(e){var t=new Date,n=t.getFullYear(),o=t.getMonth()+1,r=t.getDate(),a=6048e5,i=+new Date(n+"-"+o+"-"+r+" 23:59:59"),s=+new Date(e.create.replace(/年|月/gi,"-").replace("日",""));return s+a>i}):"sunday"==e?!function(){var e=new Date,n=e.getTime(),o=e.getDay()||7,r=864e5,a=function(e,t){e=new Date(e);var n=e.getFullYear(),o=e.getMonth()+1,r=e.getDate();return+new Date(n+"-"+o+"-"+r+" "+t)},i=a(n-(o-1)*r,"00:00:00"),s=a(n+(7-o)*r,"23:59:59");t=t.filter(function(e){var t=+new Date(e.create.replace(/年|月/gi,"-").replace("日",""));return t>=i&&t<=s})}():"daily"==e?t=t.filter(function(e){var t=+new Date,n=864e5,o=+new Date(e.create.replace(/年|月/gi,"-").replace("日",""));return t-o<=n}):"nohighlight"==e?t=t.filter(function(e){return!e.annotations||0==e.annotations.length}):"notags"==e?t=t.filter(function(e){return!e.tags||0==e.tags.length}):"unarchive"==e?t=t.filter(function(e){return!e.archive}):"archive"==e?t=t.filter(function(e){return e.archive}):"share"==e?t=t.filter(function(e){return e.share}):"annoate"==e?!function(){var e=[];t.forEach(function(t){var n=function(n){var o=!1;n&&n.forEach(function(e){void 0==e.note&&(e.note=""),""==e.note&&(o=!0)}),o&&e.push(t)};n(t.annotations)}),t=e}():"img"==e||"code"==e?!function(){var n=[];t.forEach(function(t){var o=function(o){var r=!1;o&&o.forEach(function(t){return t.type==e&&(r=!0)}),r&&n.push(t)};o(t.annotations)}),t=n}():"note"==e&&!function(){var e=[];t.forEach(function(t){var n=function(n){var o=!1;n&&n.forEach(function(e){return e.note&&e.note.length>0&&(o=!0)}),o&&e.push(t)};t.note&&t.note.length>0&&e.push(t),n(t.annotations)}),t=e}(),t}function m(e){var t=this,o=[];return e.forEach(function(e){e.tags&&(o=o.concat(e.tags)),e.annotations&&e.annotations.forEach(function(e){return o=o.concat(e.tags)})}),o=[].concat(n(new Set(o))),this.tags=[],o.forEach(function(e){return t.tags.push({name:e,value:e})}),o}Object.defineProperty(t,"__esModule",{value:!0}),t.getAllTags=o,t.getTagsbySlice=m,t.findUnReadbyTag=a,t.findUnReadbyTags=i,t.findCollectionbyTag=u,t.filter=f,t.findbyTag=r,t.findUnReadbyID=l,t.findUnReadbyIDs=c,t.findAnnotebyID=d,t.findAnnotebyIDs=p,t.findMentionsTagsbyTags=s},66:function(e,t){"use strict";var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(e){var t={init:function(t){var n={duration:200,dist:-100,shift:0,padding:0,fullWidth:!1,indicators:!1,noWrap:!1,onCycleTo:null,onActived:null};return t=e.extend(n,t),this.each(function(n){function o(){"undefined"!=typeof window.ontouchstart&&(D[0].addEventListener("touchstart",u),D[0].addEventListener("touchmove",f),D[0].addEventListener("touchend",m)),D[0].addEventListener("mousedown",u),D[0].addEventListener("mousemove",f),D[0].addEventListener("mouseup",m),D[0].addEventListener("mouseleave",m),D[0].addEventListener("click",d)}function r(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientX:e.clientX}function a(e){return e.targetTouches&&e.targetTouches.length>=1?e.targetTouches[0].clientY:e.clientY}function i(e){return e>=k?e%k:e<0?i(k+e%k):e}function s(n){M=!0,D.hasClass("scrolling")||D.addClass("scrolling"),null!=P&&window.clearTimeout(P),P=window.setTimeout(function(){M=!1,D.removeClass("scrolling"),D.find(".carousel-item").eq(i(x)),1!=P&&t.onActived&&t.onActived.call(this,e(".carousel .indicators").find(".active").index())},t.duration);var o,r,a,s,l,c,d,p=x;if(v="number"==typeof n?n:v,x=Math.floor((v+w/2)/w),a=v-x*w,s=a<0?1:-1,l=-s*a*2/w,r=k>>1,t.fullWidth?d="translateX(0)":(d="translateX("+(D[0].clientWidth-h)/2+"px) ",d+="translateY("+(D[0].clientHeight-b)/2+"px)"),H){var u=x%k,f=L.find(".indicator-item.active");f.index()!==u&&(f.removeClass("active"),L.find(".indicator-item").eq(u).addClass("active"))}for((!t.noWrap||x>=0&&x<k)&&(c=g[i(x)],e(c).hasClass("active")||(D.find(".carousel-item").removeClass("active"),e(c).addClass("active")),c.style[T]=d+" translateX("+-a/2+"px) translateX("+s*t.shift*l*o+"px) translateZ("+t.dist*l+"px)",c.style.zIndex=0,j=t.fullWidth?1:1-.2*l,c.style.opacity=j,c.style.display="block"),o=1;o<=r;++o)t.fullWidth?($=t.dist,j=o===r&&a<0?1-l:1):($=t.dist*(2*o+l*s),j=1-.2*(2*o+l*s)),(!t.noWrap||x+o<k)&&(c=g[i(x+o)],c.style[T]=d+" translateX("+(t.shift+(w*o-a)/2)+"px) translateZ("+$+"px)",c.style.zIndex=-o,c.style.opacity=j,c.style.display="block"),t.fullWidth?($=t.dist,j=o===r&&a>0?1-l:1):($=t.dist*(2*o-l*s),j=1-.2*(2*o-l*s)),(!t.noWrap||x-o>=0)&&(c=g[i(x-o)],c.style[T]=d+" translateX("+(-t.shift+(-w*o-a)/2)+"px) translateZ("+$+"px)",c.style.zIndex=-o,c.style.opacity=j,c.style.display="block");if((!t.noWrap||x>=0&&x<k)&&(c=g[i(x)],c.style[T]=d+" translateX("+-a/2+"px) translateX("+s*t.shift*l+"px) translateZ("+t.dist*l+"px)",c.style.zIndex=0,j=t.fullWidth?1:1-.2*l,c.style.opacity=j,c.style.display="block"),p!==x&&"function"==typeof t.onCycleTo){var m=D.find(".carousel-item").eq(i(x));t.onCycleTo.call(this,e(".carousel .indicators").find(".active").index(),m,z)}}function l(){var e,t,n,o;e=Date.now(),t=e-O,O=e,n=v-N,N=v,o=1e3*n/(1+t),S=.8*o+.2*S}function c(){var e,n;C&&(e=Date.now()-O,n=C*Math.exp(-e/t.duration),n>2||n<-2?(s(_-n),requestAnimationFrame(c)):s(_))}function d(n){if(z)return n.preventDefault(),n.stopPropagation(),!1;if(!t.fullWidth){var o=e(n.target).closest(".carousel-item").index(),r=x%k-o;0!==r&&(n.preventDefault(),n.stopPropagation()),p(o)}}function p(e){var n=x%k-e;t.noWrap||(n<0?Math.abs(n+k)<Math.abs(n)&&(n+=k):n>0&&Math.abs(n-k)<n&&(n-=k)),n<0?D.trigger("carouselNext",[Math.abs(n)]):n>0&&D.trigger("carouselPrev",[n])}function u(e){e.preventDefault(),y=!0,z=!1,R=!1,E=r(e),A=a(e),S=C=0,N=v,O=Date.now(),clearInterval(I),I=setInterval(l,100)}function f(e){var t,n,o,i;if(y)if(t=r(e),n=a(e),o=E-t,i=Math.abs(A-n),i<30&&!R)(o>2||o<-2)&&(z=!0,E=t,s(v+o));else{if(z)return e.preventDefault(),e.stopPropagation(),!1;R=!0}if(z)return e.preventDefault(),e.stopPropagation(),!1}function m(e){if(y)return y=!1,clearInterval(I),_=v,(S>10||S<-10)&&(C=.9*S,_=v+C),_=Math.round(_/w)*w,t.noWrap&&(_>=w*(k-1)?_=w*(k-1):_<0&&(_=0)),C=_-v,O=Date.now(),requestAnimationFrame(c),z&&(e.preventDefault(),e.stopPropagation()),!1}var g,h,b,v,x,y,w,k,E,A,C,_,S,M,T,N,O,I,z,R,j,$,L=e('<ul class="indicators"></ul>'),P=null,D=e(this),H=D.attr("data-indicators")||t.indicators;return t.fullWidth&&(t.dist=0,H&&D.find(".carousel-fixed-item").addClass("with-indicators")),D.hasClass("initialized")?(e(window).trigger("resize"),e(this).trigger("carouselNext",[1e-6]),!0):(D.addClass("initialized"),y=!1,v=_=0,g=[],h=D.find(".carousel-item").first().innerWidth(),b=D.find(".carousel-item").first().innerHeight(),w=2*h+t.padding,D.find(".carousel-item").each(function(t){if(g.push(e(this)[0]),H){var n=e('<li class="indicator-item"></li>');0===t&&n.addClass("active"),n.click(function(t){t.stopPropagation();var n=e(this).index();p(n)}),L.append(n)}}),H&&D.append(L),k=g.length,T="transform",["webkit","Moz","O","ms"].every(function(e){var t=e+"Transform";return"undefined"==typeof document.body.style[t]||(T=t,!1)}),o(),s(v),e(this).on("carouselNext",function(e,t){void 0===t&&(t=1),_=w*Math.round(v/w)+w*t,v!==_&&(C=_-v,O=Date.now(),requestAnimationFrame(c))}),e(this).on("carouselPrev",function(e,t){void 0===t&&(t=1),_=w*Math.round(v/w)-w*t,v!==_&&(C=_-v,O=Date.now(),requestAnimationFrame(c))}),void e(this).on("carouselSet",function(e,t){void 0===t&&(t=0),p(t)}))})},next:function(t){e(this).trigger("carouselNext",[t])},prev:function(t){e(this).trigger("carouselPrev",[t])},set:function(t){e(this).trigger("carouselSet",[t])}};e.fn.carousel=function(o){return t[o]?t[o].apply(this,Array.prototype.slice.call(arguments,1)):"object"!==("undefined"==typeof o?"undefined":n(o))&&o?void e.error("Method "+o+" does not exist on jQuery.carousel"):t.init.apply(this,arguments)}}(jQuery)},71:function(e,t,n){var o=n(106);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},72:function(e,t,n){(function(e,o){"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function s(t,n,r,a){0==$(".sr-alertgp").length&&$("html").append('<div class="sr-alertgp"></div>'),o.render(e.createElement(d,{state:t,code:n+"",message:r,onAction:function(e){return a(e)}}),$(".sr-alertgp")[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0;var l=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),c=n(3);n(112);var d=function(t){function n(){return r(this,n),a(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return i(n,t),l(n,[{key:"close",value:function(){$(".sr-alertgp .alert").css({"animation-name":"fadeOutDown"}).on("animationend",function(e){o.unmountComponentAtNode($(".sr-alertgp")[0]),$(".sr-alertgp").remove()})}},{key:"onReturnClick",value:function(e){this.props.onAction({state:this.props.state,code:this.props.code,type:e}),this.close()}},{key:"componentDidMount",value:function(){var e=0,t=setInterval(function(){e>=100?(clearInterval(t),t=void 0,e=0,$(".flag img").addClass("swing")):(e+=10,$(".loading .progress .circle").attr("stroke-dasharray",e+", 100"),$(".loading .progress .percentage").text(e+"%"))},200)}},{key:"render",value:function(){var t=this;return e.createElement("sr-alert",{class:"alert notification","data-state":this.props.state},e.createElement("sr-alert-icon",{class:"sr-alert-icon"},e.createElement("sr-alert-load",{class:"loading"},e.createElement("svg",{viewBox:"0 0 36 36",className:"progress"},e.createElement("path",{className:"circle-bg",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}),e.createElement("path",{className:"circle",strokeDasharray:"0, 100",d:"M18 2.0845 a 15.9155 15.9155 0 0 1 0 31.831 a 15.9155 15.9155 0 0 1 0 -31.831"}))),e.createElement("sr-alert-flag",{class:"flag"},e.createElement("img",{src:c.browser.runtime.getURL("assets/images/alert_"+this.props.state+".svg")}))),e.createElement("sr-alert-content",{class:"content"},this.props.message||"当前发生了未知错误，请稍后再试。"),e.createElement("ar-alert-footer",{class:"actionbar"},e.createElement("sr-alert-button",{class:"return md-waves-effect",onClick:function(){return t.onReturnClick("exit")}},"退　出"),["-1002","-1003","-1004","-1005","-1007","-1009"].includes(this.props.code)&&e.createElement("sr-alert-button",{class:"return md-waves-effect",onClick:function(){return t.onReturnClick("contact")}},"联系管理员")))}}]),n}(e.Component);d.defaultProps={state:"",code:-1,message:void 0},t.Render=s}).call(t,n(2),n(13))},73:function(e,t,n){(function(e){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(){return!(0==s.storage.option.automated.length||l.auth.lock&&s.storage.option.automated.length>0&&((new e).Render({type:2,content:"嗨，此账户为基础账户，但发现你 <b>已使用自动化功能</b>，此功能为高级账户功能，如已是高级账户，请在选项页右上角 <b>仅授权当前设备</b>。",state:"holdon",action:"升级",cancel:"授权",callback:function(e){"action"==e?f.Render(!0,l.auth.token,function(e){}):"cancel"==e&&c.browser.runtime.sendMessage(p.Add(p.MESSAGE_ACTION.new_tab,{url:c.browser.extension.getURL("options/options.html")}))}}),1))}function a(e,t,n){var o=0,r=e.length,a=function o(a){1!=e[a].disable&&t(e[a].value),a++,a>=r?n():setTimeout(function(){o(a)},1e3)};a(o)}function i(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"auto",r=arguments[3],i=s.storage.option.automated.filter(function(e){return e.type==o&&e.target==(t?"unreader":"annote")});if(r){var l=i.findIndex(function(e){return e.id==r});if(l>-1){var c=i[l];i=[],i.push(c)}}if(0!=i.length){var d=0,p=void 0,u=i.length,f=function o(r){a(i[r].action,n,function(){r++,r>=u?(t&&p.complete(),t&&(new e).Render({type:1,content:"已完成全部自动化保存服务",delay:2e3})):setTimeout(function(){o(r)},1e3)})};setTimeout(function(){t&&(p=(new e).Render({content:"已启动您设置的自动化保存服务，请稍等...",state:"loading"})),f(d)},1e3)}}Object.defineProperty(t,"__esModule",{value:!0}),t.Run=t.Verify=void 0;var s=n(4),l=n(21),c=n(3),d=n(6),p=o(d),u=n(36),f=o(u);t.Verify=r,t.Run=i}).call(t,n(7))},85:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,':root{--sr-annote-color-0:#b4d9fb;--sr-annote-color-1:#ffeb3b;--sr-annote-color-2:#a2e9f2;--sr-annote-color-3:#a1e0ff;--sr-annote-color-4:#a8ea68;--sr-annote-color-5:#ffb7da}[sr-annote-bg-color]{color:inherit}[sr-annote-bg-color][data-color-type="0"]{background-color:var(--sr-annote-color-0)}[sr-annote-bg-color][data-color-type="1"]{background-color:var(--sr-annote-color-1)}[sr-annote-bg-color][data-color-type="2"]{background-color:var(--sr-annote-color-2)}[sr-annote-bg-color][data-color-type="3"]{background-color:var(--sr-annote-color-3)}[sr-annote-bg-color][data-color-type="4"]{background-color:var(--sr-annote-color-4)}[sr-annote-bg-color][data-color-type="5"]{background-color:var(--sr-annote-color-5)}[sr-annote-bb-color][data-color-type="1"]{border-bottom-color:var(--sr-annote-color-1)}[sr-annote-bb-color][data-color-type="2"]{border-bottom-color:var(--sr-annote-color-2)}[sr-annote-bb-color][data-color-type="3"]{border-bottom-color:var(--sr-annote-color-3)}[sr-annote-bb-color][data-color-type="4"]{border-bottom-color:var(--sr-annote-color-4)}[sr-annote-bb-color][data-color-type="5"]{border-bottom-color:var(--sr-annote-color-5)}[sr-annote-bl-color][data-color-type="1"]{border-left:5px solid var(--sr-annote-color-1)}[sr-annote-bl-color][data-color-type="2"]{border-left:5px solid var(--sr-annote-color-2)}[sr-annote-bl-color][data-color-type="3"]{border-left:5px solid var(--sr-annote-color-3)}[sr-annote-bl-color][data-color-type="4"]{border-left:5px solid var(--sr-annote-color-4)}[sr-annote-bl-color][data-color-type="5"]{border-left:5px solid var(--sr-annote-color-5)}[data-color-style="1"]{background-color:transparent!important;background-repeat:no-repeat;background-size:100% 100%}[data-color-style="1"][data-color-type="1"]{background-color:transparent!important;background-image:url('+n(149)+')}[data-color-style="1"][data-color-type="2"]{background-color:transparent!important;background-image:url('+n(150)+')}[data-color-style="1"][data-color-type="3"]{background-color:transparent!important;background-image:url('+n(151)+')}[data-color-style="1"][data-color-type="4"]{background-color:transparent!important;background-image:url('+n(152)+')}[data-color-style="1"][data-color-type="5"]{background-color:transparent!important;background-image:url('+n(153)+')}[data-color-style="2"]{background-color:transparent!important}[data-color-style="2"][data-color-type="1"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 50%,var(--sr-annote-color-1) 0)}[data-color-style="2"][data-color-type="2"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 50%,var(--sr-annote-color-2) 0)}[data-color-style="2"][data-color-type="3"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 50%,var(--sr-annote-color-3) 0)}[data-color-style="2"][data-color-type="4"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 50%,var(--sr-annote-color-4) 0)}[data-color-style="2"][data-color-type="5"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 50%,var(--sr-annote-color-5) 0)}[data-color-style="3"]{position:relative;background-color:transparent!important}[data-color-style="3"]:after{content:"";position:absolute;left:0;bottom:25px;height:8px;width:58px;border-radius:4px;opacity:.8;transition:all .3s}[data-color-style="3"][data-color-type="1"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 85%,var(--sr-annote-color-1) 0)}[data-color-style="3"][data-color-type="2"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 85%,var(--sr-annote-color-2) 0)}[data-color-style="3"][data-color-type="3"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 85%,var(--sr-annote-color-3) 0)}[data-color-style="3"][data-color-type="4"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 85%,var(--sr-annote-color-4) 0)}[data-color-style="3"][data-color-type="5"]{background-color:transparent!important;background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 85%,var(--sr-annote-color-5) 0)}sr-annote-note{position:relative;bottom:-5px;padding:0 4px;color:#fff;background-color:#333;font-weight:700;font-style:normal;font-family:arial,helvetica,clean,sans-serif;border-radius:5px;opacity:.8;cursor:pointer}sr-annote-note:after{content:"N"}pre.sr-annote+sr-annote-note{bottom:25px;right:25px}sr-annote-note:hover{opacity:1}sr-annote-note sr-annote-note-tip{position:absolute;left:0;top:0;padding:.5em 1em;max-width:400px;color:#fff;background:#101010;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;font-weight:400;font-style:normal;text-shadow:none;font-size:12px;text-indent:0;white-space:pre;z-index:10;border-radius:5px;box-shadow:0 0 10px rgba(0,0,0,.3);opacity:0;overflow:auto;pointer-events:none;z-index:20000;transition:all .18s ease-out .18s}sr-annote-note:hover sr-annote-note-tip{opacity:1;pointer-events:auto}sr-annote-note sr-annote-note-tip{overflow:hidden}sr-annote-note sr-annote-note-tip:hover{overflow:overlay}sr-annote-note sr-annote-note-tip::-webkit-scrollbar-track{background-color:transparent}sr-annote-note sr-annote-note-tip::-webkit-scrollbar{width:12px}sr-annote-note sr-annote-note-tip::-webkit-scrollbar-thumb{background-clip:padding-box;padding-top:80px;background-color:#ddd;border:3px solid transparent;border-radius:8px}',""])},88:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0});var i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},s=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),l=n(29),c=o(l),d=n(4),p=function(){function e(){a(this,e),this.list=d.storage.unrdist.filter(function(e){return!e.archive}),this.collections=d.storage.collections||[]}return s(e,[{key:"NewAnnote",value:function(){return{id:"",color:0,style:0,note:"",tags:[],type:"",html:"",text:"",annote:"",items:[]}}},{key:"NewCollection",value:function(){return{id:"",idx:"",img:"",bgColor:"",title:"",desc:"",note:"",tags:[],annoations:[]}}},{key:"Get",value:function(){var e=d.storage.unrdist.filter(function(e){return e.url==location.href.replace("?simpread_mode=read","").replace(/chrome(\S+)\/loader.html\?url=/gi,"")});this.unread=0==e.length?c.GetPageInfo():e[0],this.type=0==e.length?"add":"update",!this.unread.annotations&&(this.unread.annotations=[]),!this.unread.tags&&(this.unread.tags=[]),!this.unread.note&&(this.unread.note=""),d.storage.unread=this.unread}},{key:"AddAnnote",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=this.NewAnnote();this.unread.annotations.push(i({},o,e)),n&&this.Order(),this.Write(t)}},{key:"RemoveAnnote",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=this.unread.annotations.findIndex(function(t){return t.id==e});o!=-1&&this.unread.annotations.splice(o,1),o!=-1&&n&&this.Write(t),o==-1&&t&&t(!1)}},{key:"FindAnnote",value:function(e){var t=this.unread.annotations.findIndex(function(t){return t.id==e});this.annote=t!=-1?this.unread.annotations[t]:this.NewAnnote()}},{key:"Update",value:function(e,t){var n=this.unread.annotations.findIndex(function(t){return t.id==e.id}),o=this.unread.annotations[n];o?(this.unread.annotations.splice(n,1,e),this.Write(t)):t(!1)}},{key:"UpdateByKey",value:function(e,t){var n=this.unread.annotations.findIndex(function(t){return t.id==e.id}),o=this.unread.annotations[n];o?(o[e.key]=e.value,this.unread.annotations.splice(n,1,o),this.Write(t)):t(!1)}},{key:"GetAllTags",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[];d.storage.unrdist.forEach(function(e){e.tags&&(n=n.concat(e.tags)),e.annotations&&e.annotations.forEach(function(e){return n=n.concat(e.tags)})}),n=[].concat(r(new Set(n))),t?this.tags=n:(this.tags=[],n.forEach(function(t){return e.tags.push({name:t,value:t})}))}},{key:"Write",value:function(e){var t=this;d.storage.UnRead(this.type,this.unread,function(n){n&&(t.type="update"),e&&e(n)})}},{key:"GetCollectionsAllTags",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[];this.collections.forEach(function(e){e.tags&&(n=n.concat(e.tags))}),n=[].concat(r(new Set(n))),t?this.ctags=n:(this.ctags=[],n.forEach(function(t){return e.ctags.push({name:t,value:t})}))}},{key:"GetCollectionNames",value:function(){var e=[];return this.collections.forEach(function(t){return e.push({value:t.id,name:t.title})}),e}},{key:"WriteCollection",value:function(e,t,n){d.storage.Collections(e,t,function(e){n&&n(e)})}},{key:"Order",value:function(){var e=this,t=[],n=[];$("sr-rd-content [data-color-type]").map(function(e,t){var o=$(t).attr("data-id");!n.includes(o)&&n.push(o)}),n.forEach(function(n){var o=e.unread.annotations.findIndex(function(e){return e.id==n});t.push(e.unread.annotations[o])}),this.unread.annotations=t}}]),e}();t.default=p},89:function(e,t,n){(function(e){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(t,"__esModule",{value:!0}),t.promo=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(114);var i=n(3),s=n(6),l=o(s),c=!0,d=function(){function t(){var e=this;r(this,t),this.positions={},i.browser.runtime.sendMessage(l.Add(l.MESSAGE_ACTION.promo_storage),function(t){var n=t.promo,o=t.date,r=new Date,a=location.protocol;if("chrome-extension:"==a&&(!n||+r-+new Date(o)>6048e5))e.Remote();else if(n){var i=JSON.parse(n);i.forEach(function(t){e.positions[t.position]=t})}})}return a(t,[{key:"endpoint",get:function(){return"https://simpread-1254315611.file.myqcloud.com/static"}}]),a(t,[{key:"Remote",value:function(){var e=this;$.ajax({url:this.endpoint+"/promo/main.json?"+Math.round(+new Date),method:"GET"}).done(function(t,n,o){t&&t.length>0&&(localStorage.setItem("simpread-promo-storage",JSON.stringify(t)),localStorage.setItem("simpread-promo-date",new Date),t.forEach(function(t){e.positions[t.position]=t}))}).fail(function(e){})}},{key:"Rule",value:function(e,t){if(this.rule=this.positions[e],!this.rule)return!1;if("first"==this.rule.duration&&1==t)return!0;if(this.rule.duration.indexOf("::")>-1){var n=+new Date(this.rule.duration.split("::")[0]),o=+new Date(this.rule.duration.split("::")[1]),r=+new Date;return r>=n&&r<=o}return!1}},{key:"Verify",value:function(e){var t=this;i.browser.runtime.sendMessage(l.Add(l.MESSAGE_ACTION.promo,{id:this.rule.id,type:"read"}),function(n){var o=new Date,r=o.getFullYear(),a=o.getMonth()+1,s=o.getDate(),c=r+"-"+a+"-"+s;"no"!=n&&n!=c&&e(),n&&"no"!=n&&i.browser.runtime.sendMessage(l.Add(l.MESSAGE_ACTION.promo,{type:"write",id:t.rule.id,status:c}))})}},{key:"Close",value:function(){$("sr-promo-bg sr-promo").css({
"animation-name":"fadeOutDown"}).on("animationend",function(e){$("sr-promo-bg").remove()})}},{key:"Notify",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){var t=this;c&&(new e).Render({content:this.rule.message,action:"查看优惠",cancel:"以后再说",callback:function(e){c=!1,"cancel"==e?t.ShowNext():t.Render()}})})},{key:"ShowNext",value:function(){var e=new Date,t=e.getFullYear(),n=e.getMonth()+1,o=e.getDate(),r=t+"-"+n+"-"+o;i.browser.runtime.sendMessage(l.Add(l.MESSAGE_ACTION.promo,{type:"write",id:this.rule.id,status:r}))}},{key:"Render",value:function(){var e=this,t=["option","unreader"].includes(this.rule.position)?"body":".simpread-read-root",n="<sr-promo-notice>\n                            <sr-promo-notice-title>关于弹窗的一些简单规则说明</sr-promo-notice-title>\n                            <sr-promo-notice-desc>我知道你（甚至我自己）都不喜欢任何位置的促销，但为了让有需要的朋友知道，所以制定了一些简单并不打扰你的规则：</sr-promo-notice-desc>\n                            <sr-promo-notice-content>1. 由于简悦不会随意所以降价，因此此位置的信息 <b>仅在涨价前弹出</b>。</sr-promo-notice-content>\n                            <sr-promo-notice-content>2. 使用了 <b>不再显示</b> 后，直到有新的涨价信息前都不会打扰到你。</sr-promo-notice-content>\n                            <sr-promo-notice-content>3. 使用了 <b>我再想想</b> 后，只有在新的一天才会出现（仅且一次）。</sr-promo-notice-content>\n                      </sr-promo-notice>",o='<sr-promo-bg data-type="'+this.rule.position+'">\n                        <sr-promo>\n                            <a target="_blank"><img src="'+(this.endpoint+this.rule.banner)+'"/></a>\n                            <sr-promo-footer>\n                                <sr-promo-a class="md-waves-effect later">我再想想</sr-promo-a>\n                                <sr-promo-a class="md-waves-effect cancel">不再展示</sr-promo-a>\n                                <sr-promo-tip class="md-waves-effect">展示规则</sr-promo-tip>\n                            </sr-promo-footer>\n                        </sr-promo>\n                      </sr-promo-bg>';$(t).find("sr-promo-bg").length>0||($(t).append(o),$("sr-promo a").on("click",function(){"internal"==e.rule.link?location.protocol.startsWith("http")?i.browser.runtime.sendMessage(l.Add(l.MESSAGE_ACTION.new_tab,{url:i.browser.extension.getURL("options/options.html#account?mode=upgrade")})):setTimeout(function(){location.href=location.origin+"/options/options.html#account?mode=upgrade",window.dispatchEvent(new CustomEvent(l.MESSAGE_ACTION.turn_tab,{detail:{page:7}})),setTimeout(function(){return $(".card.pro .status.unlock").click()},300)},500):i.browser.runtime.sendMessage(l.Add(l.MESSAGE_ACTION.new_tab,{url:e.rule.link})),$("sr-promo-a.later").click()}),$("sr-promo-a").on("click",function(t){var n=void 0;if($(t.currentTarget).hasClass("later")){var o=new Date,r=o.getFullYear(),a=o.getMonth()+1,s=o.getDate();n=r+"-"+a+"-"+s}else n="no";i.browser.runtime.sendMessage(l.Add(l.MESSAGE_ACTION.promo,{type:"write",id:e.rule.id,status:n})),e.Close()}),$("sr-promo-tip").on("click",function(e){$("sr-promo-tip").hasClass("active")?$("sr-promo-bg sr-promo-notice").css({"animation-name":"fadeOutDown"}).on("animationend",function(e){$("sr-promo-notice").remove(),$("sr-promo-tip").text("展示规则")}):($("sr-promo-bg").append(n),$("sr-promo-tip").text("关闭规则")),$("sr-promo-tip").toggleClass("active")}),this.ShowNext())}}]),t}(),p=new d;t.promo=p}).call(t,n(7))},102:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,"@-webkit-keyframes fadeInUp{0%{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes fadeInUp{0%{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes fadeOutDown{0%{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}to{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@keyframes fadeOutDown{0%{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}to{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}.sr-alertgp{position:fixed;left:0;top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;background-color:rgba(51,51,51,.8);z-index:2147483647}.sr-alertgp .alert{min-width:400px;min-height:400px;width:650px;background-color:#fff;border-radius:4px;box-shadow:0 14px 45px rgba(0,0,0,.247059);-webkit-animation-name:fadeInUp;animation-name:fadeInUp;-webkit-animation-duration:.8s;animation-duration:.8s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.sr-alertgp .alert,.sr-alertgp .alert .loading{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.sr-alertgp .alert .loading{position:relative;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:100%;height:35%;background-color:transparent}.alert .loading .progress{display:block;margin:10px auto;max-width:80%;max-height:250px;width:20%}.alert .loading .progress .percentage{fill:#666;font-family:sans-serif;font-size:.5em;text-anchor:middle}.alert .loading .progress .circle-bg{fill:none;stroke:#eee;stroke-width:3.8}.alert .loading .progress .circle{fill:none;stroke-width:2.8;stroke-linecap:round;stroke:#1dba90;-webkit-transition:all .2s ease-in-out;transition:all .2s ease-in-out}@-webkit-keyframes scaleAnimation{0%{opacity:0;-webkit-transform:scale(1.5);transform:scale(1.5)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@keyframes scaleAnimation{0%{opacity:0;-webkit-transform:scale(1.5);transform:scale(1.5)}to{opacity:1;-webkit-transform:scale(1);transform:scale(1)}}@-webkit-keyframes fadeOut{0%{opacity:1}to{opacity:0}}@keyframes fadeOut{0%{opacity:1}to{opacity:0}}@-webkit-keyframes fadeIn{0%{opacity:0}to{opacity:1}}@keyframes fadeIn{0%{opacity:0}to{opacity:1}}.sr-alertgp .alert .close{position:absolute;top:0;right:0;z-index:2}.sr-alertgp .alert .close:hover{-webkit-transform:rotate(270deg);transform:rotate(270deg);-webkit-transition:all .25s ease-out;transition:all .25s ease-out}.sr-alertgp .alert .sr-alert-icon img{max-width:650px;width:100%;-webkit-transform:scale(.7);transform:scale(.7);-webkit-transition:all .5s ease-out;transition:all .5s ease-out}.sr-alertgp .alert .actionbar{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:20px;width:80%;height:50px;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) 0ms;transition:all 1s cubic-bezier(.23,1,.32,1) 0ms}.sr-alertgp .alert .actionbar,.sr-alertgp .alert.notification{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.sr-alertgp .alert.notification{width:500px;min-height:350px}.sr-alertgp .alert.notification[data-state=siren]{background-image:-webkit-radial-gradient(circle farthest-corner at 10% 20%,#cd212a 0,#ec5f05 90%);background-image:radial-gradient(circle farthest-corner at 10% 20%,#cd212a 0,#ec5f05 90%)}.sr-alertgp .alert.notification[data-state=lock]{background-image:-webkit-radial-gradient(circle farthest-corner at 10% 20%,#8451a1 0,rgba(132,81,161,.83) 90%);background-image:radial-gradient(circle farthest-corner at 10% 20%,#8451a1 0,rgba(132,81,161,.83) 90%)}.sr-alertgp .alert.notification[data-state=warning]{background-image:-webkit-linear-gradient(left,#f2709c,#ff9472);background-image:linear-gradient(90deg,#f2709c,#ff9472)}.sr-alertgp .alert.notification[data-state=bug]{background-image:-webkit-linear-gradient(bottom,#ad5389,#3c1053);background-image:linear-gradient(0deg,#ad5389,#3c1053)}.sr-alertgp .alert.notification[data-state=safe],.sr-alertgp .alert.notification[data-state=server]{background-color:#8ec5fc;background-image:-webkit-linear-gradient(28deg,#8ec5fc,#e0c3fc);background-image:linear-gradient(62deg,#8ec5fc,#e0c3fc)}.sr-alertgp .alert.notification .sr-alert-icon{position:relative;width:100%}.sr-alertgp .alert.notification .loading .progress{padding:5px;background-color:#fff;border-radius:50%}.sr-alertgp .alert.notification .loading .progress .circle-bg{stroke:transparent}.sr-alertgp .alert.notification .loading .progress .circle{stroke-width:1}.sr-alertgp .alert.notification[data-state=siren] .loading .progress .circle{stroke:#cd212a}.sr-alertgp .alert.notification[data-state=lock] .loading .progress .circle{stroke:#8451a1}.sr-alertgp .alert.notification[data-state=warning] .loading .progress .circle{stroke:#f2709c}.sr-alertgp .alert.notification[data-state=bug] .loading .progress .circle{stroke:#ad5389}.sr-alertgp .alert.notification[data-state=safe] .loading .progress .circle,.sr-alertgp .alert.notification[data-state=server] .loading .progress .circle{stroke:#8ec5fc}.sr-alertgp .alert.notification .content{padding:10px 70px;width:100%;color:#fff;text-align:center;font-size:28.8px;font-size:1.8rem;box-sizing:border-box}.sr-alertgp .alert.notification .flag{position:absolute;left:0;top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;z-index:100000}.sr-alertgp .alert.notification .flag img{width:50px}.sr-alertgp .alert.notification[data-state=lock] .flag img{width:30px}.sr-alertgp .alert.notification .flag img.swing{-webkit-transform-origin:center;transform-origin:center;-webkit-animation-name:swing;animation-name:swing;-webkit-animation-duration:1s;animation-duration:1s}.sr-alertgp .alert.notification .actionbar{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:distribute;justify-content:space-around;margin:0}.sr-alertgp .alert.notification .return{padding:5px 32px;color:#333;background-color:#fff;font-size:15px;font-weight:700;border-radius:56px}.sr-alertgp .alert.notification .return:hover{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}@-webkit-keyframes swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}@keyframes swing{20%{-webkit-transform:rotate(15deg);transform:rotate(15deg)}40%{-webkit-transform:rotate(-10deg);transform:rotate(-10deg)}60%{-webkit-transform:rotate(5deg);transform:rotate(5deg)}80%{-webkit-transform:rotate(-5deg);transform:rotate(-5deg)}to{-webkit-transform:rotate(0deg);transform:rotate(0deg)}}",""])},104:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,"@-webkit-keyframes fadeInUp{0%{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes fadeInUp{0%{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}to{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes fadeOutDown{0%{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}to{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@keyframes fadeOutDown{0%{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}to{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}sr-promo-bg{position:fixed;right:15px;bottom:15px;z-index:2147483646}sr-promo,sr-promo-notice{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:10px;color:rgba(51,51,51,.87);background-color:#fff;border-radius:4px;box-shadow:0 12px 18px -6px rgba(0,0,0,.3);overflow:hidden;-webkit-transform-origin:bottom;transform-origin:bottom;-webkit-transition:all .6s ease;transition:all .6s ease;-webkit-animation-name:fadeInUp;animation-name:fadeInUp;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-fill-mode:both;animation-fill-mode:both}sr-promo img{width:220px;cursor:pointer}sr-promo-footer{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;padding:10px 0 0;width:100%}sr-promo-a{padding:5px 10px;color:#fff;font-size:12px;font-weight:700;border-radius:2px;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);cursor:pointer}sr-promo-a.later{background-color:#2196f3}sr-promo-a.cancel{background-color:#757575}sr-promo-tip{font-size:12px;padding:5px 10px;border-radius:2px}sr-promo-notice{position:absolute;top:10px;left:10px;right:10px;height:293px;padding-bottom:0;-webkit-box-pack:start;-ms-flex-pack:start;justify-content:flex-start;font-size:12px;border-radius:0;box-shadow:none;overflow-y:hidden}sr-promo-notice:hover{overflow-y:overlay}sr-promo-notice-title{font-weight:700;text-align:center;margin-bottom:5px;width:100%;font-size:14px}sr-promo-notice-content{margin-top:5px}",""])},105:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,".simpread-upgrade-root *{box-sizing:border-box}.simpread-upgrade-root{-webkit-transition:all .25s ease-out;transition:all .25s ease-out}.simpread-upgrade-root.open{background-color:rgba(51,51,51,.8)}.simpread-upgrade-root dialog-gp{position:relative}.simpread-upgrade-root dialog-gp .close{position:fixed;top:0;right:0;z-index:2}.simpread-upgrade-root dialog-gp .close:hover{-webkit-transform:rotate(270deg);transform:rotate(270deg);-webkit-transition:all .25s ease-out;transition:all .25s ease-out}.simpread-upgrade-root dialog-content{padding-bottom:80px!important;overflow-y:hidden}.simpread-upgrade-root dialog-content:hover{overflow-y:overlay}.simpread-upgrade-root dialog-content::-webkit-scrollbar-track{background-color:transparent}.simpread-upgrade-root dialog-content::-webkit-scrollbar{width:12px}.simpread-upgrade-root dialog-content::-webkit-scrollbar-thumb{background-clip:padding-box;padding-top:80px;background-color:#ddd;border:3px solid transparent;border-radius:8px}.simpread-upgrade-root .floating{position:absolute;left:0;right:0;bottom:0;height:80px;overflow-y:hidden}.simpread-upgrade-root .floating,.simpread-upgrade-root .floating .billing{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.simpread-upgrade-root .floating .billing{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:1px 40px;color:#fff;background-color:#4dbb7c;font-size:15px;font-weight:400;opacity:0;border-radius:30px;-webkit-transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;box-shadow:0 12px 18px -6px rgba(0,0,0,.3)}.simpread-upgrade-root .floating .billing.open{-webkit-animation-name:fadeInUp;animation-name:fadeInUp;-webkit-animation-duration:.3s;animation-duration:.3s;-webkit-animation-fill-mode:both;animation-fill-mode:both}.simpread-upgrade-root .floating .billing .sales{font-size:12px}.simpread-upgrade-root .floating .billing .rate{margin:0 5px}.simpread-upgrade-root .floating .billing .price{margin-left:2px;margin-right:5px}.upgrade{position:relative;color:rgba(51,51,51,.87);font-family:Hiragino Sans GB,Microsoft Yahei;text-shadow:none}.upgrade .head{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.upgrade .head img{margin-bottom:5px;width:60px;border-radius:9px;box-shadow:0 12px 18px -6px rgba(0,0,0,.3)}.upgrade .head .title{margin:10px 0;font-weight:700;font-size:15px}.upgrade .head .desc{width:70%;text-align:center;font-size:13px}.upgrade .features{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-ms-flex-pack:distribute;justify-content:space-around;-webkit-transition:height .2s cubic-bezier(.23,1,.32,1) 0ms;transition:height .2s cubic-bezier(.23,1,.32,1) 0ms}.upgrade .features.init{height:100px}.upgrade .features.init .base,.upgrade .features.init .pro{opacity:0}.upgrade .loading{position:absolute;left:0;top:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;background-color:#fff;z-index:1}.upgrade .loading span{width:50px;height:50px;opacity:.87}.features.error{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;color:inherit;font-size:14px}.features.error img{margin:10px 0;width:300px}.upgrade .base,.upgrade .pro{margin:20px 20px 13px;width:100%;text-align:center;opacity:1;-webkit-transition:opacity .2s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity .2s cubic-bezier(.23,1,.32,1) 0ms}.upgrade .pricecard{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;border-radius:4px;border:1px solid #eef1f4;position:relative}.upgrade .pro .pricecard{border:2px solid #4dbb7c;box-shadow:0 12px 18px -6px rgba(0,0,0,.3)}.upgrade .pricecard .mode{margin:20px 10px 10px;font-size:18px;font-weight:700}.upgrade .pricecard .sales{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;height:92px;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center}.upgrade .pricecard .discountrate{position:absolute;top:-12px;left:0;right:0}.upgrade .pricecard .discountrate .rate{padding:3px 10px;color:#fff;background-color:#4dbb7c;font-weight:700;font-size:13px;border-radius:10px}.upgrade .pricecard .desc{font-size:30px}.upgrade .pricecard .desc del{font-size:15px;font-weight:700;text-decoration:line-through}.upgrade .pricecard .price{position:relative;color:#4dbb7c;font-size:30px;font-weight:700}.upgrade .pricecard .message{position:relative;font-size:11px;font-weight:400;background-image:-webkit-linear-gradient(top,hsla(0,0%,100%,0) 50%,#ffeb3b 0);background-image:linear-gradient(180deg,hsla(0,0%,100%,0) 50%,#ffeb3b 0)}.upgrade .pricecard .countdown{margin-top:5px}.upgrade .pricecard .billing{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:30px 20%;padding:5px;color:#333;background-color:#e2e2e2;font-size:15px;font-style:normal;font-weight:700;border-radius:4px;cursor:pointer}.upgrade .pricecard .billing,.upgrade .pricecard .billing i{-webkit-transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms}.upgrade .pricecard .billing i{height:27px;line-height:22px;margin-left:5px}.upgrade .pricecard .billing:hover{box-shadow:0 3px 1px -2px rgba(0,0,0,.2),0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12)}.upgrade .pricecard .billing:hover i{-webkit-transform:rotate(180deg);transform:rotate(180deg)}.upgrade .pricecard .billing:hover .dropdown-price{opacity:1;-webkit-transform:scale(1);transform:scale(1)}.upgrade .pricecard .billing .dropdown-price{position:absolute;left:-41px;top:38px;-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;width:270px;color:rgba(51,51,51,.87);font-size:12px;text-shadow:none;box-sizing:border-box;border-radius:4px;box-shadow:0 8px 10px 1px rgba(0,0,0,.14),0 3px 14px 2px rgba(0,0,0,.12),0 5px 5px -3px rgba(0,0,0,.2);opacity:0;-webkit-transform:scaleY(0);transform:scaleY(0);-webkit-transform-origin:left top 0;transform-origin:left top 0;-webkit-transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms,-webkit-transform .45s cubic-bezier(.23,1,.32,1) 0ms;transition:opacity 1s cubic-bezier(.23,1,.32,1) 0ms,-webkit-transform .45s cubic-bezier(.23,1,.32,1) 0ms;transition:transform .45s cubic-bezier(.23,1,.32,1) 0ms,opacity 1s cubic-bezier(.23,1,.32,1) 0ms;transition:transform .45s cubic-bezier(.23,1,.32,1) 0ms,opacity 1s cubic-bezier(.23,1,.32,1) 0ms,-webkit-transform .45s cubic-bezier(.23,1,.32,1) 0ms;z-index:1}.upgrade .pricecard .billing .dropdown-price,.upgrade .pricecard .billing .dropdown-price .store{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff}.upgrade .pricecard .billing .dropdown-price .store{-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;padding:8px 24px 8px 16px;width:100%;-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) 0ms;transition:all 1s cubic-bezier(.23,1,.32,1) 0ms;cursor:pointer}.upgrade .pricecard .billing .dropdown-price .store:hover{background-color:#eee}.upgrade .pricecard .billing .dropdown-price .store:hover i{-webkit-transform:rotate(270deg) translateY(7px);transform:rotate(270deg) translateY(7px)}.upgrade .pricecard .billing .dropdown-price .store .names{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:start;-ms-flex-align:start;align-items:flex-start;width:135px}.upgrade .pricecard .billing .dropdown-price .store .des{width:100%;color:rgba(51,51,51,.56);text-align:left;font-size:10px;-webkit-transform:scale(.8) translateX(-17px);transform:scale(.8) translateX(-17px)}.upgrade .pricecard .billing .dropdown-price .store .num{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:46px}.upgrade .pricecard .billing .dropdown-price .store .tips{-webkit-transform:scale(.8);transform:scale(.8);color:#4dbb7c}.upgrade .pricecard .billing .dropdown-price .store i{-webkit-transform:rotate(270deg);transform:rotate(270deg)}.upgrade .base[data-enable=false] .pricecard,.upgrade .pro[data-enable=true] .pricecard{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:210px}.upgrade .base[data-enable=false] .pricecard .mode,.upgrade .pro[data-enable=true] .pricecard .mode{font-size:25px}.upgrade .base[data-enable=false] .pricecard .billing,.upgrade .base[data-enable=false] .pricecard .sales,.upgrade .pro[data-enable=true] .pricecard .billing .dropdown-price,.upgrade .pro[data-enable=true] .pricecard .billing i,.upgrade .pro[data-enable=true] .pricecard .discountrate,.upgrade .pro[data-enable=true] .pricecard .sales{display:none}.upgrade .pro[data-enable=true] .pricecard .billing{position:absolute;top:-28px;left:0;right:0;display:inherit;margin:10px 20%;border-radius:30px}.upgrade .pro .billing{color:#fff;background-color:#4dbb7c}.upgrade .features.diff{-webkit-box-orient:vertical;-ms-flex-direction:column;flex-direction:column;margin-top:20px}.upgrade .features.diff,.upgrade .features .feature{-webkit-box-direction:normal;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.upgrade .features .feature{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:unset;-ms-flex-pack:unset;justify-content:unset;margin:14px 20px 0;font-size:15px}.upgrade .features .feature.empty{height:27px}.upgrade .features .icon{margin-right:10px;width:15px}.upgrade .features .label{width:120px;font-size:15px;text-align:left}.upgrade .features a{color:inherit;cursor:auto}.upgrade .features a.active{padding-bottom:5px;border-bottom:1px dotted;-webkit-transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;cursor:pointer}.upgrade .features a.active:hover{color:#4285f4}.upgrade .features .label .remark{margin-left:5px;padding:2px 5px;background-color:#ffeb3b;font-size:12px;font-weight:400;border-radius:4px}.upgrade .features .label .remark.roadmap{background-color:#e2e2e2}.upgrade .ticket{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;font-size:13px}.upgrade .ticket .message{width:70%;text-align:center}.upgrade .ticket .line{margin:7px 0 0;width:100%;height:1px;background-image:-webkit-linear-gradient(.1deg,rgba(255,18,18,0) -2.8%,#e2e2e2 50.8%,rgba(0,159,8,0) 107.9%);background-image:linear-gradient(89.9deg,rgba(255,18,18,0) -2.8%,#e2e2e2 50.8%,rgba(0,159,8,0) 107.9%)}.upgrade .ticket .notice{margin:20px 20%;padding:5px 20px;color:#333;background-color:#e2e2e2;font-size:15px;font-weight:400;border-radius:4px}.upgrade .ticket .content{margin:0 0 13px;width:80%}.upgrade .ticket .content li{margin-bottom:6px}.upgrade .ticket .content li:last-child{margin-bottom:0}.upgrade .ticket .last{display:-webkit-box;display:-ms-flexbox;display:flex;-ms-flex-pack:distribute;justify-content:space-around;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:20px 0;width:100%}.upgrade .carousels{margin:20px 20px 13px}.upgrade .carousel.carousel-slider{height:420px;border-radius:4px;box-shadow:0 12px 18px -6px rgba(0,0,0,.3)}.upgrade .carousels setion{position:relative}.upgrade .carousels setion img{margin-top:-82px;width:100%}.upgrade .carousels .descr{position:absolute;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:80px;width:100%;padding-bottom:10px;background-color:#fff;font-size:17px}.simpread-upgrade-root.mini dialog-gp{border-radius:15px!important}.simpread-upgrade-root.mini dialog-content{padding:0!important;width:650px!important}.simpread-upgrade-root.mini dialog-gp .close{position:absolute}.simpread-upgrade-root.mini .upgrade .carousels{margin:0}.simpread-upgrade-root.mini .upgrade .carousels .descr{padding-bottom:70px;height:130px}.simpread-upgrade-root.mini .upgrade .carousel.carousel-slider{height:450px}.simpread-upgrade-root.mini .floating .billing{margin-bottom:30px;min-height:40px}.simpread-upgrade-root.mini footer{position:absolute;top:199px;left:-60px;right:-60px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}",""])},106:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,"dialog-gp .carousel,welcome .carousel{position:relative;width:100%;height:400px;-webkit-perspective:500px;perspective:500px;-webkit-transform-style:preserve-3d;transform-style:preserve-3d;-webkit-transform-origin:0 50%;transform-origin:0 50%;overflow:hidden}dialog-gp .carousel.carousel-slider,welcome .carousel.carousel-slider{top:0;left:0;height:100%}dialog-gp .carousel.carousel-slider .carousel-item,welcome .carousel.carousel-slider .carousel-item{position:absolute;top:0;left:0;width:100%;height:100%;min-height:400px}dialog-gp .carousel .carousel-item,welcome .carousel .carousel-item{display:none;position:absolute;top:0;left:0;width:200px;height:200px}dialog-gp .carousel .carousel-item>img,welcome .carousel .carousel-item>img{width:100%}dialog-gp .carousel .indicators,welcome .carousel .indicators{position:absolute;margin:0;padding:0;left:0;right:0;bottom:0;text-align:center}dialog-gp .carousel .indicators .indicator-item,welcome .carousel .indicators .indicator-item{display:inline-block;position:relative;margin:14px 4px;height:10px;width:10px;background-color:#e0e0e0;-webkit-transition:background-color .3s;transition:background-color .3s;border-radius:50%;cursor:pointer}dialog-gp .carousel .indicators .indicator-item.active,welcome .carousel .indicators .indicator-item.active{background-color:#4caf50}dialog-gp .carousel .carousel-item:not(.active) .materialboxed,dialog-gp .carousel.scrolling .carousel-item .materialboxed,welcome .carousel .carousel-item:not(.active) .materialboxed,welcome .carousel.scrolling .carousel-item .materialboxed{pointer-events:none}",""])},112:function(e,t,n){var o=n(102);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},114:function(e,t,n){var o=n(104);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},115:function(e,t,n){var o=n(105);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},116:function(e,t,n){(function(t){"use strict";e.exports=t.Mousetrap=n(156)}).call(t,function(){return this}())},117:function(e,t,n){"use strict";function o(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function r(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function a(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"unread",n="";return e&&e.map(function(e){var o=void 0,r=void 0,a=void 0;if("unread"==e.type)o=d.findUnReadbyID(e.id,l.storage.unrdist);else{var i=d.findAnnotebyID(e.id,l.storage.unrdist);o=i.unread,r=i.annote}var s="",c="";r&&(r.tags&&r.tags.map(function(e){s+="<span data-idx="+o.idx+' class="sr-unread-tag" data-value='+e+">#"+e+"</span>"}),"paragraph"==r.type?a='<div class="annote">'+r.html+"</div>":"img"==r.type?a="<img src="+r.text+"></img>":"code"==r.type&&(a="<pre>"+r.text+"</pre>")),("unread"==t||void 0==r)&&o.tags&&o.tags.length>0&&o.tags.map(function(e){c+="<span data-idx="+o.idx+' class="sr-unread-tag" data-value='+e+">#"+e+"</span>"}),n+="<"+("unread"==t?"sr-desc":"div")+' class="backlink-field" data-idx='+o.idx+" style='"+("unread"==t?"display:block;padding-left:10px;border-left:5px solid #8f9193":"display:block")+"'>\n                    "+(r?'<sr-div style="display:block;padding-left:10px" class="annotegp" sr-annote-bl-color data-color-type='+r.color+" data-id="+r.id+">\n                            "+a+"\n                            "+(s.length>0?'<div class="sr-unread-tags child">'+s+"</div>":"")+"\n                            "+(r.note?'<div class="note">'+r.note+"</div>":"")+"\n                            "+("annote"==t?'<div class="link"><a target="_blank" href='+o.url+">"+o.title+"</a></div>":"")+"\n                        </sr-div>":"")+"\n                    "+("unread"==t&&o.desc?'<div class="desc" style="margin-top:5px">'+o.desc+"</div>":"")+"\n                    "+("annote"==t&&void 0==r?'<div class="backlink-title"><div class="link"><a target="_blank" href='+o.url+">"+o.title+"</a></div></div>":"")+"\n                    "+(c.length>0?'<div class="sr-unread-tags">'+c+"</div>":"")+"\n                    "+("unread"==t?'<div class="backlink-title"><div class="link"><a target="_blank" href='+o.url+">"+o.title+"</a></div></div>":"")+"\n                </"+("unread"==t?"sr-desc":"div")+">";
}),n}function i(e,t,n,o,r){var a="",i=function(e,t){if(""==r.backlink)return"["+e.title+"]("+e.url+")";var n="";return n=r.backlink.replace(/{{id}}/gi,e.idx?e.idx+"-":"").replace(/{{un_title}}/gi,e.title?e.title:title).replace(/{{an_org_uri}}/gi,s("org",e,t)).replace(/{{an_int_uri}}/gi,s("int",e,t)).replace(/{{an_ext_uri}}/gi,s("ext",e,t))},s=function(e,t,n){var o=t.title.replace(/\/|:|\*|\?|<|>|\|/gi,"-");return"org"==e?t.url+"#js_content:~:text="+(n?encodeURI(n.text):""):"int"==e?(r.int_uri?r.int_uri+t.idx+"?title=":"http://localhost:7026/reading/")+o+(n?"#id="+n.id:""):"ext"==e?r.ext_uri?r.ext_uri+t.idx+"?title="+o+(n?"#id="+n.id:""):"":void 0};return e&&e.map(function(e,t){var s=void 0,c=void 0,p=void 0;if("unread"==e.type)s=d.findUnReadbyID(e.id,l.storage.unrdist);else{var u=d.findAnnotebyID(e.id,l.storage.unrdist);s=u.unread,c=u.annote}if("unread"==e.type)a+="> "+i(s,c)+"\n\n";else{"paragraph"==c.type?p='<div class="annote">'+c.html.replace(/\n/gi,"<br>")+"</div>":"img"==c.type?p="<img src="+c.text+"></img>":"code"==c.type&&(p="<pre>"+c.text+"</pre>");var f=n(p,void 0,void 0,!0,r.format),m=c.tags?"> "+o(c.tags)+"\n":"";a+="> "+f.replace(/\n\n/gi,"")+"\n"+m+("> "+i(s,c))+"\n\n"}}),a.replace(/[> ]*\n[> ]*\n?\n?$/gi,"")}function s(e){var t=new Map,n=new Map,o=new Map,a=[],i=new Map,s=function(e){var a=[],i=new Map;e.backlinks&&(a=e.backlinks),e.annotations&&e.annotations.forEach(function(e){return e.backlinks&&e.backlinks.length>0&&(a=a.concat(e.backlinks))});var s=[];if(e.tags&&e.tags.length>0&&(s=e.tags),e.annotations&&e.annotations.forEach(function(e){return e.tags&&e.tags.length>0&&(s=s.concat(e.tags))}),o.set(e.idx,[].concat(r(new Set(s)))),0==a.length)return i;var c=new Set,p=new Set;a.forEach(function(e){"unread"==e.type?c.add(e.id):p.add(e.id)});var u=d.findUnReadbyIDs([].concat(r(c)),l.storage.unrdist),f=d.findAnnotebyIDs([].concat(r(p)),l.storage.unrdist);return u.forEach(function(e){i.set(e.idx,e),n.set(e.idx,e)}),f.forEach(function(e){!i.get(e.unread.idx)&&i.set(e.unread.idx,e.unread),!n.get(e.unread.idx)&&n.set(e.unread.idx,e.unread)}),t.set(e.idx,i),i},c=0,p=60,u=function e(n){if(c++,!(c>=p||t.has(n.idx))){var o=s(n);[].concat(r(o)).forEach(function(t){e(t[1])})}};u(e);var f=e.idx,m=e.idx;if(t.forEach(function(e,t){var s=[].concat(r(e.keys()));s.forEach(function(e){f!=e&&m!=e&&a.push({from:t,to:e})});var l=n.get(t);l&&!i.get(t)&&i.set(t,{id:t,label:l.title});var c=o.get(t);c&&c.length>0&&c.forEach(function(e){e="#"+e,i.set(e,{id:e,label:e}),a.push({from:t,to:e})}),f=t}),0==i.size){i.set(e.idx,{id:e.idx,label:e.title});var g=o.get(e.idx);g&&g.length>0&&g.forEach(function(t){t="#"+t,i.set(t,{id:t,label:t}),a.push({from:e.idx,to:t})})}return{edges:a,nodes:[].concat(r(i.values()))}}Object.defineProperty(t,"__esModule",{value:!0}),t.Graph=t.Markdown=t.HTML=void 0;var l=n(4),c=n(65),d=o(c);t.HTML=a,t.Markdown=i,t.Graph=s},129:function(e,t,n){var o,r,a,i,i;(function(n,s){"use strict";var l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(n){"object"==l(t)&&"undefined"!=typeof e?e.exports=n():(r=[],o=n,a="function"==typeof o?o.apply(t,r):o,!(void 0!==a&&(e.exports=a)))}(function(){return function e(t,n,o){function r(s,l){if(!n[s]){if(!t[s]){var c="function"==typeof i&&i;if(!l&&c)return i(s,!0);if(a)return a(s,!0);var d=new Error("Cannot find module '"+s+"'");throw d.code="MODULE_NOT_FOUND",d}var p=n[s]={exports:{}};t[s][0].call(p.exports,function(e){var n=t[s][1][e];return r(n?n:e)},p,p.exports,e,t,n,o)}return n[s].exports}for(var a="function"==typeof i&&i,s=0;s<o.length;s++)r(o[s]);return r}({1:[function(e,t,n){function o(e){var t=i[e];return t?t.lastIndex=0:i[e]=t=new RegExp(s+e+l,"g"),t}function r(e,t){var n=e.className;n.length?o(t).test(n)||(e.className+=" "+t):e.className=t}function a(e,t){e.className=e.className.replace(o(t)," ").trim()}var i={},s="(?:^|\\s)",l="(?:\\s|$)";t.exports={add:r,rm:a}},{}],2:[function(e,t,o){(function(n){function o(e,t){function n(e){return-1!==de.containers.indexOf(e)||ce.isContainer(e)}function o(e){var t=e?"remove":"add";r(E,t,"mousedown",C),r(E,t,"mouseup",R)}function s(e){var t=e?"remove":"add";r(E,t,"mousemove",_)}function g(e){var t=e?"remove":"add";y[t](E,"selectstart",A),y[t](E,"click",A)}function b(){o(!0),R({})}function A(e){se&&e.preventDefault()}function C(e){te=e.clientX,ne=e.clientY;var t=1!==a(e)||e.metaKey||e.ctrlKey;if(!t){var n=e.target,o=S(n);o&&(se=o,s(),"mousedown"===e.type&&(m(n)?n.focus():e.preventDefault()))}}function _(e){if(se){if(0===a(e))return void R({});if(void 0===e.clientX||e.clientX!==te||void 0===e.clientY||e.clientY!==ne){if(ce.ignoreInputTextSelection){var t=v("clientX",e),n=v("clientY",e),o=k.elementFromPoint(t,n);if(m(o))return}var r=se;s(!0),g(),I(),N(r);var l=i(Q);Z=v("pageX",e)-l.left,ee=v("pageY",e)-l.top,w.add(ae||Q,"gu-transit"),U(),W(e)}}}function S(e){if(!(de.dragging&&J||n(e))){for(var t=e;f(e)&&n(f(e))===!1;){if(ce.invalid(e,t))return;if(e=f(e),!e)return}var o=f(e);if(o&&!ce.invalid(e,t)){var r=ce.moves(e,o,t,h(e));if(r)return{item:e,source:o}}}}function M(e){return!!S(e)}function T(e){var t=S(e);t&&N(t)}function N(e){Y(e.item,e.source)&&(ae=e.item.cloneNode(!0),de.emit("cloned",ae,e.item,"copy")),X=e.source,Q=e.item,oe=re=h(e.item),de.dragging=!0,de.emit("drag",Q,X)}function O(){return!1}function I(){if(de.dragging){var e=ae||Q;j(e,f(e))}}function z(){se=!1,s(!0),g(!0)}function R(e){if(z(),de.dragging){var t=ae||Q,n=v("clientX",e),o=v("clientY",e),r=l(J,n,o),a=H(r,n,o);a&&(ae&&ce.copySortSource||!ae||a!==X)?j(t,a):ce.removeOnSpill?$():L()}}function j(e,t){var n=f(e);ae&&ce.copySortSource&&t===X&&n.removeChild(Q),D(t)?de.emit("cancel",e,X,X):de.emit("drop",e,t,X,re),P()}function $(){if(de.dragging){var e=ae||Q,t=f(e);t&&t.removeChild(e),de.emit(ae?"cancel":"remove",e,t,X),P()}}function L(e){if(de.dragging){var t=arguments.length>0?e:ce.revertOnSpill,n=ae||Q,o=f(n),r=D(o);r===!1&&t&&(ae?o&&o.removeChild(ae):X.insertBefore(n,oe)),r||t?de.emit("cancel",n,X,X):de.emit("drop",n,o,X,re),P()}}function P(){var e=ae||Q;z(),G(),e&&w.rm(e,"gu-transit"),ie&&clearTimeout(ie),de.dragging=!1,le&&de.emit("out",e,le,X),de.emit("dragend",e),X=Q=ae=oe=re=ie=le=null}function D(e,t){var n;return n=void 0!==t?t:J?re:h(ae||Q),e===X&&n===oe}function H(e,t,o){function r(){var r=n(a);if(r===!1)return!1;var i=V(a,e),s=q(a,i,t,o),l=D(a,s);return!!l||ce.accepts(Q,a,X,s)}for(var a=e;a&&!r();)a=f(a);return a}function W(e){function t(e){de.emit(e,c,le,X)}function n(){u&&t("over")}function o(){le&&t("out")}if(J){e.preventDefault();var r=v("clientX",e),a=v("clientY",e),i=r-Z,s=a-ee;J.style.left=i+"px",J.style.top=s+"px";var c=ae||Q,d=l(J,r,a),p=H(d,r,a),u=null!==p&&p!==le;(u||null===p)&&(o(),le=p,n());var m=f(c);if(p===X&&ae&&!ce.copySortSource)return void(m&&m.removeChild(c));var g,b=V(p,d);if(null!==b)g=q(p,b,r,a);else{if(ce.revertOnSpill!==!0||ae)return void(ae&&m&&m.removeChild(c));g=oe,p=X}(null===g&&u||g!==c&&g!==h(c))&&(re=g,p.insertBefore(c,g),de.emit("shadow",c,p,X))}}function B(e){w.rm(e,"gu-hide")}function F(e){de.dragging&&w.add(e,"gu-hide")}function U(){if(!J){var e=Q.getBoundingClientRect();J=Q.cloneNode(!0),J.style.width=p(e)+"px",J.style.height=u(e)+"px",w.rm(J,"gu-transit"),w.add(J,"gu-mirror"),ce.mirrorContainer.appendChild(J),r(E,"add","mousemove",W),w.add(ce.mirrorContainer,"gu-unselectable"),de.emit("cloned",J,Q,"mirror")}}function G(){J&&(w.rm(ce.mirrorContainer,"gu-unselectable"),r(E,"remove","mousemove",W),f(J).removeChild(J),J=null)}function V(e,t){for(var n=t;n!==e&&f(n)!==e;)n=f(n);return n===E?null:n}function q(e,t,n,o){function r(){var t,r,a,i=e.children.length;for(t=0;i>t;t++){if(r=e.children[t],a=r.getBoundingClientRect(),s&&a.left+a.width/2>n)return r;if(!s&&a.top+a.height/2>o)return r}return null}function a(){var e=t.getBoundingClientRect();return i(s?n>e.left+p(e)/2:o>e.top+u(e)/2)}function i(e){return e?h(t):t}var s="horizontal"===ce.direction,l=t!==e?a():r();return l}function Y(e,t){return"boolean"==typeof ce.copy?ce.copy:ce.copy(e,t)}var K=arguments.length;1===K&&Array.isArray(e)===!1&&(t=e,e=[]);var J,X,Q,Z,ee,te,ne,oe,re,ae,ie,se,le=null,ce=t||{};void 0===ce.moves&&(ce.moves=d),void 0===ce.accepts&&(ce.accepts=d),void 0===ce.invalid&&(ce.invalid=O),void 0===ce.containers&&(ce.containers=e||[]),void 0===ce.isContainer&&(ce.isContainer=c),void 0===ce.copy&&(ce.copy=!1),void 0===ce.copySortSource&&(ce.copySortSource=!1),void 0===ce.revertOnSpill&&(ce.revertOnSpill=!1),void 0===ce.removeOnSpill&&(ce.removeOnSpill=!1),void 0===ce.direction&&(ce.direction="vertical"),void 0===ce.ignoreInputTextSelection&&(ce.ignoreInputTextSelection=!0),void 0===ce.mirrorContainer&&(ce.mirrorContainer=k.body);var de=x({containers:ce.containers,start:T,end:I,cancel:L,remove:$,destroy:b,canMove:M,dragging:!1});return ce.removeOnSpill===!0&&de.on("over",B).on("out",F),o(),de}function r(e,t,o,r){var a={mouseup:"touchend",mousedown:"touchstart",mousemove:"touchmove"},i={mouseup:"pointerup",mousedown:"pointerdown",mousemove:"pointermove"},s={mouseup:"MSPointerUp",mousedown:"MSPointerDown",mousemove:"MSPointerMove"};n.navigator.pointerEnabled?y[t](e,i[o],r):n.navigator.msPointerEnabled?y[t](e,s[o],r):(y[t](e,a[o],r),y[t](e,o,r))}function a(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;var t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}function i(e){var t=e.getBoundingClientRect();return{left:t.left+s("scrollLeft","pageXOffset"),top:t.top+s("scrollTop","pageYOffset")}}function s(e,t){return"undefined"!=typeof n[t]?n[t]:E.clientHeight?E[e]:k.body[e]}function l(e,t,n){var o,r=e||{},a=r.className;return r.className+=" gu-hide",o=k.elementFromPoint(t,n),r.className=a,o}function c(){return!1}function d(){return!0}function p(e){return e.width||e.right-e.left}function u(e){return e.height||e.bottom-e.top}function f(e){return e.parentNode===k?null:e.parentNode}function m(e){return"INPUT"===e.tagName||"TEXTAREA"===e.tagName||"SELECT"===e.tagName||g(e)}function g(e){return!!e&&"false"!==e.contentEditable&&("true"===e.contentEditable||g(f(e)))}function h(e){function t(){var t=e;do t=t.nextSibling;while(t&&1!==t.nodeType);return t}return e.nextElementSibling||t()}function b(e){return e.targetTouches&&e.targetTouches.length?e.targetTouches[0]:e.changedTouches&&e.changedTouches.length?e.changedTouches[0]:e}function v(e,t){var n=b(t),o={pageX:"clientX",pageY:"clientY"};return e in o&&!(e in n)&&o[e]in n&&(e=o[e]),n[e]}var x=e("contra/emitter"),y=e("crossvent"),w=e("./classes"),k=document,E=k.documentElement;t.exports=o}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./classes":1,"contra/emitter":5,crossvent:6}],3:[function(e,t,n){t.exports=function(e,t){return Array.prototype.slice.call(e,t)}},{}],4:[function(e,t,n){var o=e("ticky");t.exports=function(e,t,n){e&&o(function(){e.apply(n||null,t||[])})}},{ticky:9}],5:[function(e,t,n){var o=e("atoa"),r=e("./debounce");t.exports=function(e,t){var n=t||{},a={};return void 0===e&&(e={}),e.on=function(t,n){return a[t]?a[t].push(n):a[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var o=arguments.length;if(1===o)delete a[t];else if(0===o)a={};else{var r=a[t];if(!r)return e;r.splice(r.indexOf(n),1)}return e},e.emit=function(){var t=o(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var i=(a[t]||[]).slice(0);return function(){var a=o(arguments),s=this||e;if("error"===t&&n.throws!==!1&&!i.length)throw 1===a.length?a[0]:a;return i.forEach(function(o){n.async?r(o,a,s):o.apply(s,a),o._once&&e.off(t,o)}),e}},e}},{"./debounce":4,atoa:3}],6:[function(e,t,o){(function(n){function o(e,t,n,o){return e.addEventListener(t,n,o)}function r(e,t,n){return e.attachEvent("on"+t,c(e,t,n))}function a(e,t,n,o){return e.removeEventListener(t,n,o)}function i(e,t,n){var o=d(e,t,n);return o?e.detachEvent("on"+t,o):void 0}function s(e,t,n){function o(){var e;return m.createEvent?(e=m.createEvent("Event"),e.initEvent(t,!0,!0)):m.createEventObject&&(e=m.createEventObject()),e}function r(){return new u(t,{detail:n})}var a=-1===f.indexOf(t)?r():o();e.dispatchEvent?e.dispatchEvent(a):e.fireEvent("on"+t,a)}function l(e,t,o){return function(t){var r=t||n.event;r.target=r.target||r.srcElement,r.preventDefault=r.preventDefault||function(){r.returnValue=!1},r.stopPropagation=r.stopPropagation||function(){r.cancelBubble=!0},r.which=r.which||r.keyCode,o.call(e,r)}}function c(e,t,n){var o=d(e,t,n)||l(e,t,n);return b.push({wrapper:o,element:e,type:t,fn:n}),o}function d(e,t,n){var o=p(e,t,n);if(o){var r=b[o].wrapper;return b.splice(o,1),r}}function p(e,t,n){var o,r;for(o=0;o<b.length;o++)if(r=b[o],r.element===e&&r.type===t&&r.fn===n)return o}var u=e("custom-event"),f=e("./eventmap"),m=n.document,g=o,h=a,b=[];n.addEventListener||(g=r,h=i),t.exports={add:g,remove:h,fabricate:s}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./eventmap":7,"custom-event":8}],7:[function(e,t,o){(function(e){var n=[],o="",r=/^on/;for(o in e)r.test(o)&&n.push(o.slice(2));t.exports=n}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],8:[function(e,t,o){(function(e){function n(){try{var e=new o("cat",{detail:{foo:"bar"}});return"cat"===e.type&&"bar"===e.detail.foo}catch(e){}return!1}var o=e.CustomEvent;t.exports=n()?o:"function"==typeof document.createEvent?function(e,t){var n=document.createEvent("CustomEvent");return t?n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail):n.initCustomEvent(e,!1,!1,void 0),n}:function(e,t){var n=document.createEventObject();return n.type=e,t?(n.bubbles=Boolean(t.bubbles),n.cancelable=Boolean(t.cancelable),n.detail=t.detail):(n.bubbles=!1,n.cancelable=!1,n.detail=void 0),n}}).call(this,"undefined"!=typeof n?n:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],9:[function(e,t,n){var o,r="function"==typeof s;o=r?function(e){s(e)}:function(e){setTimeout(e,0)},t.exports=o},{}]},{},[2])(2)})}).call(t,function(){return this}(),n(148).setImmediate)},130:function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(t,n,o,r){!f.Popup(T)&&f.Open(e.createElement(N,{lock:t,annote:$.extend(!0,{},n),onAction:function(e){return o(e)},onClose:function(e){return r(e)}}),M),p.ListenESC(function(e){"esc"==e&&r(n.data),"esc"==e&&f.Close()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0;var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(145);var d=n(41),p=r(d),u=n(30),f=r(u),m=n(10),g=o(m),h=n(32),b=o(h),v=n(14),x=o(v),y=n(31),w=o(y),k=n(81),E=o(k),A=n(64),C=r(A),_=n(52),S=r(_),M="simpread-annote-popup-root",T="."+M,N=function(t){function n(){var e,t,o,r;a(this,n);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return t=o=i(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),o.state={rich:!0,confirm:!1},o.fmtDate=function(e){var t=new Date(e),n=function(e){return e=e<10?"0"+e:e};return t.getFullYear()+"年"+n(t.getMonth()+1)+"月"+n(t.getDate())+"日 "+n(t.getHours())+":"+n(t.getMinutes())+":"+n(t.getSeconds())},r=t,i(o,r)}return s(n,t),c(n,[{key:"noteOnChange",value:function(){this.props.annote.data.note=event.target.value}},{key:"refsOnChange",value:function(){this.props.annote.data.refs=event.target.value}},{key:"tagOnChange",value:function(e){this.props.annote.data.tags=e}},{key:"onSwitchChange",value:function(e){this.setState({rich:e})}},{key:"onColorChange",value:function(e){$("sr-annote-popup sr-anote-fb-item[data-color-type="+this.props.annote.data.color+"]").empty(),this.props.annote.data.color=e,$("sr-annote-popup sr-anote-fb-item[data-color-type="+this.props.annote.data.color+"]").html(this.props.checked_icon),$("sr-annote-popup sr-anote-item").attr("data-color-type",this.props.annote.data.color),$("sr-annote-popup sr-annote-popup-desc").attr("data-color-type",this.props.annote.data.color)}},{key:"onColorStyleChange",value:function(e){this.props.lock||($("sr-annote-popup sr-anote-item[data-color-style="+(this.props.annote.data.style||0)+"]").find("svg").remove(),this.props.annote.data.style=e,$("sr-annote-popup sr-anote-item[data-color-style="+this.props.annote.data.style+"]").append(this.props.checked_icon))}},{key:"textOnChange",value:function(e,t){this.props.annote.data[e]=t.target.value}},{key:"onSave",value:function(){this.props.onAction(this.props.annote.data)}},{key:"onClose",value:function(){f.Close()}},{key:"onRemoveClick",value:function(){this.state.confirm?(this.props.onAction("remove"),f.Close()):this.setState({confirm:!0})}},{key:"onExportClick",value:function(e,t){var n=t.replace("export_cur:",""),o="annote"==this.props.annote.mode?[this.props.annote.data]:this.props.annote.data.annotations;S.Action(n,this.props.annote.data.title||"",this.props.annote.data.desc||"",o,"annote")}},{key:"componentDidMount",value:function(){"note"==this.props.annote.focus&&$("sr-annote-popup textarea")[0].focus(),"tag"==this.props.annote.focus&&$("sr-annote-popup input")[0].focus(),"code"==this.props.annote.data.type&&hljs&&hljs.highlightBlock(this.refs.code),$("sr-annote-popup sr-anote-fb-item[data-color-type="+this.props.annote.data.color+"]").html(this.props.checked_icon),$("sr-annote-popup sr-anote-item[data-color-style="+(this.props.annote.data.style||0)+"]").append(this.props.checked_icon),$("sr-annote-popup-gp dropdown span").on("click",function(e){setTimeout(function(){return $("sr-annote-popup-gp dropdown list-view")[0].scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},200)})}},{key:"render",value:function(){var t=this,n=void 0;if("annote"==this.props.annote.mode){var o=void 0,r=this.props.annote.data.type;o="img"==r?e.createElement("sr-annote-popup-desc",{"sr-annote-bl-color":"true","data-color-type":this.props.annote.data.color},e.createElement("img",{src:this.props.annote.data.text})):"code"==r?e.createElement("sr-annote-popup-desc",{"sr-annote-bl-color":"true","data-color-type":this.props.annote.data.color},e.createElement("pre",{ref:"code","data-customscroll":!0,dangerouslySetInnerHTML:{__html:this.props.annote.data.text.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")}})):this.state.rich?e.createElement("sr-annote-popup-desc",{"sr-annote-bl-color":"true","data-color-type":this.props.annote.data.color,dangerouslySetInnerHTML:{__html:this.props.annote.data.html}}):e.createElement("sr-annote-popup-desc",{"sr-annote-bl-color":"true","data-color-type":this.props.annote.data.color},this.props.annote.data.text),n=e.createElement("sr-annote-popup-mode",null,e.createElement("sr-annote-popup-gp",{type:r},e.createElement("sr-annote-popup-div",null,this.fmtDate(this.props.annote.data.id)),o,"paragraph"==r&&e.createElement(b.default,{width:"100%",waves:"md-waves-effect",checked:this.state.rich,thumbedColor:"#1976D2",trackedColor:"#2196F3",label:"默认使用富文本方式预览，选否后改为纯文本方式预览。",onChange:function(e){return t.onSwitchChange(e)}})),e.createElement("sr-annote-popup-gp",null,e.createElement("sr-annote-popup-label",null,"颜色"),e.createElement("sr-annote-floatingbar",null,e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"1",onClick:function(){return t.onColorChange(1)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"2",onClick:function(){return t.onColorChange(2)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"3",onClick:function(){return t.onColorChange(3)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"4",onClick:function(){return t.onColorChange(4)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"5",onClick:function(){return t.onColorChange(5)}}))),"paragraph"==r&&e.createElement("sr-annote-popup-gp",null,this.props.lock&&e.createElement("sr-anote-lock",{dangerouslySetInnerHTML:{__html:this.props.lock_icon},onClick:function(){return t.props.onAction("lock")}}),e.createElement("sr-annote-popup-label",null,"样式"),e.createElement("sr-annote-floatingbar",null,e.createElement("sr-anote-item",{class:"md-waves-effect","data-color-style":"0","data-color-type":this.props.annote.data.color,"sr-annote-bg-color":!0,onClick:function(){return t.onColorStyleChange(0)}}),e.createElement("sr-anote-item",{class:"md-waves-effect","data-color-style":"1","data-color-type":this.props.annote.data.color,onClick:function(){return t.onColorStyleChange(1)}}),e.createElement("sr-anote-item",{class:"md-waves-effect","data-color-style":"2","data-color-type":this.props.annote.data.color,onClick:function(){return t.onColorStyleChange(2)}}),e.createElement("sr-anote-item",{class:"md-waves-effect","data-color-style":"3","data-color-type":this.props.annote.data.color,onClick:function(){return t.onColorStyleChange(3)}}),e.createElement("sr-anote-item",{class:"md-waves-effect hidden"},"下划线"))))}else n=e.createElement("sr-annote-popup-mode",null,e.createElement("sr-annote-popup-gp",null,e.createElement("sr-annote-popup-div",null,this.props.annote.data.create)),e.createElement("sr-annote-popup-gp",null,e.createElement(x.default,{floatingtext:"标题",value:this.props.annote.data.title,onChange:function(e){return t.textOnChange("title",e)}})),e.createElement("sr-annote-popup-gp",null,e.createElement(x.default,{floatingtext:"描述",multi:!0,rows:5,value:this.props.annote.data.desc,onChange:function(e){return t.textOnChange("desc",e)}})));return e.createElement(f.Dialog,null,e.createElement(f.Content,null,e.createElement("sr-annote-popup",{"data-customscroll":!0},n,e.createElement("sr-annote-popup-gp",null,e.createElement("sr-annote-popup-label",null,"标签"),e.createElement(E.default,{tags:this.props.annote.data.tags||[],placeholder:"请输入你需要加入的标签，回车后生效。",items:this.props.annote.alltags,onChange:function(e){return t.tagOnChange(e)}})),e.createElement("sr-annote-popup-gp",null,e.createElement("sr-annote-popup-label",null,"备注"),e.createElement(x.default,{multi:!0,rows:3,placeholder:"想对这条信息说点什么？",value:this.props.annote.data.note,onChange:function(e){return t.noteOnChange(e)}})),e.createElement("sr-annote-popup-gp",null,e.createElement("sr-annote-popup-label",null,"外部引用"),e.createElement(x.default,{multi:!0,rows:3,placeholder:"当前稍后读或标注的外部引用，每行一个 URL 地址",value:this.props.annote.data.refs,onChange:function(e){return t.refsOnChange(e)}})),e.createElement("sr-annote-popup-gp",null,this.props.lock&&e.createElement("sr-anote-lock",{dangerouslySetInnerHTML:{__html:this.props.lock_icon},onClick:function(){return t.props.onAction("lock")}}),e.createElement("sr-annote-popup-label",null,"导出"),e.createElement(w.default,{name:"导出当前标注",width:"100%",items:C.getAllService(),onChange:function(e,n){return t.onExportClick(n,"export_cur:"+e)}})))),e.createElement(f.Footer,null,e.createElement(g.default,{text:this.state.confirm?"确 认":"删 除",waves:"md-waves-effect",color:"#fff",backgroundColor:"#F44336",onClick:function(){return t.onRemoveClick()}}),e.createElement("div",{style:{width:"100%"}}),e.createElement(g.default,{text:"保 存",waves:"md-waves-effect",onClick:function(){return t.onSave()}}),e.createElement(g.default,{text:"退 出",waves:"md-waves-effect",onClick:function(){return t.onClose()}})))}}]),n}(e.Component);N.defaultProps={checked_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15"><path d="M384 689.92L206.08 512l-60.373333 60.373333L384 810.666667l512-512-60.373333-60.373334z" fill="#4F4F4D"></path></svg>',lock_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15"><path d="M284.444672 455.110656v-113.77664c0-125.67552 101.879808-227.556352 227.555328-227.556352s227.555328 101.879808 227.555328 227.555328v113.777664h71.11168c23.564288 0 42.665984 19.10272 42.665984 42.667008v369.777664c0 23.564288-19.101696 42.667008-42.665984 42.667008H213.332992c-23.564288 0-42.665984-19.10272-42.665984-42.667008v-369.77664c0-23.565312 19.101696-42.668032 42.665984-42.668032h71.11168z m85.332992 0H654.22336v-113.77664c0-78.547968-63.675392-142.22336-142.222336-142.22336-78.546944 0-142.222336 63.675392-142.222336 142.22336v113.77664z" fill="#f55246"></path></svg>',annote:void 0,onAction:void 0},N.propTypes={id:e.PropTypes.object,onAction:e.PropTypes.func},t.Render=l}).call(t,n(2))},132:function(e,t,n){(function(e,o,r){"use strict";function a(e){return e&&e.__esModule?e:{default:e}}function i(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function c(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function d(t,n,o){$(t).append("<sharecard-bg></sharecard-bg>"),r.render(e.createElement(v,{title:n,content:o.replace(/\n/gi,"<br>")}),$("sharecard-bg")[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0;var p=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),u=n(28),f=i(u),m=n(9),g=i(m),h=n(10),b=a(h),v=function(t){function n(){return s(this,n),l(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return c(n,t),p(n,[{key:"download",value:function(){var e=this;f.PNG($("sharecard-card")[0],"simpread-"+this.props.title+".png",function(t){!t&&(new o).Render(2,"下载失败，请稍后再试！"),t&&e.exit()})}},{key:"exit",value:function(){r.unmountComponentAtNode($("sharecard-bg")[0])}},{key:"componentWillUnmount",value:function(){$("sharecard-bg").remove()}},{key:"render",value:function(){var t=this;return e.createElement("sharecard",null,e.createElement("sharecard-head",null,e.createElement("sharecard-card",null,e.createElement("sharecard-top",null,e.createElement("span",{className:"logos"}),"简 悦"),e.createElement("sharecard-content",{dangerouslySetInnerHTML:{__html:this.props.content}}),e.createElement("sharecard-via",null,"摘自 《",this.props.title,"》"),e.createElement("sharecard-footer",null,e.createElement("div",null,e.createElement("span",{className:"qrcode"}),e.createElement("span",{style:{display:"none"},dangerouslySetInnerHTML:{__html:"长按扫码<br>获取简悦"}})),e.createElement("div",null,"还原阅读本质 · 提升阅读体验")))),e.createElement("sharecard-control",null,e.createElement(b.default,{type:"flat",text:"保 存",width:"100%",color:"#fff",backgroundColor:"#2196F3",icon:g.IconPath("save_icon"),waves:"md-waves-effect md-waves-button",onClick:function(){return t.download()}}),e.createElement(b.default,{type:"flat",text:"关 闭",width:"100%",fontIcon:'<i class="fas fa-window-close"></i>',color:"#fff",backgroundColor:"#2196F3",waves:"md-waves-effect md-waves-button",onClick:function(){return t.exit()}})))}}]),n}(e.Component);t.Render=d}).call(t,n(2),n(7),n(13))},136:function(e,t,n){t=e.exports=n(5)(),t.i(n(85),""),t.push([e.id,"[customscroll],[data-customscroll]{overflow-y:hidden}[customscroll]:hover,[data-customscroll]:hover{overflow-y:overlay}[customscroll]::-webkit-scrollbar-track,[data-customscroll]::-webkit-scrollbar-track{background-color:transparent}[customscroll]::-webkit-scrollbar,[data-customscroll]::-webkit-scrollbar{width:12px}[customscroll]::-webkit-scrollbar-thumb,[data-customscroll]::-webkit-scrollbar-thumb{background-clip:padding-box;padding-top:80px;background-color:#ddd;border:3px solid transparent;border-radius:8px}sr-annote-popup{display:block;padding-right:20px;width:480px;height:100%}sr-annote-popup-gp{position:relative;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-bottom:25px}sr-annote-popup-div{width:100%;color:var(--text-color);text-align:left;font-weight:400}sr-annote-popup-label{color:rgba(0,137,123,.8);font-size:14px;font-weight:700;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;pointer-events:none;-webkit-transition:all .45s cubic-bezier(.23,1,.32,1) 0ms;transition:all .45s cubic-bezier(.23,1,.32,1) 0ms;-webkit-transform:scale(.75) translateY(-8px);transform:scale(.75) translateY(-8px);-webkit-transform-origin:left top 0;transform-origin:left top 0}sr-annote-popup-desc{position:relative;margin:10px 0;padding:10px;background-color:var(--background-hover-color);font-size:15px;text-align:justify;font-weight:400;line-height:1.6;border-radius:4px}sr-annote-popup-desc sr-annote{background-color:transparent!important}sr-annote-popup-gp[type=img]{-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-annote-popup-gp svg path{fill:var(--active-color)!important}sr-annote-popup-gp ol,sr-annote-popup-gp ul{margin:0 0 1.2em;margin-left:1.3em;padding:0;list-style:disc}sr-annote-popup-gp ol li,sr-annote-popup-gp ul li{margin:0 0 1.2em;font-size:15px;list-style:disc}sr-annote-popup-gp a{padding:0 5px;vertical-align:baseline;vertical-align:initial}sr-annote-popup-gp a,sr-annote-popup-gp a:link{color:#463f5c;font-size:inherit;font-weight:inherit;text-decoration:underline;border:none}sr-annote-popup-gp a:hover{background:transparent}sr-annote-popup-gp img{margin:0;padding:0;max-width:50%;height:auto;background:#fff;border:0;border-radius:6px;box-shadow:0 20px 20px -10px rgba(0,0,0,.1)}sr-annote-popup-gp pre{padding:10px!important;background-color:transparent!important;max-height:400px;white-space:pre-line;word-break:break-all;border-radius:6px!important;overflow-x:hidden!important}sr-annote-popup auto-complete list-view{max-height:150px!important}sr-annote-popup list-view::-webkit-scrollbar-thumb{background-clip:padding-box;border-radius:10px;border:2px solid transparent;background-color:rgba(85,85,85,.55)}sr-annote-popup list-view::-webkit-scrollbar{width:10px;-webkit-transition:width .7s cubic-bezier(.4,0,.2,1);transition:width .7s cubic-bezier(.4,0,.2,1)}sr-annote-popup-gp sr-annote-floatingbar{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between}sr-annote-popup-gp sr-annote-floatingbar sr-anote-fb-item[data-color-type]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:20px;width:65px;height:20px;border-radius:5px}sr-annote-popup-gp sr-annote-floatingbar sr-anote-fb-item:last-child{margin-right:0}sr-annote-popup-gp sr-anote-item{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin-right:20px;padding:0 5px;width:65px;height:20px;font-size:13px;font-weight:400;border-radius:5px;-webkit-transition:all .5s ease-in-out 0ms;transition:all .5s ease-in-out 0ms}sr-annote-popup-gp sr-anote-item:last-child{margin-right:0}sr-annote-popup-gp sr-anote-item.hidden{opacity:0;pointer-events:none}sr-annote-popup-gp sr-anote-lock{position:absolute;left:0;top:-3px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;background-color:hsla(0,0%,100%,.8);z-index:1}sr-annote-popup-gp sr-anote-lock svg{margin-top:3px;cursor:pointer}",""]);
},137:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,'.gu-mirror{position:fixed!important;margin:0!important;z-index:9999!important;opacity:.8;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=80)";filter:alpha(opacity=80)}.gu-hide{display:none!important}.gu-unselectable{-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;user-select:none!important}.gu-transit{opacity:.2;-ms-filter:"progid:DXImageTransform.Microsoft.Alpha(Opacity=20)";filter:alpha(opacity=20)}',""])},144:function(e,t,n){(function(e,t){!function(e,n){"use strict";function o(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var o={callback:e,args:t};return g[m]=o,f(m),m++}function r(e){delete g[e]}function a(e){var t=e.callback,o=e.args;switch(o.length){case 0:t();break;case 1:t(o[0]);break;case 2:t(o[0],o[1]);break;case 3:t(o[0],o[1],o[2]);break;default:t.apply(n,o)}}function i(e){if(h)setTimeout(i,0,e);else{var t=g[e];if(t){h=!0;try{a(t)}finally{r(e),h=!1}}}}function s(){f=function(e){t.nextTick(function(){i(e)})}}function l(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}function c(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&i(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),f=function(n){e.postMessage(t+n,"*")}}function d(){var e=new MessageChannel;e.port1.onmessage=function(e){var t=e.data;i(t)},f=function(t){e.port2.postMessage(t)}}function p(){var e=b.documentElement;f=function(t){var n=b.createElement("script");n.onreadystatechange=function(){i(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}function u(){f=function(e){setTimeout(i,0,e)}}if(!e.setImmediate){var f,m=1,g={},h=!1,b=e.document,v=Object.getPrototypeOf&&Object.getPrototypeOf(e);v=v&&v.setTimeout?v:e,"[object process]"==={}.toString.call(e.process)?s():l()?c():e.MessageChannel?d():b&&"onreadystatechange"in b.createElement("script")?p():u(),v.setImmediate=o,v.clearImmediate=r}}("undefined"==typeof self?"undefined"==typeof e?this:e:self)}).call(t,function(){return this}(),n(126))},145:function(e,t,n){var o=n(136);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},146:function(e,t,n){var o=n(137);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},148:function(e,t,n){function o(e,t){this._id=e,this._clearFn=t}var r=Function.prototype.apply;t.setTimeout=function(){return new o(r.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(144),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},149:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAaCAMAAAB//6mtAAAAPFBMVEVHcEz/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zv/6zsmGdgxAAAAE3RSTlMAJJGnQ3Bh/ANS6An0u9o1FMp/ufrp4AAAAgZJREFUSMe1Vou2oyAM5BEIbxD+/183gFq99bZ7dnVOe6oWZwgJGRj7DcaY+et5BqtVFcA4eLraoLUFgJJLHzvBvuM00nPIzA4qazXkDuKka0VPIHNeiuee/RXO+qaAFjGFlpQQMi7JORcQ24Z+hRhcWpYYo5SikiQpkuBnldLXQwm5hANT53pxz9v1eZIdpEFCsmpLgXF+tVKGg640ZZrmDxacaNcIzqVE3EIoC7yYnjHuLxQ45cvquDP/RvgRiG4R2uYewlXKvXbo2r8x71NyFI4EZmZaj2vEShFJpnYHQopSAT/lgHEhZY2L+1/yVzAooJyyoEGEgLeEMFWC4K9NwHiVuFXlPSLNWbZ2g/61IuKN9AMyrwEUK5a7yQlLnUnwyr1v1luKCZsaq69kwwcCaC3ZWUZZPsFOkxaUA2pt8pHZE6KyhmnXbi3O1/xDSLkXqM8QH1FYwI+26nV1TwTQljy3ma8inSLYWiN+bp74ZX16hc4mnWkb7P0Jv9FejEB8+wsXlTfvLGIbthVvFN3jAbR0l34WUodzw6avJtIp1M6vya61EuTB1EqT3JW5jYfXiWw6Y626eOP7p5Th4FbrfqiZR4PxBjq5rv/BD8jplR12bcYBw44k4KCVtR9Q/Kszni/2W+MLh66n4WjLwz0LX5vqtDnqH4nitD8M/P10ZQ44q634A66hf2zVV84fAAAAAElFTkSuQmCC"},150:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAaCAMAAAB//6mtAAAANlBMVEVHcEyA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3uqA3urNaunbAAAAEXRSTlMAe+8uaFLb/AQCG0ANkralydBaCTIAAAIBSURBVEjHtVaJduMwCJRA6ED3///sIstn6qbd13hy+NlxRjBYDEp9h+B9WI6JMRIZnSnEyKQPGKKIjOwnwoD6CXLPuHmeeI5RkREi+dKEEeMKuRKFnJPAq98gvKyf0ORiXbc619KaBXDy7r2Pzwq5Ym0TlFqz5BMROb1fxi96CGeDlcPNz855wji1NddaSpOFcl5kMxHvFvEoKtdi4WDbONbjLdxMokgKelWMGZP/olpgGrKWGfA7yrdw0EQpRMlh1Py1CMnYDv/P7MZri8lJQiXTRnnmV4lzG2X9C9bMQVTTkf2FH6voWJvtf8Whb76Um41GDeD6J+BG9Ttk3B8irziXz5AftbFmrcI4JMrNfXqFGnd5su2fZR8omnhJQMOlNp+Ekaap0NT+CHu3cT5GWPsT/M6Np0haW30ketlu1VBQBvpD+gAAygZWjFgeWaFQSmMbJKPhiQL0FtWyzbzO9ss+d66/dQHnfrAJ+U0rv1qNdOn93ndi3dI692Jy86o1cWt0Sb/0QCh5uHw0ptp+xyktfwXAfRitac17l1hQYbbAYpBng+JYzxHZ4SQ1C0zyczwIw8GJ5siRx2ywNWNopPzJymaps4ljJghjIvKKlr0nBlXEcLXYLX8/nYR9lBJDphEvnWaZZQwKjNvZDE6hUFfCqyvNAevis/7A+s+rFf8Do0ByAiavdJkAAAAASUVORK5CYII="},151:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAaCAMAAAB//6mtAAAANlBMVEVHcEyF0faF0faF0faF0faF0faF0faF0faF0faF0faF0faF0faF0faF0faF0faF0faF0faF0fYOABKzAAAAEXRSTlMA3e8uaFJ7/AQCGz8Nt5KlzvXM15AAAAIFSURBVEjHtVaNesIgDARCCA0/gfd/2YXSWuvUbd/sfWqlpQdcIBdjXmGJcVmvmSEh+lBxSYkxHPCICRg4TiwD5idon9F5NiKnZNArkf4EhARpg95JSs5ZEc1vsDyMn8HXYqnbUKWUZp0j/fTex3eD3rG2tVaKSNX1JADO74eJqx7K2dzGQSdKbR8YTStVxgSabbWusvkEzwaJoCpLsY4mHU2unbK/AI1FjCUUCZtizJDjN9UWxiFrIdon2f8E2jUrqhSArmHE/HHXZG+7+yPzvW5zCGtLxT2u9/wmc20jrP/CDJnKVkLieOIHERlR6P8FTZ31Xz2Fm32A4Bz1T2AopnpXuG2iaLiWz5Afalm/RWFcMtZGnx5B0k2e2vqH6RUlIK8LCG6Pzcfhdfsb8NIvYe8W5zYC6VfwE41dpKlNLpm9HjfxuBjv+kX6OOdAD7BhgHLJCAVzHscg++CuCEBvyazHLIZqnyTH/tYFiH6wCX0WTNysRrP0re87sZ7SEj2Y3ETzaU90ORw5cAan1OHyyXux/RmnpvwNzj2fRmsh8C1LrJB1M6kj+cQzQTHKQUxKpjleqsLnOMuDZTg44iw5qtYGWhrMN1xDE+/qiRnqqtx5q4iiwfXskZt+q3bLr6uTm3ENQ8YxX7yrZdYyaGHYW3NyJim1IJxdaRZYp2InHtjePFvxF2YVcjg/uCn9AAAAAElFTkSuQmCC"},152:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAaCAMAAAB//6mtAAAAMFBMVEWM2EJHcEyM2EKM2EKM2EKM2EKM2EKM2EKM2EKM2EKM2EKM2EKM2EKM2EKM2EKM2EKKz/w5AAAAEHRSTlP/AANRaHvzGy3WqT4Nk77kx+qVTgAAAb9JREFUSMe1VtlyxDAIwwYDvv//b4udY5Nus9NOE71kJocA4SDAXcEb5rWIZiQKFX3OguEFQswqKv6FNxr4iXd/0UvOzsgRRwTUrHmF3clGLsXg3QfAifjwoCjV1hl6qCm12HkAvoF7jzG21lKqVk9WlfK5gkUP42wb2RvpGTHVkYBl0GqdslHW8kMAr0jBMj3y8W9CjCJmCWFVTFTLQQvYxMaB9Lu0r6NxW5Qq+xmBozzUocM/YQWliltfj012RWpsEe4Ax2aSiT/2wKk1y7rQ4T5Uk+pVgVDQwHwbO3fgqnuTvZPa4FbYP0R+CTC0Knh3AEPKawVCNcL9aAFlBPCB4SkQmPpK6SH6jmVKpE8FGKfIRttT9JwIPdBj+jN3dR6cTb8GT0RpOLwIXKHQH6kgZjeHnQ/v/wDf8R8Htww7rxT/wMhXN88PIuWyGk4J3w9vqsPlM1GKVyN/Qe98Na1DkNXRhCbSTILtZC1j3MYHpuMnnc3dzYBrpc0R/XDw6YRjqalzNdheR+d3y5yvW6urcZd9I8I9meG3ZrdyvZ3sT4pYxJEv7rsMrItQ0X17WT7Jw5VQT7Tvy5U/4RRsxRfv9RDt9/UjOgAAAABJRU5ErkJggg=="},153:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAAAaCAMAAAB//6mtAAAAOVBMVEVHcEz/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r/t9r20adnAAAAEnRSTlMAVQ062Hwb/ARpK/Olk7XoScQnLSnCAAAB6ElEQVRIx7VW2Y7DIAzkMBCDOf//Y9cQmiZt2q12m1EegoTGF/ZYiFdYGONHWV+kRBOL0NryzwQalEV76+1yh/gAu4uLLVoURMkG0EivvZ6QsnRyqxgfse48XqE0xgSuZRMpVcg5MFw7wIUMALXWRBRnPOoXK5wPLZmz5snh5nfj3KGfgSJR6h7UGEfipNZnRhZf0FCCcOTaKNs53AiCQ0hkypox6716rgUnmwspU2d6y/geIdQeApsQzxVfhEJo+S/Mu5SFnCFFeSvrkd9G6GX9JzpBgJpMsccQPBEZqtD+bWHLb9yVexEWjTdPL/HvRkJuIfp7Ewgb03fI77nKeGvY3lgyVvdtC6RnABYjtO+ydyQj7QgAw6E23wT2/Hikdgl7g6LmC21X8DvXXxGPNrrEe263hNzSPf/X5CeEPNqA53O6xEKSalRAoclXFIArPLvMRDgZju+e7UFyXl1oRixTanhKb3ffJeuU1rlHkVsfKG6DTpmHGZhTl1cWICRoZ5xdiAdYqM/dgGqM3abEAIVV/xLqOcZtoTtxgBwAEkUG3hRx6QrO68VYOSLvBnzJTRekeNAzLnVkbnVbMIQcvedYn7restzaD7aTxVotu79lv8uMPUj57bDOV82qRNIfaM+Wq+WXresHSSV3cD8ocu8AAAAASUVORK5CYII="},156:function(e,t,n){var o;!function(r,a,i){function s(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent("on"+t,n)}function l(e){if("keypress"==e.type){var t=String.fromCharCode(e.which);return e.shiftKey||(t=t.toLowerCase()),t}return g[e.which]?g[e.which]:h[e.which]?h[e.which]:String.fromCharCode(e.which).toLowerCase()}function c(e){var t=[];return e.shiftKey&&t.push("shift"),e.altKey&&t.push("alt"),e.ctrlKey&&t.push("ctrl"),e.metaKey&&t.push("meta"),t}function d(e){return"shift"==e||"ctrl"==e||"alt"==e||"meta"==e}function p(e,t){var n,o,r,a=[];for(n=e,"+"===n?n=["+"]:(n=n.replace(/\+{2}/g,"+plus"),n=n.split("+")),r=0;r<n.length;++r)o=n[r],v[o]&&(o=v[o]),t&&"keypress"!=t&&b[o]&&(o=b[o],a.push("shift")),d(o)&&a.push(o);if(n=o,r=t,!r){if(!m){m={};for(var i in g)95<i&&112>i||g.hasOwnProperty(i)&&(m[g[i]]=i)}r=m[n]?"keydown":"keypress"}return"keypress"==r&&a.length&&(r="keydown"),{key:o,modifiers:a,action:r}}function u(e,t){return null!==e&&e!==a&&(e===t||u(e.parentNode,t))}function f(e){function t(e){e=e||{};var t,n=!1;for(t in h)e[t]?n=!0:h[t]=0;n||(x=!1)}function n(e,t,n,o,r,a){var i,s,l=[],c=n.type;if(!m._callbacks[e])return[];for("keyup"==c&&d(e)&&(t=[e]),i=0;i<m._callbacks[e].length;++i)if(s=m._callbacks[e][i],(o||!s.seq||h[s.seq]==s.level)&&c==s.action){var p;(p="keypress"==c&&!n.metaKey&&!n.ctrlKey)||(p=s.modifiers,p=t.sort().join(",")===p.sort().join(",")),p&&(p=o&&s.seq==o&&s.level==a,(!o&&s.combo==r||p)&&m._callbacks[e].splice(i,1),l.push(s))}return l}function o(e,t,n,o){m.stopCallback(t,t.target||t.srcElement,n,o)||!1!==e(t,n)||(t.preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation?t.stopPropagation():t.cancelBubble=!0)}function r(e){"number"!=typeof e.which&&(e.which=e.keyCode);var t=l(e);t&&("keyup"==e.type&&b===t?b=!1:m.handleKey(t,c(e),e))}function i(e,n,r,a){function i(n){return function(){x=n,++h[e],clearTimeout(g),g=setTimeout(t,1e3)}}function s(n){o(r,n,e),"keyup"!==a&&(b=l(n)),setTimeout(t,10)}for(var c=h[e]=0;c<n.length;++c){var d=c+1===n.length?s:i(a||p(n[c+1]).action);u(n[c],d,a,e,c)}}function u(e,t,o,r,a){m._directMap[e+":"+o]=t,e=e.replace(/\s+/g," ");var s=e.split(" ");1<s.length?i(e,s,t,o):(o=p(e,o),m._callbacks[o.key]=m._callbacks[o.key]||[],n(o.key,o.modifiers,{type:o.action},r,e,a),m._callbacks[o.key][r?"unshift":"push"]({callback:t,modifiers:o.modifiers,action:o.action,seq:r,level:a,combo:e}))}var m=this;if(e=e||a,!(m instanceof f))return new f(e);m.target=e,m._callbacks={},m._directMap={};var g,h={},b=!1,v=!1,x=!1;m._handleKey=function(e,r,a){var i,s=n(e,r,a);r={};var l=0,c=!1;for(i=0;i<s.length;++i)s[i].seq&&(l=Math.max(l,s[i].level));for(i=0;i<s.length;++i)s[i].seq?s[i].level==l&&(c=!0,r[s[i].seq]=1,o(s[i].callback,a,s[i].combo,s[i].seq)):c||o(s[i].callback,a,s[i].combo);s="keypress"==a.type&&v,a.type!=x||d(e)||s||t(r),v=c&&"keydown"==a.type},m._bindMultiple=function(e,t,n){for(var o=0;o<e.length;++o)u(e[o],t,n)},s(e,"keypress",r),s(e,"keydown",r),s(e,"keyup",r)}if(r){var m,g={8:"backspace",9:"tab",13:"enter",16:"shift",17:"ctrl",18:"alt",20:"capslock",27:"esc",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down",45:"ins",46:"del",91:"meta",93:"meta",224:"meta"},h={106:"*",107:"+",109:"-",110:".",111:"/",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},b={"~":"`","!":"1","@":"2","#":"3",$:"4","%":"5","^":"6","&":"7","*":"8","(":"9",")":"0",_:"-","+":"=",":":";",'"':"'","<":",",">":".","?":"/","|":"\\"},v={option:"alt",command:"meta",return:"enter",escape:"esc",plus:"+",mod:/Mac|iPod|iPhone|iPad/.test(navigator.platform)?"meta":"ctrl"};for(i=1;20>i;++i)g[111+i]="f"+i;for(i=0;9>=i;++i)g[i+96]=i;f.prototype.bind=function(e,t,n){return e=e instanceof Array?e:[e],this._bindMultiple.call(this,e,t,n),this},f.prototype.unbind=function(e,t){return this.bind.call(this,e,function(){},t)},f.prototype.trigger=function(e,t){return this._directMap[e+":"+t]&&this._directMap[e+":"+t]({},e),this},f.prototype.reset=function(){return this._callbacks={},this._directMap={},this},f.prototype.stopCallback=function(e,t){return!(-1<(" "+t.className+" ").indexOf(" mousetrap ")||u(t,this.target))&&("INPUT"==t.tagName||"SELECT"==t.tagName||"TEXTAREA"==t.tagName||t.isContentEditable)},f.prototype.handleKey=function(){return this._handleKey.apply(this,arguments)},f.addKeycodes=function(e){for(var t in e)e.hasOwnProperty(t)&&(g[t]=e[t]);m=null},f.init=function(){var e,t=f(a);for(e in t)"_"!==e.charAt(0)&&(f[e]=function(e){return function(){return t[e].apply(t,arguments)}}(e))},f.init(),r.Mousetrap=f,"undefined"!=typeof e&&e.exports&&(e.exports=f),n(154)&&(o=function(){return f}.call(t,n,t,e),!(void 0!==o&&(e.exports=o)))}}("undefined"!=typeof window?window:null,"undefined"!=typeof window?document:null)},157:function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(){c(),oe=new J.default,oe.Get(),oe.GetAllTags(),void 0!=oe.unread.idx&&oe.unread.idx!=-1||0!=oe.unread.annotations.length||(ae=!0),V.Read(oe.unread.annotations),V.Write(y.storage.option.annote,C.auth.lock,function(e){oe.unread.annotations.push(e),"auto"==y.storage.option.annote.order&&oe.Order(),y.storage.option.annote.autosave&&oe.Write(function(t){B.Update("annote"),ae?(v(ae),ae=!1):v(ae),m(e),f(),y.storage.option.annote.autosave&&u(oe),B.Annotate(function(){return H.Render()}),0!=e.color&&x("create",e.id,e.note,e.tags,e.text),1==y.storage.user.rule&&location.protocol.startsWith("http")&&void 0!=oe.unread.idx&&j.promo.Rule("annotate")&&setTimeout(function(){return j.promo.Verify(function(){return j.promo.Notify()})},2e3)}),Y.Show(e.id)}),V.Toggle(y.storage.option.annote.off),Y.Listen(C.auth.lock,y.storage.option.annote,d),u(oe),k.Listen(l),ne.Darkmode("chrome-extension:"==location.protocol?y.storage.option.unreader.sametheme&&["dark","palenight","night"].includes(y.storage.option.unreader.theme)?"dark":y.storage.read.theme:"auto"==y.storage.option.darkmode&&U.default.isDarkmode()?"dark":y.storage.read.theme),"auto"==y.storage.option.darkmode&&U.default.DarkdmodeEvent(function(e){ne.Darkmode(e.matches?"dark":y.storage.read.theme)})}function i(){y.storage.Write(function(){},y.storage.simpread)}function s(e,t,n){V.Remove(e,t),oe.RemoveAnnote(e,n),u(oe),v()}function l(e){if(e.startsWith("an_")){var t=e.replace("an_","");"trigger"==t?$("sr-annote-trigger")[0].click():t.startsWith("color")?$('sr-anote-fb-item[color="'+t.replace("color","")+'"]')[0].click():t.startsWith("popup")?$('sr-anote-fb-item[type="note')[0].click():$('sr-annote-sidebar-option[type="'+t+'"]')[0].click()}}function c(){if(!($("sr-annote-trigger").length>0)){var e='<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="22" height="22"><path d="M724.010667 280.021333l89.984-89.984 59.989333 59.989333-89.984 91.989333zM150.016 249.984l59.989333-59.989333 89.984 89.984-59.989333 61.994667zM470.016 86.016l84.010667 0 0 128-84.010667 0 0-128zM256 598.016l0-214.016 512 0 0 214.016-128 128 0 212.010667-256 0 0-212.010667z" fill="#ffffff"></path></svg>',t='<sr-annote-trigger class="'+(y.storage.option.annote.off?"off":"")+'" data-balloon-pos="up" aria-label='+(y.storage.option.annote.off?"启用标注":"停用标注")+'><sr-i class="md-waves-effect">'+e+"</sr-i></sr-annote-trigger>";$(re?"html":y.storage.read.fap?"fap":"fab").append(t),setTimeout(function(){return $("sr-annote-trigger").addClass("open")},1e3),$("sr-annote-trigger").on("click",function(e){var t=!!$(e.currentTarget).hasClass("off");y.storage.option.annote.off=!t,V.Toggle(y.storage.option.annote.off),$("sr-annote-trigger").toggleClass("off"),$(e.currentTarget).attr("aria-label",y.storage.option.annote.off?"启用标注":"停用标注"),i()}),k.Bind([y.storage.option.annote.shortcuts.toLowerCase()],function(){$("sr-annote-trigger").click()}),k.Bind([y.storage.option.annote.keyboard.toLowerCase()],function(){$('sr-annote-floatingbar sr-anote-fb-item[data-color-type="'+y.storage.option.annote.color+'"]').click()}),k.Bind("mod+c",function(){y.storage.option.annote.autosave||y.storage.option.annote.off||0!=$("sr-read").length&&(B.Help("ctrl+c"),N.Clipboard2(V.copyHTML()))})}}function d(t,n,o,r,a,i){"color"!=t&&a==-1&&void 0==n&&(n=1);var l=function(e){V.Update({id:a,key:t,value:n,type:r,target:i},function(t){Y.Show(t.id),oe.AddAnnote(t,function(n){e(n,t),u(oe)},"auto"==y.storage.option.annote.order),v()})};if("note"==t||"tag"==t)a==-1?l(function(e,n){p(n.id,t)}):p(a,t);else if("remove"==t&&0==n)V.Remove(a,r),oe.RemoveAnnote(a,void 0,!1);else if("remove"==t)x("remove",a),s(a,r,function(e){f()});else if("color"==t)a==-1?l(function(e){f()}):!function(){var e="paragraph"==r&&"0"==$('sr-annote[data-id="'+a+'"]').attr("data-color-type");V.Update({id:a,key:t,value:n,type:r,style:C.auth.lock?0:y.storage.option.annote.style||0}),oe.UpdateByKey({id:a,key:t,value:n},function(t){f(),v(),u(oe),e&&m(oe.unread.annotations[oe.unread.annotations.length-1]),B.Annotate(function(){return H.Render()}),1==y.storage.user.rule&&location.protocol.startsWith("http")&&void 0!=oe.unread.idx&&j.promo.Rule("annotate")&&setTimeout(function(){return j.promo.Verify(function(){return j.promo.Notify()})},2e3)}),e&&"paragraph"==r&&x("create",a,"","",$('sr-annote[data-id="'+a+'"]').text())}();else if("style"==t){if("paragraph"!=r)return;if(h("floating"),C.auth.lock)return void g("floating");V.Update({id:a,key:t,value:n,type:r,style:o}),oe.UpdateByKey({id:a,key:t,value:n},function(e){v(),f()})}else"export"==t?(oe.FindAnnote(a),A.Action(y.storage.option.annote.exp_name,oe.unread.title,oe.unread.desc,[oe.annote],"annote")):"lock"==t?g("floating"):"copy"==t?("paragraph"==r&&N.Clipboard($('sr-annote[data-id="'+a+'"]').text().replace($('sr-annote-note[data-note-id="note-'+a+'"]').text(),""),'sr-annote[data-id="'+a+'"]'),"code"==r&&a!=-1&&N.Clipboard($('.sr-annote[data-id="'+a+'"]').text(),'.sr-annote[data-id="'+a+'"]'),"code"==r&&a==-1&&(new e).Render(2,"代码块仅支持已标注的复制操作。"),"code"==r&&a!=-1&&(new e).Render("已复制到剪切板。"),"paragraph"==r&&(new e).Render("已复制到剪切板。"),"img"==r&&(new e).Render(2,"不支持图片的复制。")):"link"==t&&(oe.FindAnnote(a),A.Action("refslink",oe.unread.title,oe.unread.desc,[oe.annote],"annote"))}function p(t,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"annote";oe.GetAllTags(),"annote"==o&&oe.FindAnnote(t),Q.Render(C.auth.lock,{data:"annote"==o?oe.annote:oe.unread,alltags:oe.tags,focus:n,mode:o},function(n){if("lock"==n)return void g("popup");if("unread"==o)!function(){var t="remove"==n?oe.unread.idx:n,o="remove"==n?"remove":"update";y.storage.UnRead(o,t,function(t){"update"==o&&(oe.unread=n),"update"==o&&(y.storage.unread=n),"update"==o&&f(),"update"==o&&u(oe),"remove"==n&&t&&(new e).Render(0,"删除成功， 2 秒后页面会自动刷新。"),"remove"==n&&t&&setTimeout(function(){location.reload()},2e3)})}();else if("remove"==n)x("remove",t),s(t,oe.annote.type,function(e){f()});else{x("update",n.id,n.note,n.tags),0==n.color&&(n.color=1);var r=n.color;V.Update({id:n.id,key:"color",value:r,type:n.type,style:n.style,target:n.target,note:n.note}),oe.Update(n,function(e){f(),u(oe)})}},function(e){})}function u(t){var n=function(){setTimeout(function(){var e=$("sr-annote-sidebar").height(),t=$("sr-annote-sidebar-cards").height()+$("sr-annote-sidebar-card[type=unread]").height()+$("sr-annote-sidebar-card[type=option]").height();$("sr-annote-sidebar").attr("srcoll",t+42+32-e>32?"on":"off")},200)};ee.Render(C.auth.lock,t.unread,y.storage.option.annote,function(o,r){if("anchor"==o){var a=$('sr-annote[data-id="'+r+'"], .sr-annote[data-id="'+r+'"]');a.length>0&&$("html, body").animate({scrollTop:a.offset().top})}else if("unread_edit"==o)p(r,void 0,"unread");else if("editor"==o)p(r);else if("remove"==o)s(r.id,r.type,function(e){f(),n(),x("remove",r.id)});else if(o.startsWith("option_"))if(o=o.replace("option_",""),"collapse"==o)$('sr-annote-sidebar-card[type!="option"]').map(function(e,t){var o=$(t),a=o.attr("data-id");o.attr("mode",r?"mini":"normal"),a&&localStorage.setItem("sr-annote-card-collapse-"+a,r?"mini":"normal"),n()});else if("mini"==o)$('sr-annote-sidebar-card[type!="option"]').toggleClass("off"),$('sr-annote-sidebar-card[type="option"]').toggleClass("mini"),$("sr-annote-sidebar-bg").toggleClass("mini"),$("sr-annote-sidebar").toggleClass("mini");else if("goon"==o)y.storage.option.annote.autosave=r,i();else if("show"==o)$('sr-annote-sidebar-card[type!="option"]').toggleClass("hide"),$("sr-annote, .sr-annote").toggleClass("sr-annote-hideall"),$("sr-annote-floating").toggleClass("sr-annote-floatingbar-hiden");else if("toc"==o){if(C.auth.lock)return void g("sidebar");V.TOC(y.storage.option.annote,function(e){void 0==t.unread.annotations?t.unread.annotations=e:t.unread.annotations=t.unread.annotations.concat(e),t.Write(function(e){v(),f(),u(t)})})}else"remove"==o?(new e).Render("snackbar","是否删除当前稍后读（包括标注）","同意 ",function(){y.storage.UnRead("remove",r,function(t){t&&(new e).Render(0,"删除成功， 2 秒后页面会自动刷新。"),t&&setTimeout(function(){location.reload()},2e3)})}):"export"==o?(y.storage.option.annote.exp_mode=r,i()):C.auth.lock&&"drag"==o?g("sidebar"):"open"==o&&_.browser.runtime.sendMessage(M.Add(M.MESSAGE_ACTION.new_tab,{url:_.browser.extension.getURL("options/options.html#labs?anchor=标注")}))},function(){h("drag"),C.auth.lock?g("drag"):t.Write(function(e){})},function(){_.browser.runtime.sendMessage(M.Add(M.MESSAGE_ACTION.track,{eventCategory:"unreader",eventAction:"addunreader",eventValue:"addunreader"}))}),n()}function f(){re&&parent.postMessage({status:"refresh",data:oe.unread},"*")}function m(e){V.isIncludeImg(e.html,function(t,n){e.html=e.html.replace(/<img [-@\w "':.\/=;]+>/gi,""),oe.Update(e,function(t){d("color",e.color,e.style,"img",-1,n)})})}function g(e){P.Render(!0,C.auth.token,function(e){})}function h(e){var t=function(e,t,n){R.Render(e,t,n,function(e){"contact"==e.type&&_.browser.runtime.sendMessage(M.Add(M.MESSAGE_ACTION.new_tab,{url:"https://wj.qq.com/s2/6361600/a19b/"}))})};return C.auth.lock?void t("lock",C.auth.lock_status,C.auth.code[C.auth.lock_status]):void _.browser.runtime.sendMessage(M.Add(M.MESSAGE_ACTION.verify_rule,{type:e,uid:y.storage.user.uid}),function(e){e&&(C.auth.lock=!0,C.auth.lock_status=e.status,t("lock",e.code,C.auth.code[e.status]))})}function b(e,t,n,o){if("both"==y.storage.option.annote.exp_mode){if(y.storage.option.annote.export=!1,!["html","offlinehtml","markdown","offlinemarkdown","markdeep","epub","pdf","textbundle"].includes(e))return!0;if(e.startsWith("automated_")||e.startsWith("webhook_"))return!0;y.storage.unread&&y.storage.unread.annotations&&y.storage.unread.annotations.length>0&&setTimeout(function(){y.storage.option.annote.export=!0,A.Action(e,t,n,o)},400)}}function v(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];I.Verify()&&!function(){var t=[$("sr-rd-title").text().trim(),$("sr-rd-desc").text().trim(),$("sr-rd-content").html().trim()],n=t[0],o=t[1],r=t[2];I.Run(e,function(e){A.isSyncAction(e)||(b(e,n,o,r),A.Action(e,n,o,r))})}()}function x(e,t,n,o,r){I.Verify()&&I.Run(!1,function(a){A.isSyncAction(a)&&A.Sync(a,e,t,n,o,r,oe.unread.url)})}Object.defineProperty(t,"__esModule",{value:!0}),t.Save=t.Render=void 0,n(250);var y=n(4),w=n(41),k=r(w),E=n(52),A=r(E),C=n(21),_=n(3),S=n(6),M=r(S),T=n(29),N=r(T),O=n(73),I=r(O),z=n(72),R=r(z),j=n(89),L=n(36),P=r(L),D=n(160),H=r(D),W=n(33),B=r(W),F=n(23),U=o(F),G=n(187),V=r(G),q=n(188),Y=r(q),K=n(88),J=o(K),X=n(130),Q=r(X),Z=n(189),ee=r(Z),te=n(190),ne=r(te),oe=void 0,re=!location.href.startsWith("http"),ae=!1;t.Render=a,t.Save=v}).call(t,n(7))},160:function(e,t,n){(function(e){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function c(){!b.Popup(E)&&b.Open(e.createElement(A,null),k),w.Render({root:".simpread-tipsalert-root"})}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0;var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(71),n(66),n(252);var p=n(9),u=r(p),f=n(6),m=r(f),g=n(3),h=n(30),b=r(h),v=n(10),x=o(v),y=n(17),w=r(y),k="simpread-tipsalert-root",E="."+k,A=function(t){function n(){return i(this,n),s(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return l(n,t),d(n,[{key:"close",value:function(){$(".simpread-tipsalert-root ").removeClass("open"),setTimeout(function(){return b.Close()},400)}},{key:"carousel",value:function(){$(".carousel.carousel-slider").carousel({fullWidth:!0})}},{key:"onNavigateClick",value:function(e){$(".carousel.carousel-slider").carousel(e)}},{key:"onDetailClick",value:function(){g.browser.runtime.sendMessage(m.Add(m.MESSAGE_ACTION.new_tab,{url:"http://ksria.com/simpread/docs/#/标注?id=如何使用"}))}},{key:"componentDidMount",value:function(){this.carousel(),$(".tipsimg").on("error",function(e){$(e.currentTarget).addClass("error")})}},{key:"render",value:function(){var t,n=this;return e.createElement(b.Dialog,null,e.createElement(b.Content,null,e.createElement("sr-div",{class:"close"},e.createElement(x.default,{shape:"circle",width:"36px",color:"#fff",backgroundColor:"transparent",icon:u.IconPath("close_icon"),onClick:function(){return n.close()}})),e.createElement("sr-div",{class:"details"},e.createElement("sr-div",{class:"carousels"},e.createElement("div",{className:"carousel carousel-slider","data-indicators":"true"},e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:u.IconPath("welcome-2","webp")}),e.createElement("sr-div",{class:"descr large"},"欢迎使用 ",e.createElement("b",null,"简悦 · 标注系统")))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("sr-div-center",null,e.createElement("sr-video",null,e.createElement("img",{className:"tipsimg",src:"https://simpread-1254315611.file.myqcloud.com/static/annote/img-floating.png"}))),e.createElement("sr-div",{class:"descr"},"鼠标移动到 ",e.createElement("b",null,"图片")," 或 ",e.createElement("b",null,"代码段")," 自动出现 ",e.createElement("b",null,"浮动工具栏")))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("sr-div-center",null,e.createElement("sr-video",null,e.createElement("img",{className:"tipsimg",src:"https://simpread-1254315611.file.myqcloud.com/static/annote/text-floating.png"}))),e.createElement("sr-div",{class:"descr"},"鼠标在段落上 ",e.createElement("b",null,"按住再移动鼠标划线")," 的方式也会出现 ",e.createElement("b",null,"浮动工具栏")))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("sr-div-center",null,e.createElement("sr-video",null,e.createElement("img",(t={className:"tipsimg"},a(t,"className","tipsimg"),a(t,"src","https://simpread-1254315611.file.myqcloud.com/static/annote/color-style.png"),t)))),e.createElement("sr-div",{class:"descr"},"在 ",e.createElement("b",null,"浮动工具栏")," 上选择 ",e.createElement("b",null,"颜色/样式")," 即可进行 ",e.createElement("b",null,"标注")))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("sr-div-center",null,e.createElement("sr-video",null,e.createElement("img",{className:"tipsimg",src:"https://simpread-1254315611.file.myqcloud.com/static/annote/note-tag.png"}))),e.createElement("sr-div",{class:"descr"},"在 ",e.createElement("b",null,"浮动工具栏")," 上也可添加 ",e.createElement("b",null,"备注/标签")))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("sr-div-center",null,e.createElement("img",{className:"tipsimg",src:"https://simpread-1254315611.file.myqcloud.com/static/annote/sidebar.webp"})),e.createElement("sr-div",{class:"descr"},"只要添加了标注，就会在右侧出现 ",e.createElement("b",null,"标注侧栏"),"，并可管理当前页面的标注"))),e.createElement("sr-div",{class:"carousel-item"},e.createElement("setion",null,e.createElement("img",{src:"http://sr.ksria.cn/welcome-annoate-pro.webp"}),e.createElement("div",{className:"descr"},"多种标注样式 · 标注拖拽排序，更多内容 ",e.createElement("b",null,"请点击下方查看"))))))),e.createElement("sr-div",{class:"floating"},e.createElement("sr-span",{class:"docs md-waves-effect",onClick:function(){return n.onDetailClick()}},e.createElement("sr-span",null,"查看详细说明"))),e.createElement("footer",null,e.createElement(x.default,{shape:"circle",width:"40px",color:"#fff",backgroundColor:"#4CAF50",icon:u.IconPath("prev_icon"),waves:"md-waves-effect md-waves-button",onClick:function(){return n.onNavigateClick("prev")}}),e.createElement(x.default,{shape:"circle",width:"40px",color:"#fff",backgroundColor:"#4CAF50",icon:u.IconPath("next_icon"),waves:"md-waves-effect md-waves-button",onClick:function(){return n.onNavigateClick("next")}}))))}}]),n}(e.Component);t.Render=c}).call(t,n(2))},185:function(e,t,n){function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r,a,i=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(o,i){"object"==s(t)&&"undefined"!=typeof e?e.exports=i():(r=i,a="function"==typeof r?r.call(t,n,t,e):r,!(void 0!==a&&(e.exports=a)))}(void 0,function(){"use strict";var e=function(){function e(t){var n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:5e3;o(this,e),this.ctx=t,this.iframes=n,this.exclude=r,this.iframesTimeout=a}return i(e,[{key:"getContexts",value:function(){var e=void 0,t=[];return(e=void 0!==this.ctx&&this.ctx?NodeList.prototype.isPrototypeOf(this.ctx)?Array.prototype.slice.call(this.ctx):Array.isArray(this.ctx)?this.ctx:"string"==typeof this.ctx?Array.prototype.slice.call(document.querySelectorAll(this.ctx)):[this.ctx]:[]).forEach(function(e){var n=t.filter(function(t){return t.contains(e)}).length>0;-1!==t.indexOf(e)||n||t.push(e)}),t}},{key:"getIframeContents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(){},o=void 0;try{var r=e.contentWindow;if(o=r.document,!r||!o)throw new Error("iframe inaccessible")}catch(e){n()}o&&t(o)}},{key:"isIframeBlank",value:function(e){var t="about:blank",n=e.getAttribute("src").trim(),o=e.contentWindow.location.href;return o===t&&n!==t&&n}},{key:"observeIframeLoad",value:function(e,t,n){var o=this,r=!1,a=null,i=function i(){if(!r){r=!0,clearTimeout(a);try{o.isIframeBlank(e)||(e.removeEventListener("load",i),o.getIframeContents(e,t,n))}catch(e){n()}}};e.addEventListener("load",i),a=setTimeout(i,this.iframesTimeout)}},{key:"onIframeReady",value:function(e,t,n){try{"complete"===e.contentWindow.document.readyState?this.isIframeBlank(e)?this.observeIframeLoad(e,t,n):this.getIframeContents(e,t,n):this.observeIframeLoad(e,t,n);
}catch(e){n()}}},{key:"waitForIframes",value:function(e,t){var n=this,o=0;this.forEachIframe(e,function(){return!0},function(e){o++,n.waitForIframes(e.querySelector("html"),function(){--o||t()})},function(e){e||t()})}},{key:"forEachIframe",value:function(t,n,o){var r=this,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},i=t.querySelectorAll("iframe"),s=i.length,l=0;i=Array.prototype.slice.call(i);var c=function(){--s<=0&&a(l)};s||c(),i.forEach(function(t){e.matches(t,r.exclude)?c():r.onIframeReady(t,function(e){n(t)&&(l++,o(e)),c()},c)})}},{key:"createIterator",value:function(e,t,n){return document.createNodeIterator(e,t,n,!1)}},{key:"createInstanceOnIframe",value:function(t){return new e(t.querySelector("html"),this.iframes)}},{key:"compareNodeIframe",value:function(e,t,n){var o=e.compareDocumentPosition(n),r=Node.DOCUMENT_POSITION_PRECEDING;if(o&r){if(null===t)return!0;if(t.compareDocumentPosition(n)&Node.DOCUMENT_POSITION_FOLLOWING)return!0}return!1}},{key:"getIteratorNode",value:function(e){var t=e.previousNode(),n=void 0;return{prevNode:t,node:n=null===t?e.nextNode():e.nextNode()&&e.nextNode()}}},{key:"checkIframeFilter",value:function(e,t,n,o){var r=!1,a=!1;return o.forEach(function(e,t){e.val===n&&(r=t,a=e.handled)}),this.compareNodeIframe(e,t,n)?(!1!==r||a?!1===r||a||(o[r].handled=!0):o.push({val:n,handled:!0}),!0):(!1===r&&o.push({val:n,handled:!1}),!1)}},{key:"handleOpenIframes",value:function(e,t,n,o){var r=this;e.forEach(function(e){e.handled||r.getIframeContents(e.val,function(e){r.createInstanceOnIframe(e).forEachNode(t,n,o)})})}},{key:"iterateThroughNodes",value:function(e,t,n,o,r){for(var a=this,i=this.createIterator(t,e,o),s=void 0,l=void 0,c=[],d=[],p=function(){var e;return e=a.getIteratorNode(i),l=e.prevNode,s=e.node};p();)this.iframes&&this.forEachIframe(t,function(e){return a.checkIframeFilter(s,l,e,c)},function(t){a.createInstanceOnIframe(t).forEachNode(e,function(e){return d.push(e)},o)}),d.push(s);d.forEach(function(e){n(e)}),this.iframes&&this.handleOpenIframes(c,e,n,o),r()}},{key:"forEachNode",value:function(e,t,n){var o=this,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(){},a=this.getContexts(),i=a.length;i||r(),a.forEach(function(a){var s=function(){o.iterateThroughNodes(e,a,t,n,function(){--i<=0&&r()})};o.iframes?o.waitForIframes(a,s):s()})}}],[{key:"matches",value:function(e,t){var n="string"==typeof t?[t]:t,o=e.matches||e.matchesSelector||e.msMatchesSelector||e.mozMatchesSelector||e.oMatchesSelector||e.webkitMatchesSelector;if(o){var r=!1;return n.every(function(t){return!o.call(e,t)||(r=!0,!1)}),r}return!1}}]),e}(),t=function(){function t(e){o(this,t),this.ctx=e,this.ie=!1;var n=window.navigator.userAgent;(n.indexOf("MSIE")>-1||n.indexOf("Trident")>-1)&&(this.ie=!0)}return i(t,[{key:"log",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"debug",n=this.opt.log;this.opt.debug&&"object"==("undefined"==typeof n?"undefined":s(n))&&"function"==typeof n[t]&&n[t]("mark.js: "+e)}},{key:"escapeStr",value:function(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}},{key:"createRegExp",value:function(e){return"disabled"!==this.opt.wildcards&&(e=this.setupWildcardsRegExp(e)),e=this.escapeStr(e),Object.keys(this.opt.synonyms).length&&(e=this.createSynonymsRegExp(e)),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),this.opt.diacritics&&(e=this.createDiacriticsRegExp(e)),e=this.createMergedBlanksRegExp(e),(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.createJoinersRegExp(e)),"disabled"!==this.opt.wildcards&&(e=this.createWildcardsRegExp(e)),e=this.createAccuracyRegExp(e)}},{key:"createSynonymsRegExp",value:function(e){var t=this.opt.synonyms,n=this.opt.caseSensitive?"":"i",o=this.opt.ignoreJoiners||this.opt.ignorePunctuation.length?"\0":"";for(var r in t)if(t.hasOwnProperty(r)){var a=t[r],i="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(r):this.escapeStr(r),s="disabled"!==this.opt.wildcards?this.setupWildcardsRegExp(a):this.escapeStr(a);""!==i&&""!==s&&(e=e.replace(new RegExp("("+this.escapeStr(i)+"|"+this.escapeStr(s)+")","gm"+n),o+("("+this.processSynomyms(i)+"|")+(this.processSynomyms(s)+")")+o))}return e}},{key:"processSynomyms",value:function(e){return(this.opt.ignoreJoiners||this.opt.ignorePunctuation.length)&&(e=this.setupIgnoreJoinersRegExp(e)),e}},{key:"setupWildcardsRegExp",value:function(e){return(e=e.replace(/(?:\\)*\?/g,function(e){return"\\"===e.charAt(0)?"?":""})).replace(/(?:\\)*\*/g,function(e){return"\\"===e.charAt(0)?"*":""})}},{key:"createWildcardsRegExp",value:function(e){var t="withSpaces"===this.opt.wildcards;return e.replace(/\u0001/g,t?"[\\S\\s]?":"\\S?").replace(/\u0002/g,t?"[\\S\\s]*?":"\\S*")}},{key:"setupIgnoreJoinersRegExp",value:function(e){return e.replace(/[^(|)\\]/g,function(e,t,n){var o=n.charAt(t+1);return/[(|)\\]/.test(o)||""===o?e:e+"\0"})}},{key:"createJoinersRegExp",value:function(e){var t=[],n=this.opt.ignorePunctuation;return Array.isArray(n)&&n.length&&t.push(this.escapeStr(n.join(""))),this.opt.ignoreJoiners&&t.push("\\u00ad\\u200b\\u200c\\u200d"),t.length?e.split(/\u0000+/).join("["+t.join("")+"]*"):e}},{key:"createDiacriticsRegExp",value:function(e){var t=this.opt.caseSensitive?"":"i",n=this.opt.caseSensitive?["aàáảãạăằắẳẵặâầấẩẫậäåāą","AÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćč","CÇĆČ","dđď","DĐĎ","eèéẻẽẹêềếểễệëěēę","EÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïī","IÌÍỈĨỊÎÏĪ","lł","LŁ","nñňń","NÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøō","OÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rř","RŘ","sšśșş","SŠŚȘŞ","tťțţ","TŤȚŢ","uùúủũụưừứửữựûüůū","UÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿ","YÝỲỶỸỴŸ","zžżź","ZŽŻŹ"]:["aàáảãạăằắẳẵặâầấẩẫậäåāąAÀÁẢÃẠĂẰẮẲẴẶÂẦẤẨẪẬÄÅĀĄ","cçćčCÇĆČ","dđďDĐĎ","eèéẻẽẹêềếểễệëěēęEÈÉẺẼẸÊỀẾỂỄỆËĚĒĘ","iìíỉĩịîïīIÌÍỈĨỊÎÏĪ","lłLŁ","nñňńNÑŇŃ","oòóỏõọôồốổỗộơởỡớờợöøōOÒÓỎÕỌÔỒỐỔỖỘƠỞỠỚỜỢÖØŌ","rřRŘ","sšśșşSŠŚȘŞ","tťțţTŤȚŢ","uùúủũụưừứửữựûüůūUÙÚỦŨỤƯỪỨỬỮỰÛÜŮŪ","yýỳỷỹỵÿYÝỲỶỸỴŸ","zžżźZŽŻŹ"],o=[];return e.split("").forEach(function(r){n.every(function(n){if(-1!==n.indexOf(r)){if(o.indexOf(n)>-1)return!1;e=e.replace(new RegExp("["+n+"]","gm"+t),"["+n+"]"),o.push(n)}return!0})}),e}},{key:"createMergedBlanksRegExp",value:function(e){return e.replace(/[\s]+/gim,"[\\s]+")}},{key:"createAccuracyRegExp",value:function(e){var t=this,n="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~¡¿",o=this.opt.accuracy,r="string"==typeof o?o:o.value,a="string"==typeof o?[]:o.limiters,i="";switch(a.forEach(function(e){i+="|"+t.escapeStr(e)}),r){case"partially":default:return"()("+e+")";case"complementary":return"()([^"+(i="\\s"+(i||this.escapeStr(n)))+"]*"+e+"[^"+i+"]*)";case"exactly":return"(^|\\s"+i+")("+e+")(?=$|\\s"+i+")"}}},{key:"getSeparatedKeywords",value:function(e){var t=this,n=[];return e.forEach(function(e){t.opt.separateWordSearch?e.split(" ").forEach(function(e){e.trim()&&-1===n.indexOf(e)&&n.push(e)}):e.trim()&&-1===n.indexOf(e)&&n.push(e)}),{keywords:n.sort(function(e,t){return t.length-e.length}),length:n.length}}},{key:"isNumeric",value:function(e){return Number(parseFloat(e))==e}},{key:"checkRanges",value:function(e){var t=this;if(!Array.isArray(e)||"[object Object]"!==Object.prototype.toString.call(e[0]))return this.log("markRanges() will only accept an array of objects"),this.opt.noMatch(e),[];var n=[],o=0;return e.sort(function(e,t){return e.start-t.start}).forEach(function(e){var r=t.callNoMatchOnInvalidRanges(e,o),a=r.start,i=r.end,s=r.valid;s&&(e.start=a,e.length=i-a,n.push(e),o=i)}),n}},{key:"callNoMatchOnInvalidRanges",value:function(e,t){var n=void 0,o=void 0,r=!1;return e&&void 0!==e.start?(o=(n=parseInt(e.start,10))+parseInt(e.length,10),this.isNumeric(e.start)&&this.isNumeric(e.length)&&o-t>0&&o-n>0?r=!0:(this.log("Ignoring invalid or overlapping range: "+JSON.stringify(e)),this.opt.noMatch(e))):(this.log("Ignoring invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:n,end:o,valid:r}}},{key:"checkWhitespaceRanges",value:function(e,t,n){var o=void 0,r=!0,a=n.length,i=t-a,s=parseInt(e.start,10)-i;return(o=(s=s>a?a:s)+parseInt(e.length,10))>a&&(o=a,this.log("End range automatically set to the max value of "+a)),s<0||o-s<0||s>a||o>a?(r=!1,this.log("Invalid range: "+JSON.stringify(e)),this.opt.noMatch(e)):""===n.substring(s,o).replace(/\s+/g,"")&&(r=!1,this.log("Skipping whitespace only range: "+JSON.stringify(e)),this.opt.noMatch(e)),{start:s,end:o,valid:r}}},{key:"getTextNodes",value:function(e){var t=this,n="",o=[];this.iterator.forEachNode(NodeFilter.SHOW_TEXT,function(e){o.push({start:n.length,end:(n+=e.textContent).length,node:e})},function(e){return t.matchesExclude(e.parentNode)?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},function(){e({value:n,nodes:o})})}},{key:"matchesExclude",value:function(t){return e.matches(t,this.opt.exclude.concat(["script","style","title","head","html"]))}},{key:"wrapRangeInTextNode",value:function(e,t,n){var o=this.opt.element?this.opt.element:"mark",r=e.splitText(t),a=r.splitText(n-t),i=document.createElement(o);return i.setAttribute("data-markjs","true"),this.opt.className&&i.setAttribute("class",this.opt.className),i.textContent=r.textContent,r.parentNode.replaceChild(i,r),a}},{key:"wrapRangeInMappedTextNode",value:function(e,t,n,o,r){var a=this;e.nodes.every(function(i,l){var c=e.nodes[l+1];if(void 0===c||c.start>t){var d=function(){if(!o(i.node))return{v:!1};var s=t-i.start,c=(n>i.end?i.end:n)-i.start,d=e.value.substr(0,i.start),p=e.value.substr(c+i.start);return i.node=a.wrapRangeInTextNode(i.node,s,c),e.value=d+p,e.nodes.forEach(function(t,n){n>=l&&(e.nodes[n].start>0&&n!==l&&(e.nodes[n].start-=c),e.nodes[n].end-=c)}),n-=c,r(i.node.previousSibling,i.start),n>i.end?void(t=i.end):{v:!1}}();if("object"===("undefined"==typeof d?"undefined":s(d)))return d.v}return!0})}},{key:"wrapMatches",value:function(e,t,n,o,r){var a=this,i=0===t?0:t+1;this.getTextNodes(function(t){t.nodes.forEach(function(t){var r=void 0;for(t=t.node;null!==(r=e.exec(t.textContent))&&""!==r[i];)if(n(r[i],t)){var s=r.index;if(0!==i)for(var l=1;l<i;l++)s+=r[l].length;t=a.wrapRangeInTextNode(t,s,s+r[i].length),o(t.previousSibling),e.lastIndex=0}}),r()})}},{key:"wrapMatchesAcrossElements",value:function(e,t,n,o,r){var a=this,i=0===t?0:t+1;this.getTextNodes(function(t){for(var s=void 0;null!==(s=e.exec(t.value))&&""!==s[i];){var l=s.index;if(0!==i)for(var c=1;c<i;c++)l+=s[c].length;var d=l+s[i].length;a.wrapRangeInMappedTextNode(t,l,d,function(e){return n(s[i],e)},function(t,n){e.lastIndex=n,o(t)})}r()})}},{key:"wrapRangeFromIndex",value:function(e,t,n,o){var r=this;this.getTextNodes(function(a){var i=a.value.length;e.forEach(function(e,o){var s=r.checkWhitespaceRanges(e,i,a.value),l=s.start,c=s.end,d=s.valid;d&&r.wrapRangeInMappedTextNode(a,l,c,function(n){return t(n,e,a.value.substring(l,c),o)},function(t){n(t,e)})}),o()})}},{key:"unwrapMatches",value:function(e){for(var t=e.parentNode,n=document.createDocumentFragment();e.firstChild;)n.appendChild(e.removeChild(e.firstChild));t.replaceChild(n,e),this.ie?this.normalizeTextNode(t):t.normalize()}},{key:"normalizeTextNode",value:function(e){if(e){if(3===e.nodeType)for(;e.nextSibling&&3===e.nextSibling.nodeType;)e.nodeValue+=e.nextSibling.nodeValue,e.parentNode.removeChild(e.nextSibling);else this.normalizeTextNode(e.firstChild);this.normalizeTextNode(e.nextSibling)}}},{key:"markRegExp",value:function(e,t){var n=this;this.opt=t,this.log('Searching with expression "'+e+'"');var o=0,r="wrapMatches",a=function(e){o++,n.opt.each(e)};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),this[r](e,this.opt.ignoreGroups,function(e,t){return n.opt.filter(t,e,o)},a,function(){0===o&&n.opt.noMatch(e),n.opt.done(o)})}},{key:"mark",value:function(e,t){var n=this;this.opt=t;var o=0,r="wrapMatches",a=this.getSeparatedKeywords("string"==typeof e?[e]:e),i=a.keywords,s=a.length,l=this.opt.caseSensitive?"":"i",c=function e(t){var a=new RegExp(n.createRegExp(t),"gm"+l),c=0;n.log('Searching with expression "'+a+'"'),n[r](a,1,function(e,r){return n.opt.filter(r,t,o,c)},function(e){c++,o++,n.opt.each(e)},function(){0===c&&n.opt.noMatch(t),i[s-1]===t?n.opt.done(o):e(i[i.indexOf(t)+1])})};this.opt.acrossElements&&(r="wrapMatchesAcrossElements"),0===s?this.opt.done(o):c(i[0])}},{key:"markRanges",value:function(e,t){var n=this;this.opt=t;var o=0,r=this.checkRanges(e);r&&r.length?(this.log("Starting to mark with the following ranges: "+JSON.stringify(r)),this.wrapRangeFromIndex(r,function(e,t,o,r){return n.opt.filter(e,t,o,r)},function(e,t){o++,n.opt.each(e,t)},function(){n.opt.done(o)})):this.opt.done(o)}},{key:"unmark",value:function(t){var n=this;this.opt=t;var o=this.opt.element?this.opt.element:"*";o+="[data-markjs]",this.opt.className&&(o+="."+this.opt.className),this.log('Removal selector "'+o+'"'),this.iterator.forEachNode(NodeFilter.SHOW_ELEMENT,function(e){n.unwrapMatches(e)},function(t){var r=e.matches(t,o),a=n.matchesExclude(t);return!r||a?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_ACCEPT},this.opt.done)}},{key:"opt",set:function(e){this._opt=Object.assign({},{element:"",className:"",exclude:[],iframes:!1,iframesTimeout:5e3,separateWordSearch:!0,diacritics:!0,synonyms:{},accuracy:"partially",acrossElements:!1,caseSensitive:!1,ignoreJoiners:!1,ignoreGroups:0,ignorePunctuation:[],wildcards:"disabled",each:function(){},noMatch:function(){},filter:function(){return!0},done:function(){},debug:!1,log:window.console},e)},get:function(){return this._opt}},{key:"iterator",get:function(){return new e(this.ctx,this.opt.iframes,this.opt.exclude,this.opt.iframesTimeout)}}]),t}();return function(e){var n=this,o=new t(e);return this.mark=function(e,t){return o.mark(e,t),n},this.markRegExp=function(e,t){return o.markRegExp(e,t),n},this.markRanges=function(e,t){return o.markRanges(e,t),n},this.unmark=function(e){return o.unmark(e),n},this}})},186:function(e,t){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){function t(e,t){return m(e).color()===m(t).color()}function n(e,t){e=e||{};for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n]);return e}function o(e){return e.filter(function(e,t,n){return n.indexOf(e)===t})}function r(e){var t=e.startContainer,n=e.endContainer,o=e.commonAncestorContainer,r=!0;if(0===e.endOffset){for(;!n.previousSibling&&n.parentNode!==o;)n=n.parentNode;n=n.previousSibling}else n.nodeType===u.TEXT_NODE?e.endOffset<n.nodeValue.length&&n.splitText(e.endOffset):e.endOffset>0&&(n=n.childNodes.item(e.endOffset-1));return t.nodeType===u.TEXT_NODE?e.startOffset===t.nodeValue.length?r=!1:e.startOffset>0&&(t=t.splitText(e.startOffset),n===t.previousSibling&&(n=t)):t=e.startOffset<t.childNodes.length?t.childNodes.item(e.startOffset):t.nextSibling,{startContainer:t,endContainer:n,goDeeper:r}}function a(e,t){e.sort(function(e,n){return m(t?n:e).parents().length-m(t?e:n).parents().length})}function i(e){var t=[],n={},o=[];return e.forEach(function(e){var o=e.getAttribute(p);"undefined"==typeof n[o]&&(n[o]=[],t.push(o)),n[o].push(e)}),t.forEach(function(e){var t=n[e];o.push({chunks:t,timestamp:e,toString:function(){return t.map(function(e){return e.textContent}).join("")}})}),o}function s(e,t){e.addEventListener("mouseup",t.highlightHandler.bind(t)),e.addEventListener("touchend",t.highlightHandler.bind(t))}function l(e,t){e.removeEventListener("mouseup",t.highlightHandler.bind(t)),e.removeEventListener("touchend",t.highlightHandler.bind(t))}function c(e,t){if(!e)throw"Missing anchor element";this.el=e,this.options=n(t,{color:"#ffff7b",highlightedClass:"highlighted",contextClass:"highlighter-context",onRemoveHighlight:function(){return!0},onBeforeHighlight:function(){return!0},onAfterHighlight:function(){}}),m(this.el).addClass(this.options.contextClass),s(this.el,this)}var d="data-highlighted",p="data-id",u={ELEMENT_NODE:1,TEXT_NODE:3},f=["SCRIPT","STYLE","SELECT","OPTION","BUTTON","OBJECT","APPLET","VIDEO","AUDIO","CANVAS","EMBED","PARAM","METER","PROGRESS"],m=function e(t){return{addClass:function(e){t.classList?t.classList.add(e):t.className+=" "+e},removeClass:function(e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e+"(\\b|$)","gi")," ")},prepend:function(e){for(var n=Array.prototype.slice.call(e),o=n.length;o--;)t.insertBefore(n[o],t.firstChild)},append:function(e){for(var n=Array.prototype.slice.call(e),o=0,r=n.length;o<r;++o)t.appendChild(n[o])},insertAfter:function(e){return e.parentNode.insertBefore(t,e.nextSibling)},insertBefore:function(e){return e.parentNode.insertBefore(t,e)},remove:function(){t.parentNode.removeChild(t),t=null},contains:function(e){return t!==e&&t.contains(e)},wrap:function(e){return t.parentNode&&t.parentNode.insertBefore(e,t),e.appendChild(t),e},unwrap:function(){var n,o=Array.prototype.slice.call(t.childNodes);return o.forEach(function(t){n=t.parentNode,e(t).insertBefore(t.parentNode),e(n).remove()}),o},parents:function(){for(var e,n=[];e=t.parentNode;)n.push(e),t=e;return n},normalizeTextNodes:function(){if(t){if(t.nodeType===u.TEXT_NODE)for(;t.nextSibling&&t.nextSibling.nodeType===u.TEXT_NODE;)t.nodeValue+=t.nextSibling.nodeValue,t.parentNode.removeChild(t.nextSibling);else e(t.firstChild).normalizeTextNodes();e(t.nextSibling).normalizeTextNodes()}},color:function(){return t.style.backgroundColor},fromHTML:function(e){var t=document.createElement("div");return t.innerHTML=e,t.childNodes},getRange:function(){var n,o=e(t).getSelection();return o.rangeCount>0&&(n=o.getRangeAt(0)),n},removeAllRanges:function(){var n=e(t).getSelection();n.removeAllRanges()},getSelection:function(){return e(t).getWindow().getSelection()},getWindow:function(){return e(t).getDocument().defaultView},getDocument:function(){return t.ownerDocument||t}}};c.prototype.destroy=function(){l(this.el,this),m(this.el).removeClass(this.options.contextClass)},c.prototype.highlightHandler=function(){this.doHighlight()},c.prototype.doHighlight=function(e){try{var t,n,o,r,a=m(this.el).getRange();if(!a||a.collapsed)return;this.options.onBeforeHighlight(a)===!0&&(r=+new Date,t=c.createWrapper(this.options),t.setAttribute(p,r),n=this.highlightRange(a,t),o=this.normalizeHighlights(n),this.options.onAfterHighlight(a,o,r)),e||m(this.el).removeAllRanges()}catch(e){}},c.prototype.highlightRange=function(e,t){if(!e||e.collapsed)return[];var n,o,a,i=r(e),s=i.startContainer,l=i.endContainer,c=i.goDeeper,d=!1,p=s,g=[];do c&&p.nodeType===u.TEXT_NODE&&(f.indexOf(p.parentNode.tagName)===-1&&""!==p.nodeValue.trim()&&(o=t.cloneNode(!0),a=p.parentNode,(m(this.el).contains(a)||a===this.el)&&(n=m(p).wrap(o),g.push(n))),c=!1),p!==l||l.hasChildNodes()&&c||(d=!0),p.tagName&&f.indexOf(p.tagName)>-1&&(l.parentNode===p&&(d=!0),c=!1),c&&p.hasChildNodes()?p=p.firstChild:p.nextSibling?(p=p.nextSibling,c=!0):(p=p.parentNode,c=!1);while(!d);return g},c.prototype.normalizeHighlights=function(e){var t;return this.flattenNestedHighlights(e),this.mergeSiblingHighlights(e),t=e.filter(function(e){return e.parentElement?e:null}),t=o(t),t.sort(function(e,t){return e.offsetTop-t.offsetTop||e.offsetLeft-t.offsetLeft}),t},c.prototype.flattenNestedHighlights=function(e){function n(){var n=!1;return e.forEach(function(o,a){var i=o.parentElement,s=i.previousSibling,l=i.nextSibling;r.isHighlight(i)&&(t(i,o)?(i.replaceChild(o.firstChild,o),e[a]=i,n=!0):(o.nextSibling||(m(o).insertBefore(l||i),n=!0),o.previousSibling||(m(o).insertAfter(s||i),n=!0),i.hasChildNodes()||m(i).remove()))}),n}var o,r=this;a(e,!0);do o=n();while(o)},c.prototype.mergeSiblingHighlights=function(e){function n(e,n){return n&&n.nodeType===u.ELEMENT_NODE&&t(e,n)&&o.isHighlight(n)}var o=this;e.forEach(function(e){var t=e.previousSibling,o=e.nextSibling;n(e,t)&&(m(e).prepend(t.childNodes),m(t).remove()),n(e,o)&&(m(e).append(o.childNodes),m(o).remove()),m(e).normalizeTextNodes()})},c.prototype.setColor=function(e){this.options.color=e},c.prototype.getColor=function(){return this.options.color},c.prototype.removeHighlights=function(e){function t(e){var t=e.previousSibling,n=e.nextSibling;t&&t.nodeType===u.TEXT_NODE&&(e.nodeValue=t.nodeValue+e.nodeValue,m(t).remove()),n&&n.nodeType===u.TEXT_NODE&&(e.nodeValue=e.nodeValue+n.nodeValue,m(n).remove())}function n(e){var n=m(e).unwrap();n.forEach(function(e){t(e)})}var o=e||this.el,r=this.getHighlights({container:o}),i=this;a(r,!0),r.forEach(function(e){i.options.onRemoveHighlight(e)===!0&&n(e)})},c.prototype.getHighlights=function(e){e=n(e,{container:this.el,andSelf:!0,grouped:!1});var t=e.container.querySelectorAll("["+d+"]"),o=Array.prototype.slice.call(t);return e.andSelf===!0&&e.container.hasAttribute(d)&&o.push(e.container),e.grouped&&(o=i(o)),o},c.prototype.isHighlight=function(e){return e&&e.nodeType===u.ELEMENT_NODE&&e.hasAttribute(d)},c.prototype.serializeHighlights=function(){function e(e,t){var n,o=[];do n=Array.prototype.slice.call(e.parentNode.childNodes),o.unshift(n.indexOf(e)),e=e.parentNode;while(e!==t||!e);return o}var t=this.getHighlights(),n=this.el,o=[];return a(t,!1),t.forEach(function(t){var r=0,a=t.textContent.length,i=e(t,n),s=t.cloneNode(!0);s.innerHTML="",s=s.outerHTML,t.previousSibling&&t.previousSibling.nodeType===u.TEXT_NODE&&(r=t.previousSibling.length),o.push([s,t.textContent,i.join(":"),r,a])}),JSON.stringify(o)},c.prototype.deserializeHighlights=function(e){function t(e){for(var t,n,a,i={wrapper:e[0],text:e[1],path:e[2].split(":"),offset:e[3],length:e[4]},s=i.path.pop(),l=r.el;a=i.path.shift();)l=l.childNodes[a];l.childNodes[s-1]&&l.childNodes[s-1].nodeType===u.TEXT_NODE&&(s-=1),l=l.childNodes[s],t=l.splitText(i.offset),t.splitText(i.length),t.nextSibling&&!t.nextSibling.nodeValue&&m(t.nextSibling).remove(),t.previousSibling&&!t.previousSibling.nodeValue&&m(t.previousSibling).remove(),n=m(t).wrap(m().fromHTML(i.wrapper)[0]),o.push(n)}var n,o=[],r=this;if(!e)return o;try{n=JSON.parse(e)}catch(e){throw"Can't parse JSON: "+e}return n.forEach(function(e){try{t(e)}catch(e){console&&console.warn}}),o},c.prototype.find=function(e,t){var n=m(this.el).getWindow(),o=n.scrollX,r=n.scrollY,a="undefined"==typeof t||t;if(m(this.el).removeAllRanges(),n.find)for(;n.find(e,a);)this.doHighlight(!0);else if(n.document.body.createTextRange){var i=n.document.body.createTextRange();for(i.moveToElementText(this.el);i.findText(e,1,a?4:0)&&(m(this.el).contains(i.parentElement())||i.parentElement()===this.el);)i.select(),this.doHighlight(!0),i.collapse(!1)}m(this.el).removeAllRanges(),n.scrollTo(o,r)},c.createWrapper=function(e){var t=document.createElement("sr-annote");return t},e.TextHighlighter=c}(window),t.default=TextHighlighter},187:function(e,t,n){"use strict";function o(e){return e&&e.__esModule?e:{default:e}}function r(e){var t="",n="",o="",r="",a="",i=void 0,s=new g.default(document.querySelector("sr-rd-content")),l={element:"sr-annote",separateWordSearch:!1,acrossElements:!0,each:function(e){var s=x(e);s.innerText!=t?$(e).addClass("sr-bad-annote"):($(e).attr("sr-annote-bg-color",!0).attr("data-id",n).attr("data-type",r).attr("data-color-type",o).removeAttr("data-markjs"),a&&$(e).attr("data-color-style",a),i&&$(e).attr("data-note",i))},done:function(){$(".sr-bad-annote").each(function(e,t){return t.outerHTML=t.innerHTML})}};b=$.extend(!0,[],e),b.forEach(function(e){o=e.color,n=e.id,r=e.type,a=e.style,i=e.note,"paragraph"==r?e.items.forEach(function(e){t=e.root,s.mark(e.str,l)}):"img"==r?$("sr-rd-content").find('img[src="'+e.text+'"]').addClass("sr-annote").attr("sr-annote-bb-color",!0).attr("data-id",n).attr("data-type",r).attr("data-color-type",o):"code"==r&&$("sr-rd-content").find("pre").map(function(t,a){a.innerText.replace(/ | |\n/gi,"")==e.text.replace(/ | |\n/gi,"")&&$(a).addClass("sr-annote").attr("sr-annote-bb-color",!0).attr("data-id",n).attr("data-type",r).attr("data-color-type",o)}),""!=i&&["img","code"].includes(r)?$('.sr-annote[data-id="'+n+'"]').after('<sr-annote-note data-note-id="note-'+n+'"><sr-annote-note-tip>'+i+"</sr-annote-note-tip></sr-annote-note>"):""!=i&&"paragraph"==r&&($("sr-annote[data-note]:last").append('<sr-annote-note data-note-id="note-'+n+'"><sr-annote-note-tip>'+i+"</sr-annote-note-tip></sr-annote-note>"),$("sr-annote[data-note]").removeAttr("data-note"))})}function a(e,t,n){h=new f.default(document.querySelector("sr-rd-content"),{onBeforeHighlight:function(e){if("sr-annote"==e.startContainer.parentNode.tagName.toLowerCase())return!1;var t=document.createElement("div");return $(t).append(e.cloneContents()),v={},v.html=t.innerHTML,!0},onAfterHighlight:function(o,r,a){var i=[],s=r.map(function(e){return e.outerHTML}).join(""),l=r.map(function(e){return e.innerText}).join(""),c=t?0:e.style||0,d=e.autosave?e.color:0;r.forEach(function(t){var n=x(t);i.push({str:t.innerText,root:n.innerText}),$(t).attr("data-color-type",d).attr("sr-annote-bg-color",!0),e.autosave&&c>0&&$(t).attr("data-color-style",c)}),v={id:a,color:d,style:c,tags:[],note:"",type:"paragraph",html:v.html,text:l,annote:s,items:i},n&&n(v)}})}function i(e,t){var n=e.id,o=e.key,r=e.value,a=e.type,i=e.style,s=e.target;if(n==-1&&["img","code"].includes(a)){var l=+new Date;$(s).addClass("sr-annote").attr("sr-annote-bb-color",!0).attr("data-id",l).attr("data-type",a).attr("data-color-type",r),t&&t({id:l,color:r,text:s.src||s.innerText,type:a})}else if("color"==o){var c='sr-annote[data-id="'+n+'"]';"paragraph"!=a&&(c="."+c),$(c).attr("data-color-type",r),"paragraph"==a&&i&&$(c).attr("data-color-style",i),e.note&&""!=e.note&&0==$('sr-annote-note[data-note-id="note-'+n+'"]').length&&(["img","code"].includes(a)?$('.sr-annote[data-id="'+n+'"]').after('<sr-annote-note data-note-id="note-'+n+'"><sr-annote-note-tip>'+e.note+"</sr-annote-note-tip></sr-annote-note>"):$('sr-annote[data-id="'+n+'"]:last').append('<sr-annote-note data-note-id="note-'+n+'"><sr-annote-note-tip>'+e.note+"</sr-annote-note-tip></sr-annote-note>"))}else"style"==o&&"paragraph"==a&&$('sr-annote[data-id="'+n+'"]').attr("data-color-style",r);e.note&&""!=e.note?$('sr-annote-note[data-note-id="note-'+n+'"] sr-annote-note-tip').text(e.note):void 0!=e.note&&""==e.note&&$('sr-annote-note[data-note-id="note-'+n+'"]').remove()}function s(e,t){"paragraph"==t?$('sr-annote[data-id="'+e+'"]').map(function(e,t){return t.outerHTML=t.innerHTML}):$('.sr-annote[data-id="'+e+'"]').removeClass("sr-annote").removeAttr("data-id").removeAttr("data-type").removeAttr("data-color-type"),$('sr-annote-note[data-note-id="note-'+e+'"]').remove()}function l(e){h.el=document.querySelector(e?"sr-rd-no-annote":"sr-rd-content")}function c(e,t){try{var n=$(e).find("img").attr("src");n&&t(n,$("sr-rd-content").find('img[src="'+n+'"]')[0])}catch(e){}}function d(){var e="",t=void 0,n=void 0,o=void 0,r=void 0;return $('sr-annote[data-color-type="0"]').map(function(a,i){var s=$(i);n=s.parent(),o=n[0].tagName.toLowerCase(),["a","ul","ol","li","b","strong","code","pre","h1","h2","h3","h4","h5"].includes(o)?(e+=n[0].outerHTML,n=n.parent()):e+=s[0].outerHTML,void 0!=t&&t.html()!=n.html()&&(["ul","ol","li","pre","h1","h2","h3","h4","h5"].includes(o)||["ul","ol","li","pre","h1","h2","h3","h4","h5"].includes(r)||(e+="</br>")),t=n,r=t[0].tagName.toLowerCase()}),e=e.replace(/sr-annote/gi,"span")}function p(e,t){var n=[],o=e.style||0,r=e.color||1;$("sr-rd-content").find("h1, h2, h3").map(function(e,t){var o=$(t),r=o[0].tagName.toLowerCase(),a=o.text();a&&n.push({level:"toc-level-"+r,text:a,item:t})});var a=0,i=[],s=function e(s){var l=s.item,c=[],d=$(l),p=+new Date+a,u='<sr-annote data-id="'+p+'">'+s.text+"</sr-annote>";if(v={},v.html=l.innerHTML,l.childNodes.length>1)!function(){var e="";l.childNodes.forEach(function(t){e+="#text"==t.nodeName?'<sr-annote data-id="'+p+'">'+t.textContent+"</sr-annote>":t.outerHTML.replace(t.textContent,'<sr-annote data-id="'+p+'">'+t.textContent+"</sr-annote>")}),d.html(e),d.find("sr-annote").map(function(e,t){var n=x(t);c.push({str:l.innerText,root:n.innerText})})}();else{d.html(u);var f=x(d.find("sr-annote")[0]);c.push({str:l.innerText,root:f.innerText})}d.find("sr-annote").attr("data-color-type",r).attr("sr-annote-bg-color",!0).attr("data-color-style",o),v={id:p,color:r,style:o,tags:[],note:"",type:"paragraph",html:v.html,text:s.text,annote:u,items:c},i.push(v),a++,a<n.length?e(n[a]):t&&t(i)};n.length>0&&s(n[a])}Object.defineProperty(t,"__esModule",{value:!0}),t.copyHTML=t.isIncludeImg=t.TOC=t.Toggle=t.Remove=t.Update=t.Write=t.Read=void 0;var u=n(186),f=o(u),m=n(185),g=o(m),h=void 0,b=[],v={},x=function(e){for(var t=e.parentNode;e.innerText==t.innerText;)t=t.parentNode;if("sr-rd-content"==t.tagName.toLowerCase()){if(t=e.parentNode.nextSibling||e.parentNode.previousSibling||e.parentNode.parentNode.nextSibling,null==t||""==t.innerHTML)return e.parentNode;for(;""==t.innerText||t.innerText&&t.innerText.indexOf(e.innerText)!=-1;)t=t.nextSibling||t.previousSibling||t.parentNode.nextSibling||t.parentNode.previousSibling}return t};t.Read=r,t.Write=a,t.Update=i,t.Remove=s,t.Toggle=l,t.TOC=p,t.isIncludeImg=c,t.copyHTML=d},188:function(e,t,n){(function(e,n){"use strict";function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function a(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function i(e,t,n){m=n,h=t,0==$("sr-annote-floating").length&&$("sr-read").append("<sr-annote-floating></sr-annote-floating>"),$("sr-rd-content").on("mousedown",function(){$('sr-annote[data-color-type="0"]').map(function(e,t){m("remove",0,void 0,"paragraph",t.dataset.id)}),c()}).on("mouseup",function(){p&&!t.off&&l(event.clientX+5,event.clientY+5,"paragraph",1,e),p=!1}),$(window).scroll(function(){!$("sr-annote-floating").hasClass("hidden")&&c(),p=!1}),$("sr-rd-content").on(t.event||"click","sr-annote, img, pre",function(n){var o=n.currentTarget,r=o.getBoundingClientRect(),a=r.x,i=r.y,s=r.width,c=$("sr-annote-floating").width(),d=$("sr-annote-floating").height(),m=o.tagName.toLowerCase(),g="img"==m?"img":"pre"==m?"code":"paragraph",h=$(o).attr("data-color-type")||1,b=$(o).attr("data-color-style")||0;u=$(o).attr("data-id")||-1,f=u==-1?o:void 0,!t.off&&l(a+s/2-c/2,i-d-10,g,h,b,e),p=!1}),$("sr-rd-content").on("click","sr-annote",function(e){t.off||"click"==t.event||(g++,1==g&&setTimeout(function(){var t=$(e.currentTarget),n=t.attr("data-id");if(1==g){var o=parseInt(t.attr("data-color-type"))+1;o>5&&(o=1),m("color",o,void 0,"paragraph",n,void 0)}else m("note",void 0,void 0,"paragraph",n,void 0);g=0},300))})}function s(e){u=e,p=!0}function l(t,o,r,a,i,s){$("sr-annote-floating").removeClass("hidden").css({left:t,top:o}),n.render(e.createElement(b,{id:u,lock:s,type:r,color:a,style:i,onAction:function(e,t){return m(e,t,i,r,u,f)}}),$("sr-annote-floating")[0])}function c(){$("sr-annote-floating").addClass("hidden")}Object.defineProperty(t,"__esModule",{value:!0});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}(),p=!1,u="",f=void 0,m=void 0,g=0,h=void 0,b=function(t){function n(){var e,t,a,i;o(this,n);for(var s=arguments.length,l=Array(s),c=0;c<s;c++)l[c]=arguments[c];return t=a=r(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(l))),a.state={confirm:!1},i=t,r(a,i)}return a(n,t),d(n,[{key:"onRemoveClick",value:function(){this.state.confirm?(this.props.onAction("remove"),this.setState({confirm:!1})):this.setState({confirm:!0})}},{key:"onColorStyleChange",value:function(e){if(this.props.lock)return void m("lock",0,void 0,void 0,void 0);var t=parseInt($(e.currentTarget).attr("data-color-style")||0)+1;t>this.props.MAX_TYPE&&(t=0),this.props.onAction("style",t),$(e.currentTarget).attr("data-color-style",t);
}},{key:"componentDidMount",value:function(){"mouseover"==h.event&&$("sr-annote-floating").addClass("effect"),"fast"==h.effect&&$("sr-annote-floating").addClass("fast")}},{key:"render",value:function(){var t=this;return e.createElement("sr-annote-floatingbar",{id:this.props.id,type:this.props.type},e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"1",onClick:function(){return t.props.onAction("color",1)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"2",onClick:function(){return t.props.onAction("color",2)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"3",onClick:function(){return t.props.onAction("color",3)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"4",onClick:function(){return t.props.onAction("color",4)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect","sr-annote-bg-color":!0,"data-color-type":"5",onClick:function(){return t.props.onAction("color",5)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect",type:"style","data-color-style":this.props.style,lock:this.props.lock,style:{display:"paragraph"==this.props.type?"flex":"none"},dangerouslySetInnerHTML:{__html:this.props.lock?this.props.lock_icon:this.props.style_icon},onClick:function(e){return t.onColorStyleChange(e)}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect",type:"note",dangerouslySetInnerHTML:{__html:this.props.note_icon},onClick:function(){return t.props.onAction("note")}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect",type:"tag",dangerouslySetInnerHTML:{__html:this.props.tag_icon},onClick:function(){return t.props.onAction("tag")}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect",type:"export",dangerouslySetInnerHTML:{__html:this.props.export_icon},onClick:function(){return t.props.onAction("export")}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect",type:"copy",dangerouslySetInnerHTML:{__html:this.props.copy_icon},onClick:function(){return t.props.onAction("copy")}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect",type:"link",dangerouslySetInnerHTML:{__html:this.props.link_icon},onClick:function(){return t.props.onAction("link")}}),e.createElement("sr-anote-fb-item",{class:"md-waves-effect",type:"remove",dangerouslySetInnerHTML:{__html:this.props.remove_icon},remove:this.state.confirm?"confirm":"",onClick:function(){return t.onRemoveClick()}}))}}]),n}(e.Component);b.defaultProps={id:"",type:"",MAX_TYPE:3,color:1,style_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M249.984 841.984l0-269.994667 148.010667 356.010667-61.994667 0q-34.005333 0-59.989333-25.984t-25.984-59.989333zM336 374.016q18.005333 0 29.994667-13.013333t11.989333-31.018667-11.989333-29.994667-29.994667-11.989333-29.994667 11.989333-11.989333 29.994667 11.989333 31.018667 29.994667 13.013333zM939.989333 680.021333q13.994667 32 0 64.981333t-45.994667 47.018667l-313.984 130.005333q-16 6.016-34.005333 6.016-56.021333 0-77.994667-52.010667l-212.010667-512q-6.016-18.005333-6.016-34.005333 0-54.016 52.010667-75.989333l315.989333-130.005333q18.005333-6.016 34.005333-6.016 54.016 0 75.989333 52.010667zM107.989333 838.016q-32-13.994667-45.994667-45.994667t0-64l104.021333-249.984 0 384z" fill="#ffffff"></path></svg>',note_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="13" height="13"><path d="M853.333333 469.333333H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667s19.2 42.666667 42.666667 42.666667h682.666666c23.466667 0 42.666667-19.2 42.666667-42.666667s-19.2-42.666667-42.666667-42.666667zM170.666667 768h426.666666c23.466667 0 42.666667-19.2 42.666667-42.666667s-19.2-42.666667-42.666667-42.666666H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666666s19.2 42.666667 42.666667 42.666667zM853.333333 256H170.666667c-23.466667 0-42.666667 19.2-42.666667 42.666667v0.426666c0 23.466667 19.2 42.666667 42.666667 42.666667h682.666666c23.466667 0 42.666667-19.2 42.666667-42.666667V298.666667c0-23.466667-19.2-42.666667-42.666667-42.666667z" fill="#42240c"></path></svg>',tag_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="15937" width="12" height="12"><path d="M115.749234 93.244684c-11.571546 0.811482-21.648043 11.102872-22.459524 22.459524L66.272379 489.226321c-1.282203 17.72878 5.203512 35.139312 17.772782 47.708582l401.908626 401.638473c29.810956 29.791513 78.122265 29.795607 107.938338 0.00921l344.958566-344.607572c29.843702-29.813003 29.857005-78.177524 0.031722-108.007923L536.977881 84.002183c-12.56927-12.570293-29.980825-19.057031-47.710628-17.774829L115.749234 93.244684zM397.455197 397.410172c-33.352619 33.347502-86.814228 33.945113-119.438253 1.320065-32.625048-32.625048-32.023344-86.085634 1.323135-119.435183 33.349549-33.348526 86.810135-33.948183 119.435183-1.323135C431.400311 310.595944 430.8027 364.057553 397.455197 397.410172L397.455197 397.410172z" fill="#536dfe"></path></svg>',remove_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M684.8 236.8l100.266667 102.4c2.133333 2.133333 4.266667 6.4 4.266666 10.666667s-2.133333 6.4-4.266666 10.666666l-151.466667 151.466667 151.466667 151.466667c2.133333 2.133333 4.266667 6.4 4.266666 10.666666s-2.133333 8.533333-4.266666 10.666667l-100.266667 100.266667c-2.133333 2.133333-6.4 4.266667-10.666667 4.266666s-6.4-2.133333-10.666666-4.266666l-151.466667-151.466667-151.466667 151.466667c-2.133333 2.133333-6.4 4.266667-10.666666 4.266666s-8.533333-2.133333-10.666667-4.266666l-100.266667-100.266667c-2.133333-2.133333-4.266667-6.4-4.266666-10.666667s2.133333-6.4 4.266666-10.666666l151.466667-151.466667-151.466667-151.466667c-2.133333-2.133333-4.266667-6.4-4.266666-10.666666s2.133333-8.533333 4.266666-10.666667l100.266667-100.266667c2.133333-2.133333 6.4-4.266667 10.666667-4.266666s6.4 2.133333 10.666666 4.266666l151.466667 151.466667 151.466667-151.466667c2.133333-2.133333 6.4-4.266667 10.666666-4.266666 4.266667-2.133333 8.533333 0 10.666667 2.133333z" fill="#ffffff"></path></svg>',export_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="14" height="14"><path d="M445.269333 439.466667H341.461333a13.525333 13.525333 0 0 1-7.808-2.304c-17.792-12.672-17.621333-33.152-6.186666-44.757334l164.821333-213.504a27.605333 27.605333 0 0 1 39.04-0.298666l0.298667 0.298666L696.533333 392.533333a27.648 27.648 0 1 1-19.626666 46.976h-98.176v208.469334a13.824 13.824 0 0 1-13.824 13.824h-105.813334a13.824 13.824 0 0 1-13.824-13.824v-208.469334zM261.546667 640.426667v109.056c0 7.637333 6.186667 13.824 13.824 13.824h472.832a13.824 13.824 0 0 0 13.824-13.824V640.426667c0-8.234667 6.656-14.890667 14.890666-14.890667h61.610667c8.192 0 14.848 6.656 14.848 14.890667v199.04a13.824 13.824 0 0 1-13.824 13.824H184.490667A13.824 13.824 0 0 1 170.666667 839.509333v-199.04c0-8.234667 6.656-14.890667 14.848-14.890666h61.141333c8.192 0 14.848 6.656 14.848 14.890666z" fill="#ffffff"></path></svg>',lock_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="12"><path d="M284.444672 455.110656v-113.77664c0-125.67552 101.879808-227.556352 227.555328-227.556352s227.555328 101.879808 227.555328 227.555328v113.777664h71.11168c23.564288 0 42.665984 19.10272 42.665984 42.667008v369.777664c0 23.564288-19.101696 42.667008-42.665984 42.667008H213.332992c-23.564288 0-42.665984-19.10272-42.665984-42.667008v-369.77664c0-23.565312 19.101696-42.668032 42.665984-42.668032h71.11168z m85.332992 0H654.22336v-113.77664c0-78.547968-63.675392-142.22336-142.222336-142.22336-78.546944 0-142.222336 63.675392-142.222336 142.22336v113.77664z" fill="#ffffff"></path></svg>',copy_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" p-id="3204" width="14" height="14"><path d="M768 384h-128V241.92A114.346667 114.346667 0 0 0 526.08 128H241.92A114.346667 114.346667 0 0 0 128 241.92v284.16A114.346667 114.346667 0 0 0 241.92 640H384v128a128 128 0 0 0 128 128h256a128 128 0 0 0 128-128v-256a128 128 0 0 0-128-128z m-384 128v42.666667H241.92a28.586667 28.586667 0 0 1-28.586667-28.586667V241.92A28.586667 28.586667 0 0 1 241.92 213.333333h284.16a28.586667 28.586667 0 0 1 28.586667 28.586667V384h-42.666667a128 128 0 0 0-128 128z" p-id="3205" fill="#ffffff"></path></svg>',link_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="12"><path d="M742.453 64c83.117 4.859 158.046 45.887 196.824 137.12 39.395 92.698 21.86 178.919-46.116 252.568-48.125 52.056-99.802 100.874-150.321 150.693-21.938 21.671-57.085 22.365-76.088 2.391-19.234-20.206-17.148-47.969 5.948-71.182 49.592-49.743 99.88-98.868 148.93-149.073 73.925-75.655 41.096-195.963-61.024-223.11-42.485-11.259-83.271-3.47-115.56 26.607-51.987 48.355-100.884 99.871-152.639 148.303-10.968 10.257-29.121 19.125-43.335 18.2-38.082-2.314-57.316-48.432-30.975-75.886 56.621-58.997 114.401-117.069 175.194-171.67C630.292 75.722 678.494 64.308 742.453 64zM64 729.779c0.386-63.624 22.556-118.611 67.127-163.958 49.206-50.128 99.184-99.485 149.085-148.919 23.715-23.522 52.837-25.295 72.92-5.09 20.857 21.054 18.849 47.583-5.87 72.416-47.507 47.66-95.785 94.704-142.828 142.904-58.167 59.46-60.639 139.741-7.03 193.649 51.292 51.593 136.108 51.824 189.717-0.386 48.742-47.506 96.171-96.4 144.76-143.984 29.198-28.534 73.538-18.354 81.262 20.052 2.781 13.804-2.78 34.627-12.36 44.73-52.835 55.68-105.595 111.824-163.143 162.337-70.449 61.85-153.025 72.108-239.077 34.627C115.369 901.911 64.232 820.241 64 729.78z m644.542-362.85c-3.09 5.783-6.643 18.277-14.676 26.451a45590.165 45590.165 0 0 1-292.068 293.828c-20.78 20.746-50.365 19.357-69.908-0.385-19.698-19.897-19.157-47.198 2.78-69.254 96.018-96.246 192.344-192.26 288.593-288.198 15.603-15.579 33.91-22.134 55.23-12.88 19.003 8.252 28.659 23.368 30.05 50.437z" fill="#ffffff"></path></svg>',onAction:void 0},b.propTypes={id:e.PropTypes.number,type:e.PropTypes.string,color:e.PropTypes.string,style:e.PropTypes.number,note_icon:e.PropTypes.string,tag_icon:e.PropTypes.string,copy_icon:e.PropTypes.string,link_icon:e.PropTypes.string,remove_icon:e.PropTypes.string,lock:e.PropTypes.boolean,onAction:e.PropTypes.func},t.Listen=i,t.Show=s}).call(t,n(2),n(13))},189:function(e,t,n){(function(e,o,r){"use strict";function a(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}function i(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function l(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function d(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function p(t,n,a,i,s,l){0==$("sr-annote-sidebar-bg").length&&$("sr-read").append("<sr-annote-sidebar-bg></sr-annote-sidebar-bg>"),void 0!=n.idx?!function(){1==x&&(l&&l(),x=!1),$("sr-annote-sidebar").length>0&&$("sr-annote-sidebar").remove();var c=function(e,r){if("option_drag"==e&&!t)if(r){if("auto"==a.order)return void(new o).Render({type:2,content:"你选择的方案为自动排序，更改为 <b>手动方式</b> 才可使用此功能。",action:"更改",cancel:"取消",callback:function(e){"cancel"!=e&&i("option_open")}});b.Help("annote_order"),u(n.annotations,s)}else v.destroy(),v=void 0;i(e,r)};r.render(e.createElement(A,{lock:t,autosave:a.autosave,export:a.exp_mode,unread:n,onAction:function(e,t){return c(e,t)}}),$("sr-annote-sidebar-bg")[0]),$("sr-annote-sidebar-bg").addClass("open")}():x=!0}function u(e,t){v&&(v.destroy(),v=void 0),v=(0,g.default)([$("sr-annote-sidebar-cards")[0]]).on("out",function(){var n=$.extend(!0,{},e);$("sr-annote-sidebar-cards").children().map(function(t,o){e[t]=n[o.attributes.idx.value],o.attributes.idx.value=t}),t()})}Object.defineProperty(t,"__esModule",{value:!0}),t.Render=void 0;var f=function(){function e(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}return function(t,n,o){return n&&e(t.prototype,n),o&&e(t,o),t}}();n(146);var m=n(129),g=i(m),h=n(33),b=a(h),v=void 0,x=!1,y=function(t){function n(){return l(this,n),c(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,t),f(n,[{key:"onActive",value:function(){var e=$(this.refs.card),t=$(this.refs.card).attr("mode");e.attr("mode","mini"==t?"normal":"mini"),$(this.refs.collapse).toggleClass("open"),localStorage.setItem("sr-annote-card-collapse-"+("unread"==e.attr("type")?e.attr("idx"):e.attr("data-id")),e.attr("mode"))}},{key:"render",value:function(){var t=this;return e.createElement("sr-annote-sidebar-card",{ref:"card",class:this.props.waves,"data-id":this.props.id,idx:this.props.idx,"sr-annote-bg-color":!0,"data-color-type":this.props.color,mode:this.props.mode||"mini",type:this.props.type},e.createElement("sr-annote-sidebar-card-anchor",{onClick:function(){return t.props.onClick()}}),e.createElement("sr-annote-sidebar-card-action",{ref:"collapse",dangerouslySetInnerHTML:{__html:this.props.icon},onClick:function(){return t.onActive()}}),e.createElement("sr-annote-sidebar-card-child",null,this.props.children))}}]),n}(e.Component);y.defaultProps={icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="12" height="12"><path d="M689.621 512l-328.832-328.832-60.331 60.331 268.501 268.501-268.501 268.501 60.331 60.331z" fill="#fff"></path></svg>'},y.propTypes={id:e.PropTypes.string};var w=function(t){function n(){return l(this,n),c(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,t),f(n,[{key:"render",value:function(){var t=this,n=localStorage.getItem("sr-annote-card-collapse-"+this.props.unread.idx)||"normal";return e.createElement(y,{mode:n,idx:this.props.unread.idx,type:"unread",waves:this.props.waves,onClick:function(){return t.props.onAction("unread",t.props.unread.idx)}},e.createElement("sr-annote-sidebar-preview",null,this.props.unread.title),e.createElement("sr-annote-sidebar-detail",null,e.createElement("sr-annote-sidebar-detail",{class:"title"},this.props.unread.title),""!=this.props.unread.desc&&e.createElement("sr-annote-sidebar-detail",{class:"desc"},this.props.unread.desc),e.createElement("sr-annote-sidebar-tags",null,this.props.unread.tags.map(function(t,n){return e.createElement("sr-annote-sidebar-tag",null,"#"+t)}))),""!=this.props.unread.note&&e.createElement("sr-annote-sidebar-note",null,this.props.unread.note),e.createElement("sr-annote-sidebar-toolbars",null,e.createElement("sr-tooltip",{"data-balloon-pos":"up","data-balloon-order":"upright","aria-label":"编辑"},e.createElement("sr-annote-sidebar-toolbar",{class:this.props.waves,type:"editor",dangerouslySetInnerHTML:{__html:this.props.editor_icon},onClick:function(){return t.props.onAction("unread_edit",t.props.unread.idx)}}))))}}]),n}(e.Component);w.defaultProps={editor_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M128 736V896h160l472.106667-472.106667-160-160L128 736z m755.413333-435.413333c16.64-16.64 16.64-43.733333 0-60.373334l-99.626666-99.626666c-16.64-16.64-43.733333-16.64-60.373334 0l-78.08 78.08 160 160 78.08-78.08z" fill="#8a8a8a"></path></svg>'};var k=function(t){function n(){var e,t,o,r;l(this,n);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=o=c(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),o.state={confirm:!1,confirm_id:void 0},r=t,c(o,r)}return d(n,t),f(n,[{key:"onRemoveClick",value:function(e,t){this.state.confirm_id==e&&this.state.confirm?this.props.onAction("remove",{id:e,type:t}):this.setState({confirm:!0,confirm_id:e})}},{key:"render",value:function(){var t=this,n=this.props.annotations.map(function(n,o){var r=void 0,a=void 0,i=void 0;i=n.tags&&n.tags.length?e.createElement("sr-annote-sidebar-tags",null,n.tags.map(function(t,n){return e.createElement("sr-annote-sidebar-tag",null,"#"+t)})):"","paragraph"==n.type&&0!=n.color?(r=e.createElement("sr-annote-sidebar-detail",{"data-color-type":n.color},n.text,i),a=e.createElement("sr-annote-sidebar-preview",{"data-color-type":n.color},n.text)):"img"==n.type?(r=e.createElement("sr-annote-sidebar-detail",null,e.createElement("img",{src:n.text}),i),a=e.createElement("sr-annote-sidebar-preview",null,e.createElement("img",{src:n.text}))):"code"==n.type&&(r=e.createElement("sr-annote-sidebar-detail",null,e.createElement("pre",{ref:"code",dangerouslySetInnerHTML:{__html:n.text.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")}}),i),a=e.createElement("sr-annote-sidebar-preview",null,e.createElement("pre",{ref:"code",dangerouslySetInnerHTML:{__html:n.text.replace(/</gi,"&lt;").replace(/>/gi,"&gt;")}})));var s=localStorage.getItem("sr-annote-card-collapse-"+n.id)||"mini";return e.createElement(y,{idx:o,id:n.id,waves:t.props.waves,color:n.color,type:n.type,mode:s,onClick:function(){return t.props.onAction("anchor",n.id)}},a,r,""!=n.note&&e.createElement("sr-annote-sidebar-note",null,n.note),e.createElement("sr-annote-sidebar-toolbars",null,e.createElement("sr-tooltip",{"data-balloon-pos":"up","aria-label":"编辑"},e.createElement("sr-annote-sidebar-toolbar",{class:t.props.waves,type:"editor",dangerouslySetInnerHTML:{__html:t.props.editor_icon},onClick:function(){return t.props.onAction("editor",n.id)}})),e.createElement("sr-tooltip",{"data-balloon-pos":"up","data-balloon-order":"upright","aria-label":"删除"},e.createElement("sr-annote-sidebar-toolbar",{class:t.props.waves,remove:t.state.confirm_id==n.id&&t.state.confirm?"confirm":"",type:"remove",dangerouslySetInnerHTML:{__html:t.props.remove_icon},onClick:function(){return t.onRemoveClick(n.id,n.type)}}))))});return e.createElement("sr-annote-sidebar-cards",null,n)}}]),n}(e.Component);k.defaultProps={editor_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M128 736V896h160l472.106667-472.106667-160-160L128 736z m755.413333-435.413333c16.64-16.64 16.64-43.733333 0-60.373334l-99.626666-99.626666c-16.64-16.64-43.733333-16.64-60.373334 0l-78.08 78.08 160 160 78.08-78.08z" fill="#8a8a8a"></path></svg>',remove_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="20" height="20"><path d="M684.8 236.8l100.266667 102.4c2.133333 2.133333 4.266667 6.4 4.266666 10.666667s-2.133333 6.4-4.266666 10.666666l-151.466667 151.466667 151.466667 151.466667c2.133333 2.133333 4.266667 6.4 4.266666 10.666666s-2.133333 8.533333-4.266666 10.666667l-100.266667 100.266667c-2.133333 2.133333-6.4 4.266667-10.666667 4.266666s-6.4-2.133333-10.666666-4.266666l-151.466667-151.466667-151.466667 151.466667c-2.133333 2.133333-6.4 4.266667-10.666666 4.266666s-8.533333-2.133333-10.666667-4.266666l-100.266667-100.266667c-2.133333-2.133333-4.266667-6.4-4.266666-10.666667s2.133333-6.4 4.266666-10.666666l151.466667-151.466667-151.466667-151.466667c-2.133333-2.133333-4.266667-6.4-4.266666-10.666666s2.133333-8.533333 4.266666-10.666667l100.266667-100.266667c2.133333-2.133333 6.4-4.266667 10.666667-4.266666s6.4 2.133333 10.666666 4.266666l151.466667 151.466667 151.466667-151.466667c2.133333-2.133333 6.4-4.266667 10.666666-4.266666 4.266667-2.133333 8.533333 0 10.666667 2.133333z" fill="#8a8a8a"></path></svg>'};var E=function(t){function n(){var e,t,o,r;l(this,n);for(var a=arguments.length,i=Array(a),s=0;s<a;s++)i[s]=arguments[s];return t=o=c(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(i))),o.state={collapse:!1,mini:!1,goon:o.props.goon,show:!0,export:o.props.export,drag:!1},r=t,c(o,r)}return d(n,t),f(n,[{key:"onToggleClick",value:function(e){return"export"==e?("page"==this.state.export?this.state.export="annote":"annote"==this.state.export?this.state.export="both":this.state.export="page",this.props.onAction&&this.props.onAction("option_export",this.state.export),void this.setState({export:this.state.export})):(this.props.onAction&&this.props.onAction("option_"+e,!this.state[e]),this.setState(s({},e,!this.state[e])),"mini"==e&&localStorage.setItem("sr-annote-card-option-mini-"+this.props.idx,!this.state[e]),void("collapse"==e&&localStorage.setItem("sr-annote-card-option-collapse-"+this.props.idx,!this.state[e])))}},{key:"componentDidMount",value:function(){"true"==localStorage.getItem("sr-annote-card-option-mini-"+this.props.idx)&&$("sr-annote-sidebar-option[type=mini]")[0].click(),"true"==localStorage.getItem("sr-annote-card-option-collapse-"+this.props.idx)&&$("sr-annote-sidebar-option[type=collapse]")[0].click()}},{key:"render",value:function(){var t=this,n=void 0,o=void 0;return"both"==this.state.export?(n="全文 + 标注",o=this.props.exp_both_icon):"annote"==this.state.export?(n="导出标注",o=this.props.exp_an_icon):(n="导出全文",o=this.props.exp_page_icon),e.createElement(y,{mode:"mini",type:"option"},e.createElement("sr-annote-sidebar-preview",null,e.createElement("sr-annote-sidebar-options",null,e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":this.state.show?"隐藏侧栏":"显示侧栏"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"show",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.state.show?this.props.show_side_icon:this.props.hide_side_icon},onClick:function(){return t.onToggleClick("show")}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":"选项"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"option",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.props.option_icon},onClick:function(){return t.props.onAction("option_open")}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":"添加目录为标注"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"toc",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.props.lock?this.props.lock_icon:this.props.toc_icon},onClick:function(){return t.props.onAction("option_toc")}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":this.state.goon?"关闭连续标注":"开启连续标注"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"goon",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.props.goon_icon},state:this.state.goon?"on":"off",onClick:function(){return t.onToggleClick("goon")}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":this.state.drag?"关闭拖拽排序":"开启拖拽排序"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"drag",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.props.lock?this.props.lock_icon:this.props.drag_icon},state:this.state.drag?"on":"off",lock:this.props.lock,onClick:function(){return t.onToggleClick("drag")}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":this.state.collapse?"展开标注":"缩进标注"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"collapse",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.props.collapse_icon},state:this.state.collapse?"on":"off",onClick:function(){return t.onToggleClick("collapse")}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":n},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"export",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:o},onClick:function(){return t.onToggleClick("export")}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":"删除"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"remove",off:this.state.mini&&"true",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.props.remove_icon},onClick:function(){return t.props.onAction("option_remove",t.props.idx)}})),e.createElement("sr-tooltip",{"data-balloon-pos":"down","aria-label":"最小化"},e.createElement("sr-annote-sidebar-option",{class:this.props.waves,type:"mini",side:this.state.show&&"true",dangerouslySetInnerHTML:{__html:this.props.mini_icon},onClick:function(){return t.onToggleClick("mini")}})))),e.createElement("sr-annote-sidebar-detail",null))}}]),n}(e.Component);E.defaultProps={show_side_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M512 192C298.666667 192 116.48 324.693333 42.666667 512c73.813333 187.306667 256 320 469.333333 320s395.52-132.693333 469.333333-320C907.52 324.693333 725.546667 192 512 192z m0 533.333333c-117.76 0-213.333333-95.573333-213.333333-213.333333s95.573333-213.333333 213.333333-213.333333 213.333333 95.573333 213.333333 213.333333-95.573333 213.333333-213.333333 213.333333z m0-341.333333c-70.613333 0-128 57.386667-128 128s57.386667 128 128 128 128-57.386667 128-128-57.386667-128-128-128z" fill="#ffffff"></path></svg>',hide_side_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M770.92864 204.8l-76.56448 76.57472c-56.10496-27.19744-117.63712-42.4448-182.3744-42.4448-175.13472 0-327.66976 109.99808-409.6 273.07008 40.27392 80.16896 97.77152 147.16928 166.47168 194.89792L204.8 770.92864 253.07136 819.2l76.43136-76.43136 88.50432-88.4736h-0.03072L819.2 253.07136 770.92864 204.8zM512 409.6c-56.56576 0-102.4 45.83424-102.4 102.4 0 15.7696 3.87072 30.5664 10.22976 43.89888l-49.96096 49.9712c-17.8688-26.94144-28.53888-59.07456-28.53888-93.87008 0-94.26944 76.40064-170.67008 170.67008-170.67008 34.79552 0 66.92864 10.63936 93.87008 28.53888l-49.9712 49.96096C542.52544 413.47072 527.80032 409.6 512 409.6zM808.63232 360.17152L680.30464 488.4992c1.06496 7.77216 2.36544 15.47264 2.36544 23.5008 0 94.26944-76.40064 170.67008-170.67008 170.67008-8.06912 0-15.72864-1.30048-23.5008-2.36544l-88.90368 88.9344c36.03456 10.16832 73.60512 15.84128 112.40448 15.84128 175.13472 0 327.66976-109.96736 409.6-273.07008-29.29664-58.33728-67.76832-109.71136-112.96768-151.83872z" fill="#ffffff"></path></svg>',mini_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M366.293333 702.293333l195.626667-195.626666-195.626667-195.626667L426.666667 250.666667l256 256-256 256z" fill="#ffffff"></path></svg>',goon_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M256 597.333333l128 128v213.333334h256V725.333333l128-128V384H256zM469.333333 85.333333h85.333334v128h-85.333334zM149.333333 250.666667l60.330667-60.330667 90.517333 90.517333-60.16 60.330667z m574.357334 30.336l90.496-90.496 60.373333 60.330666L784 341.333333z" fill="#ffffff"></path></svg>',collapse_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M512 85.333333C276.266667 85.333333 85.333333 276.266667 85.333333 512s190.933333 426.666667 426.666667 426.666667 426.666667-190.933333 426.666667-426.666667S747.733333 85.333333 512 85.333333zM277.333333 384l149.333334-149.333333 149.333333 149.333333h-106.666667v170.666667h-85.333333v-170.666667h-106.666667z m469.333334 256l-149.333334 149.333333-149.333333-149.333333h106.666667v-170.666667h85.333333v170.666667h106.666667z" fill="#ffffff"></path></svg>',exp_an_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M170.666667 213.333333m64 0l554.666666 0q64 0 64 64l0 0q0 64-64 64l-554.666666 0q-64 0-64-64l0 0q0-64 64-64Z" fill="#ffffff" p-id="2473"></path><path d="M234.666667 640h554.666666a64 64 0 0 1 0 128h-554.666666a64 64 0 0 1 0-128z m0-213.333333h298.666666a64 64 0 0 1 0 128h-298.666666a64 64 0 0 1 0-128z" fill="#ffffff" opacity=".3"></path></svg>',exp_page_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M170.666667 213.333333m64 0l554.666666 0q64 0 64 64l0 0q0 64-64 64l-554.666666 0q-64 0-64-64l0 0q0-64 64-64Z" fill="#ffffff" p-id="2473"></path><path d="M234.666667 640h554.666666a64 64 0 0 1 0 128h-554.666666a64 64 0 0 1 0-128z m0-213.333333h298.666666a64 64 0 0 1 0 128h-298.666666a64 64 0 0 1 0-128z" fill="#ffffff"></path></svg>',exp_both_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M170.666667 213.333333m64 0l554.666666 0q64 0 64 64l0 0q0 64-64 64l-554.666666 0q-64 0-64-64l0 0q0-64 64-64Z" fill="#1fab89" p-id="2473"></path><path d="M234.666667 640h554.666666a64 64 0 0 1 0 128h-554.666666a64 64 0 0 1 0-128z m0-213.333333h298.666666a64 64 0 0 1 0 128h-298.666666a64 64 0 0 1 0-128z" fill="#ffffff"></path></svg>',drag_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15"><path d="M307.16928 722.6368V307.2a68.27008 68.27008 0 0 1 136.52992 0v201.32864l185.37472 52.96128c36.096 10.3424 59.5968 48.896 52.23424 85.69856L626.432 921.6H313.0368L122.39872 730.94144a68.25984 68.25984 0 0 1 0-96.54272 68.25984 68.25984 0 0 1 96.54272 0l88.22784 88.23808z" p-id="2783" fill="#ffffff"></path><path d="M921.6 204.8H552.6016c-35.4304-61.14304-101.39648-102.4-177.2032-102.4-113.02912 0-204.72832 91.8016-204.72832 204.8 0 29.53216 6.4 57.52832 17.63328 82.90304l63.30368-26.24512c-7.92576-17.29536-12.65664-36.4032-12.65664-56.65792 0-75.33568 61.1328-136.54016 136.45824-136.54016C450.8672 170.67008 512 231.86432 512 307.2c0 18.50368-3.76832 36.12672-10.46528 52.23424l63.13984 26.13248a204.25728 204.25728 0 0 0 15.59552-78.35648c0-11.6736-1.19808-22.99904-3.072-34.14016H921.6V204.8z" fill="#ffffff"></path></svg>',remove_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M256 810.666667c0 47.146667 38.186667 85.333333 85.333333 85.333333h341.333334c47.146667 0 85.333333-38.186667 85.333333-85.333333V298.666667H256v512zM810.666667 170.666667h-149.333334l-42.666666-42.666667H405.333333l-42.666666 42.666667h-149.333334v85.333333h597.333334V170.666667z" fill="#ffffff"></path></svg>',toc_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M128 384h597.333333v-85.333333H128v85.333333z m0 170.666667h597.333333v-85.333334H128v85.333334z m0 170.666666h597.333333v-85.333333H128v85.333333z m682.666667 0h85.333333v-85.333333h-85.333333v85.333333z m0-426.666666v85.333333h85.333333v-85.333333h-85.333333z m0 256h85.333333v-85.333334h-85.333333v85.333334z" fill="#ffffff"></path></svg>',option_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="17" height="17"><path d="M858.090667 554.602667a53.866667 53.866667 0 0 1 0-85.205334 96.448 96.448 0 0 0-71.232-172.010666 53.824 53.824 0 0 1-60.245334-60.245334 96.448 96.448 0 0 0-172.010666-71.253333 55.509333 55.509333 0 0 1-85.205334 0 96.448 96.448 0 0 0-172.010666 71.253333 53.824 53.824 0 0 1-60.245334 60.245334 96.448 96.448 0 0 0-71.253333 172.010666 53.866667 53.866667 0 0 1 0 85.205334 96.448 96.448 0 0 0 71.253333 172.010666 53.824 53.824 0 0 1 60.245334 60.245334 94.336 94.336 0 0 0 58.773333 101.397333A99.605333 99.605333 0 0 0 394.24 896a94.357333 94.357333 0 0 0 75.157333-37.909333 55.509333 55.509333 0 0 1 85.205334 0 96.448 96.448 0 0 0 172.010666-71.253334 53.824 53.824 0 0 1 60.245334-60.224 96.448 96.448 0 0 0 71.253333-172.010666z m-346.090667 106.666666A149.269333 149.269333 0 1 1 661.269333 512 149.44 149.44 0 0 1 512 661.269333z" fill="#ffffff"></path></svg>',
lock_icon:'<svg viewBox="0 0 1024 1024" version="1.1" xmlns="http://www.w3.org/2000/svg" width="15" height="15"><path d="M284.444672 455.110656v-113.77664c0-125.67552 101.879808-227.556352 227.555328-227.556352s227.555328 101.879808 227.555328 227.555328v113.777664h71.11168c23.564288 0 42.665984 19.10272 42.665984 42.667008v369.777664c0 23.564288-19.101696 42.667008-42.665984 42.667008H213.332992c-23.564288 0-42.665984-19.10272-42.665984-42.667008v-369.77664c0-23.565312 19.101696-42.668032 42.665984-42.668032h71.11168z m85.332992 0H654.22336v-113.77664c0-78.547968-63.675392-142.22336-142.222336-142.22336-78.546944 0-142.222336 63.675392-142.222336 142.22336v113.77664z" fill="#f55246"></path></svg>'};var A=function(t){function n(){return l(this,n),c(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return d(n,t),f(n,[{key:"render",value:function(){var t=this;return e.createElement("sr-annote-sidebar",null,e.createElement(E,{waves:"md-waves-effect",lock:this.props.lock,goon:this.props.autosave,export:this.props.export,idx:this.props.unread.idx,onAction:function(e,n){return t.props.onAction(e,n)}}),e.createElement(w,{waves:"md-waves-effect",unread:this.props.unread,onAction:function(e,n){return t.props.onAction(e,n)}}),e.createElement(k,{waves:"md-waves-effect",annotations:this.props.unread.annotations,onAction:function(e,n){return t.props.onAction(e,n)}}))}}]),n}(e.Component);t.Render=p}).call(t,n(2),n(7),n(13))},228:function(e,t,n){t=e.exports=n(5)(),t.i(n(85),""),t.push([e.id,'.sr-annote-hideall{background-color:transparent!important;pointer-events:none}sr-annote-trigger{position:fixed!important;bottom:52px;right:32px;display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;margin:0 0 15px;padding:0;width:40px!important;height:40px!important;line-height:40px!important;color:#fff;background-color:rgba(245,82,70,.8);border-radius:50%;cursor:pointer;box-shadow:0 2px 2px 0 rgba(0,0,0,.14),0 1px 5px 0 rgba(0,0,0,.12),0 3px 1px -2px rgba(0,0,0,.2);-webkit-transition:all .5s ease-in-out 0ms;transition:all .5s ease-in-out 0ms;overflow:visible!important;overflow:initial!important}sr-annote-trigger.open{right:95px}sr-annote-trigger.off{background-color:#bdbdbd}sr-annote-trigger sr-i{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%;border-radius:50%}sr-annote{padding:6px 0;background-color:transparent;font-size:inherit;cursor:pointer}.sr-annote[data-type=code],.sr-annote[data-type=img]{border-bottom-width:5px;border-bottom-style:solid}sr-annote[data-color-type="0"]{padding:7px 0}sr-annote-floating{position:fixed;color:#fff;background:hsla(0,0%,6%,.95);font-weight:700;border-radius:5px;box-shadow:0 0 10px rgba(0,0,0,.3);opacity:0;-webkit-animation-delay:.2s;animation-delay:.2s;-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:sr-annote-slideInUp;animation-name:sr-annote-slideInUp;z-index:2000}sr-annote-floating.fast{-webkit-animation-duration:.2s!important;animation-duration:.2s!important}sr-annote-floating.effect{-webkit-transition:all 1s cubic-bezier(.23,1,.32,1) .1s;transition:all 1s cubic-bezier(.23,1,.32,1) .1s}sr-annote-floating.hidden{-webkit-animation-duration:.5s;animation-duration:.5s;-webkit-animation-fill-mode:both;animation-fill-mode:both;-webkit-animation-name:sr-annote-slideInDown;animation-name:sr-annote-slideInDown;pointer-events:none}.sr-annote-floatingbar-hiden{display:none}@-webkit-keyframes sr-annote-slideInUp{0%{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);visibility:visible}to{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}}@keyframes sr-annote-slideInUp{0%{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0);visibility:visible}to{opacity:1;-webkit-transform:translateZ(0);transform:translateZ(0)}}@-webkit-keyframes sr-annote-slideInDown{0%{opacity:1;visibility:visible}to{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}@keyframes sr-annote-slideInDown{0%{opacity:1;visibility:visible}to{opacity:0;-webkit-transform:translate3d(0,100%,0);transform:translate3d(0,100%,0)}}sr-annote-floatingbar{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;margin:5px}sr-annote-floatingbar,sr-annote-floatingbar sr-anote-fb-item{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-annote-floatingbar sr-anote-fb-item{margin-right:5px;cursor:pointer}sr-annote-floatingbar sr-anote-fb-item:last-child{margin-right:0}sr-annote-floatingbar sr-anote-fb-item{width:20px;height:20px;border-radius:50%;box-sizing:border-box}sr-annote-floatingbar sr-anote-fb-item[type=copy],sr-annote-floatingbar sr-anote-fb-item[type=export],sr-annote-floatingbar sr-anote-fb-item[type=link],sr-annote-floatingbar sr-anote-fb-item[type=note],sr-annote-floatingbar sr-anote-fb-item[type=remove],sr-annote-floatingbar sr-anote-fb-item[type=style],sr-annote-floatingbar sr-anote-fb-item[type=tag]{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;border-radius:50%}sr-annote-floatingbar sr-anote-fb-item[type=style]{background-color:#f73859!important}sr-annote-floatingbar sr-anote-fb-item[type=export]{background-color:#cc0e74}sr-annote-floatingbar sr-anote-fb-item[type=copy]{background-color:#a78674}sr-annote-floatingbar sr-anote-fb-item[type=link]{background-color:#7f39fb}sr-annote-floatingbar sr-anote-fb-item[type=remove]{background-color:#f44336}sr-annote-floatingbar sr-anote-fb-item[remove=confirm]{-webkit-transform:rotate(270deg);transform:rotate(270deg);-webkit-transition:all .2s ease-in-out 0s;transition:all .2s ease-in-out 0s}sr-annote-sidebar-bg{position:fixed;top:0;right:0;bottom:180px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;width:260px;font-size:22.4px;font-size:1.4rem;font-weight:500;opacity:0;-webkit-transform:translateX(256px);transform:translateX(256px);-webkit-transition:all .45s cubic-bezier(.23,1,.32,1) 0ms;transition:all .45s cubic-bezier(.23,1,.32,1) 0ms}sr-annote-sidebar-bg.mini{pointer-events:none}sr-annote-sidebar-bg:hover{z-index:2147483647}sr-annote-sidebar-bg.open{opacity:1;-webkit-transform:translateX(0);transform:translateX(0)}sr-annote-sidebar{margin:3px 4px 0;padding-left:20px;height:100%;overflow-x:hidden}sr-annote-sidebar.mini{pointer-events:none}sr-annote-sidebar *{color:rgba(0,0,0,.6);word-break:break-all;box-sizing:border-box}sr-annote-sidebar{overflow-y:hidden}sr-annote-sidebar:hover{overflow-y:overlay}sr-annote-sidebar::-webkit-scrollbar-track{background-color:transparent}sr-annote-sidebar::-webkit-scrollbar{width:12px}sr-annote-sidebar::-webkit-scrollbar-thumb{padding-top:80px;background-clip:padding-box;background-color:#ddd;border:3px solid transparent;border-radius:8px;border-radius:10px;border:6px solid transparent;background-color:rgba(85,85,85,.55)}sr-annote-sidebar::-webkit-scrollbar{width:0;-webkit-transition:width .7s cubic-bezier(.4,0,.2,1);transition:width .7s cubic-bezier(.4,0,.2,1)}sr-annote-sidebar:hover::-webkit-scrollbar{width:16px}sr-annote-sidebar[srcoll=on]:hover sr-annote-sidebar-card[type=option].mini{-webkit-transform:translateX(-16px);transform:translateX(-16px)}sr-annote-sidebar[srcoll=on]:hover sr-annote-sidebar-card.off{-webkit-transform:translateX(190px);transform:translateX(190px)}sr-annote-sidebar-cards{display:block}sr-annote-sidebar-card{position:relative;display:block!important;margin:12px 7px 12px 12px;color:rgba(51,51,51,.87);background-color:#fff;border-radius:4px;box-shadow:0 2px 5px rgba(0,0,0,.08);-webkit-transition:all .45s cubic-bezier(.23,1,.32,1) 0ms;transition:all .45s cubic-bezier(.23,1,.32,1) 0ms;pointer-events:auto}sr-annote-sidebar-card:hover{box-shadow:0 10px 20px 0 rgba(168,182,191,.6);-webkit-transform:translateY(-1px);transform:translateY(-1px)}sr-annote-sidebar-card:last-child{margin-bottom:30px}sr-annote-sidebar-card.off{display:block;-webkit-transform:translateX(210px);transform:translateX(210px);-webkit-transition:all .25s ease-out;transition:all .25s ease-out}sr-annote-sidebar-card.off:hover{-webkit-transform:translateX(120px)!important;transform:translateX(120px)!important}sr-annote-sidebar-card.hide{display:block;-webkit-transform:translateX(256px);transform:translateX(256px);-webkit-transition:all .25s ease-out;transition:all .25s ease-out}sr-annote-sidebar-card-anchor{position:absolute;left:0;top:0;width:90%;height:100%}sr-annote-sidebar-card-action{position:absolute;top:10px;right:3px;display:block;width:12px;height:12px;line-height:12px;-webkit-transition:all .25s ease-out;transition:all .25s ease-out;cursor:pointer;z-index:20000}sr-annote-sidebar-card-action.open{-webkit-transform:rotate(90deg);transform:rotate(90deg)}sr-annote-sidebar-card[mode=mini]{overflow:hidden}sr-annote-sidebar-card[mode=mini] sr-annote-sidebar-preview{display:block;padding:6px 12px 5px 10px;height:32px;font-size:13px;font-weight:400;white-space:nowrap;text-align:left;text-overflow:ellipsis;-webkit-transition:all .25s ease-out;transition:all .25s ease-out;overflow:hidden}sr-annote-sidebar-card[mode=mini][type=img] sr-annote-sidebar-preview{text-align:center}sr-annote-sidebar-card[mode=mini] sr-annote-sidebar-detail{padding:0 15px;height:0}sr-annote-sidebar-card[mode=mini] sr-annote-sidebar-note,sr-annote-sidebar-card[mode=mini] sr-annote-sidebar-toolbars{display:none}sr-annote-sidebar-card[mode=mini] pre{margin:0!important;padding:0!important;white-space:nowrap;text-overflow:ellipsis;overflow:hidden}sr-annote-sidebar-card[mode=normal] sr-annote-sidebar-preview{display:none}sr-annote-sidebar-card[mode=normal] sr-annote-sidebar-detail{margin-bottom:15px;padding:15px 15px 0;height:auto;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:3;-webkit-box-orient:vertical}sr-annote-sidebar-card[data-color-type="0"]{display:none!important}sr-annote-sidebar-card pre{margin:0!important;padding:0!important;background-color:transparent!important;max-height:200px;font-size:10px;overflow:hidden}sr-annote-sidebar-card input,sr-annote-sidebar-card textarea{font-size:12px!important}sr-annote-sidebar-card img{margin:0;padding:0;max-height:100px;max-width:80%;background:#fff;border:0;border-radius:6px}sr-annote-sidebar-detail{display:block;padding:15px;width:100%;color:#fff;font-size:10px;text-align:justify;border-top-left-radius:4px;border-top-right-radius:4px;-webkit-transition:all .25s ease-out;transition:all .25s ease-out}sr-annote-sidebar-card[type=img] sr-annote-sidebar-detail{text-align:center}sr-annote-sidebar-tags{-ms-flex-wrap:wrap;flex-wrap:wrap;margin-top:15px}sr-annote-sidebar-tag,sr-annote-sidebar-tags{display:-webkit-box;display:-ms-flexbox;display:flex}sr-annote-sidebar-tag{-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding:4px 12px 12px 0;height:22px;font-size:14px;font-size:.875rem;font-weight:700;white-space:nowrap;border-radius:16px;outline:none;cursor:pointer;overflow:hidden;-webkit-transition:all .2s ease-in-out 0s;transition:all .2s ease-in-out 0s}sr-annote-sidebar-note{display:block;padding:15px 15px 0;width:100%;background-color:#fff;text-align:justify;font-size:13px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical}sr-annote-sidebar-toolbars{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:end;-ms-flex-pack:end;justify-content:flex-end;padding-right:10px;height:32px;background-color:#fff;border-bottom-left-radius:4px;border-bottom-right-radius:4px}sr-annote-sidebar-toolbar,sr-annote-sidebar-toolbars{-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-annote-sidebar-toolbar{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;margin-left:5px;width:20px;height:20px;line-height:20px;border-radius:50%}sr-annote-sidebar-toolbar[remove=confirm]{-webkit-transform:rotate(270deg);transform:rotate(270deg);-webkit-transition:all .2s ease-in-out 0s;transition:all .2s ease-in-out 0s}sr-annote-sidebar-toolbar[remove=confirm] svg path{fill:#f44336}sr-annote-sidebar-card[type=unread]{background-color:#1fab89}sr-annote-sidebar-card[type=unread] sr-annote-sidebar-detail.title{padding:0;text-align:left;font-size:14px}sr-annote-sidebar-card[type=unread] sr-annote-sidebar-detail.desc{padding:0 0 0 10px;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:4;-webkit-box-orient:vertical;border-left:1px outset #fff;border-top-left-radius:0;border-top-right-radius:0}sr-annote-sidebar-card[type=unread] sr-annote-sidebar-tag{color:#fff}sr-annote-sidebar-card[type=unread][mode=mini] sr-annote-sidebar-preview{color:#fff;font-size:13px}sr-annote-sidebar-card[type=option]{height:32px;background-color:transparent;box-shadow:none;overflow:visible;overflow:initial}sr-annote-sidebar-card[type=option]:hover{-webkit-transform:translateY(0);transform:translateY(0)}sr-annote-sidebar-card[type=option].mini{margin-right:0}sr-annote-sidebar-card[type=option] sr-annote-sidebar-card-action,sr-annote-sidebar-card[type=option] sr-annote-sidebar-card-anchor{display:none}sr-annote-sidebar-card[type=option] sr-annote-sidebar-preview{background-color:transparent}sr-annote-sidebar-options{position:absolute;top:0;right:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;padding-right:5px;height:100%;background-color:#3a3a3a;border-left:10px outset #222;border-radius:4px}sr-annote-sidebar-option,sr-annote-sidebar-options{-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}sr-annote-sidebar-option{display:-webkit-box!important;display:-ms-flexbox!important;display:flex!important;margin-left:5px;width:20px;height:20px;border-radius:50%;-webkit-transition:all .25s ease-out;transition:all .25s ease-out;cursor:pointer}sr-annote-sidebar-option[off=true],sr-annote-sidebar-option[side=false]:not(:first-child){width:0;margin-left:0}sr-annote-sidebar-option[off=true]~sr-annote-sidebar-option:last-child svg{-webkit-transform:rotate(180deg);transform:rotate(180deg)}sr-annote-sidebar-option[type=drag][state=on] svg path,sr-annote-sidebar-option[type=goon][state=on] svg path,sr-annote-sidebar-option[type=save][state=on] svg path{fill:#1fab89}sr-annote-sidebar-option[type=collapse][state=on] svg{-webkit-transform:rotate(90deg);transform:rotate(90deg)}sr-annote-sidebar-option[lock=true] svg path{fill:#f55246!important}sr-annote-sidebar-card[type=option]:hover~sr-annote-sidebar-card[type=unread]{z-index:-1}',""])},230:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,'.simpread-tipsalert-root dialog-gp{position:absolute}.simpread-tipsalert-root dialog-gp .close{position:absolute;top:0;right:0;z-index:2}.simpread-tipsalert-root dialog-content{padding:0!important;width:650px!important}.simpread-tipsalert-root .details{position:relative;color:rgba(51,51,51,.87);font-family:Hiragino Sans GB,Microsoft Yahei;text-shadow:none}.simpread-tipsalert-root .details .carousel.carousel-slider{height:450px;border-radius:4px;box-shadow:0 12px 18px -6px rgba(0,0,0,.3)}.simpread-tipsalert-root .details .carousels setion sr-div-center{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;height:321px;box-sizing:border-box}.simpread-tipsalert-root .details .carousels setion sr-div-center.hidden{display:none}.simpread-tipsalert-root .details .carousels setion sr-div-center img{margin-top:20px!important;height:321px;width:auto!important}.simpread-tipsalert-root .details .carousels setion sr-div-center sr-video{position:absolute;left:0;right:0;width:100%;height:321px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;z-index:2}.simpread-tipsalert-root .details .carousels setion .tipsimg.error{width:0!important;height:0!important}.simpread-tipsalert-root .details .carousels setion .tipsimg:after{content:"\\F1C5" " Sorry, the image below is broken :(";font-family:Font Awesome\\ 5 Free;font-weight:900;position:absolute;top:0;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:650px;height:100%;color:#646464;background-color:#fff;z-index:2}.simpread-tipsalert-root .details .carousels setion sr-div-center sr-video+img{opacity:.5}.simpread-tipsalert-root .details .carousels setion img{margin-top:-82px;width:100%}.simpread-tipsalert-root .details .carousels setion video{height:321px}.simpread-tipsalert-root .details .carousels setion video.active{display:block}.simpread-tipsalert-root .details .carousels .descr{position:absolute;left:0;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;height:80px;width:100%;padding-bottom:10px;background-color:#fff;font-size:14px}.simpread-tipsalert-root .details .carousels .descr b{margin:0 3px}.simpread-tipsalert-root .details .carousels .descr.large{font-size:17px}.simpread-tipsalert-root .floating{position:absolute;left:0;right:0;bottom:14px;height:80px;overflow-y:hidden}.simpread-tipsalert-root .floating,.simpread-tipsalert-root .floating .docs{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center}.simpread-tipsalert-root .floating .docs{-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;padding:1px 40px;height:30px;color:#fff;background-color:#4dbb7c;font-size:15px;font-weight:400;border-radius:30px;-webkit-transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;transition:all .5s cubic-bezier(.23,1,.32,1) 0ms;box-shadow:0 12px 18px -6px rgba(0,0,0,.3)}.simpread-tipsalert-root footer{position:absolute;top:199px;left:-60px;right:-60px;display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;-ms-flex-direction:row;flex-direction:row;-webkit-box-pack:justify;-ms-flex-pack:justify;justify-content:space-between;-webkit-box-align:center;-ms-flex-align:center;align-items:center}',""])},250:function(e,t,n){var o=n(228);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},252:function(e,t,n){var o=n(230);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)},585:function(e,t,n){t=e.exports=n(5)(),t.push([e.id,'.loading{position:fixed;top:0;left:0;width:100%;height:100%;display:-webkit-box;display:-ms-flexbox;display:box;display:flex;-webkit-box-pack:center;-o-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-o-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fafafa;z-index:200}.coffee_loading{position:relative;-webkit-transform:scale(1.5);transform:scale(1.5)}.coffee_body,.coffee_cup{width:20px;height:24px;border:1px solid #555;border-radius:0 0 5px 5px;position:relative;margin:36px auto}.coffee_body{position:absolute;top:0;margin:0;background-color:#555;height:0;border-radius:0;-webkit-animation:size 1s linear infinite alternate;animation:size 1s linear infinite alternate}.coffee_cup:after,.coffee_cup:before{position:absolute;content:""}.coffee_cup:after{width:5px;height:12px;border:1px solid #555;border-left:none;border-radius:0 20px 20px 0;left:20px}.coffee_cup:before{width:1px;height:6px;background-color:#555;top:-10px;left:4px;box-shadow:5px 0 0 0 #555,5px -5px 0 0 #555,10px 0 0 0 #555;-webkit-animation:steam 1s linear infinite alternate;animation:steam 1s linear infinite alternate}.coffee_label{position:absolute;left:0;top:0;font-size:10px;width:200px;color:#555;-webkit-transform:scale(.7) translate(-80px,36px);transform:scale(.7) translate(-80px,36px)}.loading[theme=dark]{background-color:#292929}.loading[theme=dark] .coffee_body,.loading[theme=dark] .coffee_cup:before{background-color:#e0e0e0}.error .label[theme=dark],.loading[theme=dark] .coffee_label{color:#e0e0e0}.loading[theme=dark] .coffee_body,.loading[theme=dark] .coffee_cup,.loading[theme=dark] .coffee_cup:after{border:1px solid #e0e0e0}.loading[theme=palenight]{background-color:#2b2d3e}.loading[theme=palenight] .coffee_body,.loading[theme=palenight] .coffee_cup:before{background-color:#c3c7d1}.error .label[theme=palenight],.loading[theme=palenight] .coffee_label{color:#c3c7d1}.loading[theme=palenight] .coffee_body,.loading[theme=palenight] .coffee_cup,.loading[theme=palenight] .coffee_cup:after{border:1px solid #c3c7d1}.loading[theme=night]{background-color:#23252b}.loading[theme=night] .coffee_body,.loading[theme=night] .coffee_cup:before{background-color:#ccc}.error .label[theme=night],.loading[theme=night] .coffee_label{color:#ccc}.loading[theme=night] .coffee_body,.loading[theme=night] .coffee_cup,.loading[theme=night] .coffee_cup:after{border:1px solid #ccc}@-webkit-keyframes steam{0%{height:0}to{height:6px}}@keyframes steam{0%{height:0}to{height:6px}}@-webkit-keyframes size{0%{height:0}to{height:24px;border-radius:0 0 5px 5px}}@keyframes size{0%{height:0}to{height:24px;border-radius:0 0 5px 5px}}sr-annote-sidebar-bg{bottom:0!important}sr-annote-sidebar{height:auto!important;padding-bottom:20px!important}sr-annote-sidebar-option[type=export],sr-annote-sidebar-option[type=remove]{display:none!important}sr-annote-trigger{opacity:0!important;visibility:hidden!important}sr-local{position:fixed;left:0;bottom:2px;display:block;padding:0 5px;color:#fff;background-color:#333;font-size:11px;font-weight:700;border-radius:5px;box-shadow:0 2px 5px rgba(0,0,0,.08);-webkit-transform:scale(.8);transform:scale(.8);z-index:2147483647}.error{display:-webkit-box;display:-ms-flexbox;display:flex;-webkit-box-orient:vertical;-webkit-box-direction:normal;-ms-flex-direction:column;flex-direction:column;-webkit-box-pack:center;-ms-flex-pack:center;justify-content:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;width:100%;height:100%}.error img{width:300px}.error .label{margin-top:15px;font-size:15px;font-weight:400;text-align:center}.error .label a{color:inherit;font-size:inherit;text-decoration:none}.MJX_Assistive_MathML{display:none}',""])},681:function(e,t,n){var o=n(585);"string"==typeof o&&(o=[[e.id,o,""]]),n(8)(o,{}),o.locals&&(e.exports=o.locals)}});